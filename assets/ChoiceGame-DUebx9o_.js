import{d as F,r as o,l as N,m as M,c as s,a as t,f as C,t as u,F as G,g as L,e as d,b as k,h as Q,v as T,w as h,p as H,i as j,j as q,k as z,s as U,n as X,o as l,_ as $}from"./index-BQT6Bcpt.js";function J(B){const n=[...B];for(let a=n.length-1;a>0;a--){const i=Math.floor(Math.random()*(a+1));[n[a],n[i]]=[n[i],n[a]]}return n}const K=[{text:"病人姓名為林大明，床號 103，男性，70 歲。",correctCategory:"I",explanation:"這是交班開頭的基本介紹，屬於 Introduction（I）。"},{text:"目前血氧下降至 88%，已提高 FiO2 至 60%。",correctCategory:"S",explanation:"描述病人目前狀況，屬於 Situation（S）。"},{text:"病人三天前因肺炎住院，已有呼吸衰竭病史。",correctCategory:"B",explanation:"提到過去病史與住院原因，屬於 Background（B）。"},{text:"ABG 顯示 PaCO2 為 75 mmHg，須密切監控。",correctCategory:"A",explanation:"檢驗結果與評估，屬於 Assessment（A）。"},{text:"建議將 PEEP 調整至 8 cmH2O，並加強痰液處理。",correctCategory:"R",explanation:"提出治療建議與後續處理，屬於 Recommendation（R）。"},{text:"目前以 SIMV 模式通氣，設定 VT 450 ml。",correctCategory:"A",explanation:"描述呼吸器設定屬於 Assessment（A）。"},{text:"昨晚出現喘氣加劇情形，並報告胸痛。",correctCategory:"S",explanation:"描述目前症狀與變化，屬於 Situation（S）。"},{text:"前天曾進行支氣管鏡檢查，發現膿性分泌物。",correctCategory:"B",explanation:"描述過去接受的檢查與發現，屬於 Background（B）。"},{text:"目前以 midazolam 持續鎮靜，每小時 2 mg/hr。",correctCategory:"A",explanation:"藥物使用狀況屬於評估，歸為 Assessment（A）。"},{text:"預計下午 2 點安排轉至普通病房，請留意換機作業。",correctCategory:"R",explanation:"交代後續處置與注意事項，屬於 Recommendation（R）。"},{text:"病人目前由我（黃小明）交班給林護理師。",correctCategory:"I",explanation:"介紹交班者與接班者，屬於 Introduction（I）。"},{text:"病人接呼吸器後兩天內血氧穩定。",correctCategory:"B",explanation:"描述過去治療過程屬於 Background（B）。"},{text:"SPO2 從今早起逐漸下降，需調整參數因應。",correctCategory:"S",explanation:"即時狀況變化，屬於 Situation（S）。"},{text:"設定 PEEP 6、PS 10、FiO2 50%，頻率 14。",correctCategory:"A",explanation:"詳細呼吸器設定屬於 Assessment（A）。"},{text:"建議後續安排肺功能檢查與胸部 X 光追蹤。",correctCategory:"R",explanation:"屬於建議事項，歸為 Recommendation（R）。"},{text:"目前插管持續第五天，無特殊併發症。",correctCategory:"A",explanation:"目前治療情況屬於 Assessment（A）。"},{text:"病人 2 年前診斷為 COPD，需注意慢性病控制。",correctCategory:"B",explanation:"病史資訊屬於 Background（B）。"},{text:"我負責呼吸治療部分的交班，林醫師負責主治交接。",correctCategory:"I",explanation:"介紹交班角色，屬於 Introduction（I）。"},{text:"建議待會做口腔護理時協助抽痰。",correctCategory:"R",explanation:"提醒交接注意事項屬於 Recommendation（R）。"},{text:"今日白天病人呼吸速率上升至 26 次/分。",correctCategory:"S",explanation:"屬於目前狀況（Situation）。"},{text:"目前為第三次拔管失敗，考慮是否轉氣切。",correctCategory:"A",explanation:"評估呼吸治療成效與後續考量，屬於 Assessment（A）。"},{text:"病人轉入 ICU 後由我（李治療師）負責呼吸器管理。",correctCategory:"I",explanation:"介紹交班與接手負責人員，屬於 Introduction（I）。"},{text:"COPD 病史已超過 10 年，目前仍需定期使用支氣管擴張劑。",correctCategory:"B",explanation:"慢性病史資訊，屬於 Background（B）。"},{text:"病人昨天有咳痰困難，今晨配合抽痰後改善。",correctCategory:"S",explanation:"即時症狀與處置反應，屬於 Situation（S）。"},{text:"ABG 結果顯示 pH 7.25, PaCO2 80, PaO2 58。",correctCategory:"A",explanation:"血氣數據分析屬於 Assessment（A）。"},{text:"明日早上安排胸部 X 光與肺超音波追蹤。",correctCategory:"R",explanation:"屬於後續建議與計畫，為 Recommendation（R）。"},{text:"目前警報頻繁為高壓警報，設定需檢討。",correctCategory:"A",explanation:"設備警報與設定評估，屬於 Assessment（A）。"},{text:"轉出後請確認呼吸器紀錄完整與傳輸設定無誤。",correctCategory:"R",explanation:"交班提醒與檢查項目，屬於 Recommendation（R）。"},{text:"我在今天早班開始時接手此病人。",correctCategory:"I",explanation:"交班者的背景資訊，屬於 Introduction（I）。"},{text:"病人吸入痰液後呼吸困難加劇。",correctCategory:"S",explanation:"狀況變化為 Situation（S）。"},{text:"曾於去年插管治療共 8 天。",correctCategory:"B",explanation:"既往插管經驗為病史，屬於 Background（B）。"},{text:"建議調整 PS 值至 14 以因應潮氣量不足。",correctCategory:"R",explanation:"治療參數調整建議，為 Recommendation（R）。"},{text:"SpO2 持續低於 90%，雖已提高 FiO2 至 70%。",correctCategory:"S",explanation:"即時生理參數狀況，屬於 Situation（S）。"},{text:"目前鎮靜劑改為 dexmedetomidine 持續輸注。",correctCategory:"A",explanation:"藥物使用與調整屬於 Assessment（A）。"},{text:"病人吸痰後氧合改善，建議維持定時吸痰頻率。",correctCategory:"R",explanation:"臨床建議與後續照護，為 Recommendation（R）。"},{text:"交班由值班治療師林小芸完成。",correctCategory:"I",explanation:"交班人資訊，屬於 Introduction（I）。"},{text:"COPD 病人今早訴說胸悶，評估後認為非急性惡化。",correctCategory:"S",explanation:"臨床症狀與即時處置，為 Situation（S）。"},{text:"安排下午 2 點執行抽痰與管路更換。",correctCategory:"R",explanation:"屬於後續計畫與提醒，為 Recommendation（R）。"}],W={class:"choice-container"},Y={key:0},Z={class:"question-box"},ee={class:"choices"},te=["disabled","onClick"],oe={key:0,class:"feedback-box"},ae={key:0,class:"correct"},ne={key:1,class:"incorrect"},re={class:"explanation"},se={class:"navigation"},le={key:1,class:"result-box"},ce={class:"submit-score"},ie=["disabled"],P=10,ue=F({__name:"ChoiceGame",setup(B){const n=o([]),a=o(0),i=o(0),y=o(!1),b=o(!1),x=o(!1),m=o(!1),S=o(""),f=o(""),v=o(""),I=[{label:"Introduction",value:"I"},{label:"Situation",value:"S"},{label:"Background",value:"B"},{label:"Assessment",value:"A"},{label:"Recommendation",value:"R"}];N(()=>{n.value=J(K).slice(0,P)});const A=M(()=>n.value);function O(g){var _;v.value=g;const e=A.value[a.value],c=e.correctCategory,r=e.explanation||"";m.value=v.value===c,m.value&&(i.value+=10),x.value=!0,y.value=!0,S.value=((_=I.find(E=>E.value===c))==null?void 0:_.label)||"",f.value=r}function w(){a.value++,a.value>=P?b.value=!0:(v.value="",x.value=!1,m.value=!1,y.value=!1,S.value="",f.value="")}async function V(g,e){try{await j(q(z,"choice_scores"),{name:g,score:e,timestamp:U()}),console.log("✅ 分數已儲存")}catch(c){console.error("❌ 錯誤:",c)}}const p=o(""),R=o(!1);async function D(){if(!p.value.trim()){alert("請輸入名稱以送出成績");return}await V(p.value.trim(),i.value),R.value=!0}return(g,e)=>{const c=H("RouterLink");return l(),s("div",W,[e[9]||(e[9]=t("div",{class:"header"},[t("div",{class:"icon"},"💡"),t("h2",null,"單選遊戲：選出正確的 ISBAR 欄位")],-1)),!b.value&&A.value[a.value]?(l(),s("div",Y,[e[3]||(e[3]=t("p",{class:"label"},"📄 題目：",-1)),t("div",Z,u(A.value[a.value].text),1),t("div",ee,[(l(),s(G,null,L(I,r=>t("button",{key:r.value,class:X(["choice-button",{selected:v.value===r.value}]),disabled:x.value,onClick:_=>O(r.value)},u(r.label),11,te)),64))]),x.value?(l(),s("div",oe,[m.value?(l(),s("p",ae,"✅ 正確")):(l(),s("p",ne,[e[1]||(e[1]=d(" ❌ 錯誤，正確答案為 ")),t("strong",null,u(S.value),1),e[2]||(e[2]=d("。 "))])),t("p",re,"解析："+u(f.value),1)])):C("",!0),t("div",se,[y.value?(l(),s("button",{key:0,class:"next-button",onClick:w},"👉 下一題")):C("",!0)])])):C("",!0),b.value?(l(),s("div",le,[e[8]||(e[8]=t("h3",null,"🎉 全部題目完成！",-1)),t("p",null,[e[4]||(e[4]=d("你本次得分為 ")),t("strong",null,u(i.value),1),e[5]||(e[5]=d(" / 100"))]),t("div",ce,[Q(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>p.value=r),placeholder:"請輸入你的名稱",class:"name-input"},null,512),[[T,p.value]]),t("button",{onClick:D,disabled:R.value,class:"submit-button"},u(R.value?"✅ 已送出":"📤 送出成績"),9,ie)]),k(c,{to:"/isbar-game/",class:"home-button"},{default:h(()=>e[6]||(e[6]=[d("🏠 回首頁")])),_:1,__:[6]}),k(c,{to:"/leaderboard",class:"leaderboard-button"},{default:h(()=>e[7]||(e[7]=[d("📊 查看排行榜")])),_:1,__:[7]})])):C("",!0)])}}}),xe=$(ue,[["__scopeId","data-v-cba5e70e"]]);export{xe as default};
