import{d as $,r,c as s,a as o,f as b,t as c,F as k,g as C,b as U,e as _,h as H,v as Z,w as q,u as O,R as w,i as J,j as K,k as W,s as X,o as l,n as E,_ as Y}from"./index-NGdrfuFg.js";const N=[{question:"請將下列交班內容項目，分類至適當的欄位",items:[{text:"交班時間與單位",category:"I",explanation:"基本交班資訊屬 I 分類"},{text:"異常檢驗值 / 檢查報告追蹤",category:"A",explanation:"檢查結果屬於評估，為 A（Assessment）"},{text:"感染與隔離",category:"S",explanation:"感染控制相關為 S（Situation）"},{text:"其他計畫 / 預排處置",category:"R",explanation:"未來處置為 R 類"},{text:"特殊裝置設定（如 ECMO, IABP）",category:"A",explanation:"特殊裝置屬於目前治療設定，分類為 A"},{text:"治療經過",category:"B",explanation:"治療過程為 Background"},{text:"現存管路",category:"A",explanation:"目前有哪些管路屬於 A 類評估"},{text:"入院診斷",category:"B",explanation:"診斷屬於病人背景資料"},{text:"今日狀況",category:"S",explanation:"今日的整體狀況歸為 S（Situation）"},{text:"呼吸器設定與警報值",category:"R",explanation:"設定建議為 Recommendation"},{text:"呼吸治療計畫 / 策略 / 目標值",category:"R",explanation:"屬於建議與治療方向"},{text:"呼吸治療評估",category:"A",explanation:"治療相關評估歸為 A（Assessment）"},{text:"病史",category:"B",explanation:"既往病史屬於 B（Background）"},{text:"意識狀況 / 生命徵象",category:"S",explanation:"生命徵象屬於當前病人情況，分類為 S"},{text:"病人基本資料（姓名 / 床號 / 性別 / 年齡）",category:"I",explanation:"交班開頭需介紹基本資料，屬於 I（Introduction）"},{text:"交班提醒事項",category:"R",explanation:"需注意的提醒事項屬於建議類別"},{text:"鎮靜 / 升壓藥物",category:"A",explanation:"藥物使用反映評估結果，為 A 類"},{text:"交班者與接班者身份",category:"I",explanation:"介紹彼此的角色為 I 類別"}].map(u=>{var i;return{...u,id:((i=crypto.randomUUID)==null?void 0:i.call(crypto))||Math.random().toString()}})},{question:"48 歲男性，插管 3 日，正在使用呼吸器協助換氣。請將以下交班資訊分類至 ISBAR 對應欄位：",items:[{text:"Vital signs stable, GCS E4VTM6, under sedation.",category:"S",explanation:"目前狀況描述屬 S 分類"},{text:"ARDS, intubated on 6/20.",category:"B",explanation:"病因與插管日為 Background"},{text:"FiO2 0.4, PEEP 8, VT 450, Rate 18, PS 12, RR 22",category:"A",explanation:"目前呼吸器設定為 Assessment"},{text:"Please monitor spontaneous breathing trial readiness tomorrow.",category:"R",explanation:"屬於治療建議及提醒"},{text:"交班人：RT 張三，接班人：RT 李四",category:"I",explanation:"身份介紹為 Introduction"}].map(u=>{var i;return{...u,id:((i=crypto.randomUUID)==null?void 0:i.call(crypto))||Math.random().toString()}})},{question:"72 歲女性，COPD 惡化住院第五天，使用面罩呼吸器。請協助分類交班內容：",items:[{text:"HR 98, BP 142/88, RR 25, SpO2 92% on BiPAP",category:"S",explanation:"目前生命徵象與使用模式為 S 類"},{text:"COPD, frequent exacerbation, chronic CO2 retention",category:"B",explanation:"為病史 Background"},{text:"BiPAP IPAP 14 / EPAP 6 / Rate 14",category:"A",explanation:"治療設定屬 Assessment"},{text:"建議依血氣調整 BiPAP 設定",category:"R",explanation:"建議與治療方向屬 Recommendation"},{text:"病人姓名：王小美，床號：301-2",category:"I",explanation:"基本身份資料為 Introduction"}].map(u=>{var i;return{...u,id:((i=crypto.randomUUID)==null?void 0:i.call(crypto))||Math.random().toString()}})},{question:"60 歲男性，感染性休克住加護病房。請分類以下交班資訊：",items:[{text:"MAP 68 mmHg, 正使用升壓劑與鎮靜藥物",category:"A",explanation:"藥物使用與循環狀況屬於 Assessment"},{text:"感染性休克 6/15 入院 ICU",category:"B",explanation:"診斷與入院時間為 Background"},{text:"FiO2 0.5, PEEP 10, PS 15, RR 24",category:"A",explanation:"呼吸設定為 Assessment"},{text:"感染控制：接觸傳染防護中",category:"S",explanation:"感染與隔離為 Situation"},{text:"建議每日呼吸器評估",category:"R",explanation:"屬於 Recommendation"}].map(u=>{var i;return{...u,id:((i=crypto.randomUUID)==null?void 0:i.call(crypto))||Math.random().toString()}})},{question:"88 歲女性，DNR，住院第十天，已由呼吸器轉為氧氣鼻管。請協助分類交班資訊：",items:[{text:"目前使用氧氣鼻管 2 L/min，SpO2 95%",category:"S",explanation:"目前呼吸狀態與生命徵象為 S"},{text:"DNR，轉安寧治療",category:"B",explanation:"病人治療計畫與背景為 Background"},{text:"病人由呼吸器成功拔管第三天",category:"A",explanation:"治療評估與歷程為 Assessment"},{text:"繼續觀察氧合狀況，如有變化聯絡醫師",category:"R",explanation:"後續計畫與提醒為 Recommendation"},{text:"姓名：陳老太太，床號：601-1",category:"I",explanation:"介紹基本資料為 Introduction"}].map(u=>{var i;return{...u,id:((i=crypto.randomUUID)==null?void 0:i.call(crypto))||Math.random().toString()}})}],tt={class:"game-container"},et={class:"title"},at={class:"selection-zone"},ot={class:"item-list"},nt=["onClick"],st={class:"drop-zones"},lt={class:"zone-label"},it={class:"drop-content"},rt=["onClick"],ut=["onClick"],ct={key:0,class:"button-group"},dt={key:1,class:"button-group next-only"},vt={key:2,class:"finish-message"},xt={class:"submit-score"},mt=["disabled"],pt={key:3,class:"result-box"},gt={key:0},yt={key:1},ft={key:4,class:"error-message"},bt=$({__name:"ClassifyGame",setup(u){const i=e=>["I","S","B","A","R"].includes(e),B=N[0],M=N.slice(1).filter(e=>e.question!==B.question).map(e=>({question:e.question,items:e.items.filter(t=>i(t.category)).map(t=>({...t,category:t.category}))})).sort(()=>Math.random()-.5).slice(0,4),d=r([B,...M]),v=r(0),y=r(d.value[v.value]),f=r([...y.value.items]),x=r(null),p=r({I:[],S:[],B:[],A:[],R:[]}),h=r([]),A=r(!1),S=r(!1),I=r(0),g=r("");function T(e){var t;x.value=((t=x.value)==null?void 0:t.id)===e.id?null:e,g.value=""}function V(e){if(!x.value){g.value="請先選擇一個項目再點擊分類加號！";return}p.value[e].push(x.value),f.value=f.value.filter(t=>{var a;return t.id!==((a=x.value)==null?void 0:a.id)}),x.value=null}function z(e,t){const a=p.value[e].findIndex(n=>n.id===t);if(a!==-1){const[n]=p.value[e].splice(a,1);f.value.push(n)}}function F(){if(f.value.length>0){g.value="請完成所有項目的分類後再送出答案！";return}g.value="",h.value=[];let e=!0;for(const[t,a]of Object.entries(p.value))for(const n of a){const m=n.category===t;h.value.push({item:n,correct:m,correctCategory:n.category,explanation:n.explanation}),m||(e=!1)}e&&(I.value+=20),v.value<d.value.length-1?A.value=!0:S.value=!0}function P(){h.value=[],A.value=!1,g.value="",x.value=null,y.value=d.value[v.value],f.value=[...y.value.items],Object.keys(p.value).forEach(e=>p.value[e]=[])}function Q(){v.value++,v.value<d.value.length?(y.value=d.value[v.value],P()):S.value=!0}function j(){const e=M.sort(()=>Math.random()-.5).slice(0,4);d.value=[B,...e],v.value=0,y.value=d.value[0],S.value=!1,I.value=0,P()}async function G(e,t){try{await J(K(W,"classify_scores"),{name:e,score:t,timestamp:X()}),console.log("✅ 分數已儲存")}catch(a){console.error("❌ 錯誤:",a)}}const R=r(""),D=r(!1);async function L(){if(!R.value.trim()){alert("請輸入名稱以送出成績");return}await G(R.value.trim(),I.value),D.value=!0}return(e,t)=>(l(),s("div",tt,[o("h2",et,c(y.value.question),1),o("div",at,[t[1]||(t[1]=o("h3",{class:"subtitle"},"點選交班項目後，在下方分類欄位中點選加入以進行分類，欲更改欄位，再點選一次該項目即可重新加入",-1)),o("div",ot,[(l(!0),s(k,null,C(f.value,(a,n)=>(l(),s("button",{key:a.id,class:"selectable-item",onClick:m=>T(a)},c(a.text),9,nt))),128))])]),o("div",st,[(l(!0),s(k,null,C(p.value,(a,n)=>(l(),s("div",{key:n,class:E(["drop-zone",{fullRow:n==="I"}])},[o("h4",lt,c(n),1),o("div",it,[(l(!0),s(k,null,C(a,(m,_t)=>(l(),s("div",{key:m.id,class:"drop-item",onClick:ht=>z(n,m.id)},c(m.text),9,rt))),128))]),x.value?(l(),s("button",{key:0,class:"add-button",onClick:m=>V(n)},"➕ 加入",8,ut)):b("",!0)],2))),128))]),!A.value&&!S.value?(l(),s("div",ct,[o("button",{onClick:F,class:"submit-button"},"送出答案"),o("button",{onClick:P,class:"reset-button"},"重試")])):b("",!0),A.value&&v.value<d.value.length-1?(l(),s("div",dt,[o("button",{onClick:Q,class:"submit-button"},"下一題")])):b("",!0),S.value?(l(),s("div",vt,[t[6]||(t[6]=o("p",null,"🎉 全部題目完成！",-1)),o("p",null,[t[2]||(t[2]=_("你本次得分為 ")),o("strong",null,c(I.value),1),t[3]||(t[3]=_(" / 100"))]),o("div",xt,[H(o("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>R.value=a),placeholder:"請輸入你的名稱",class:"name-input"},null,512),[[Z,R.value]]),o("button",{onClick:L,disabled:D.value,class:"submit-button"},c(D.value?"✅ 已送出":"📤 送出成績"),9,mt)]),U(O(w),{to:"/isbar-game/",class:"home-button"},{default:q(()=>t[4]||(t[4]=[_("🏠 回首頁")])),_:1,__:[4]}),U(O(w),{to:"/leaderboard",class:"leaderboard-button"},{default:q(()=>t[5]||(t[5]=[_("📊 查看排行榜")])),_:1,__:[5]}),o("button",{onClick:j,class:"reset-button"},"重新開始")])):b("",!0),h.value.length?(l(),s("div",pt,[t[8]||(t[8]=o("h3",null,"結果：",-1)),o("ul",null,[(l(!0),s(k,null,C(h.value,(a,n)=>(l(),s("li",{key:n,class:E({correct:a.correct,incorrect:!a.correct})},[o("strong",null,c(a.item.text),1),a.correct?(l(),s("span",gt,"✅ 正確")):(l(),s("span",yt,[t[7]||(t[7]=_(" ❌ 錯誤，正確為 ")),o("strong",null,c(a.correctCategory),1),_("："+c(a.explanation),1)]))],2))),128))])])):b("",!0),g.value?(l(),s("div",ft,c(g.value),1)):b("",!0)]))}}),At=Y(bt,[["__scopeId","data-v-7b196aca"]]);export{At as default};
