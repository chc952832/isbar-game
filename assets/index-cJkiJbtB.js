const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-CWELR1xC.js","assets/Home-DAOaZfm0.css","assets/ClassifyGame-BmRZQjnD.js","assets/ClassifyGame-DMESWnpl.css","assets/ChoiceGame-DinKYG4x.js","assets/ChoiceGame-6tz3EaCO.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Va(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const St={},cr=[],Ue=()=>{},nm=()=>!1,Li=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Da=e=>e.startsWith("onUpdate:"),oe=Object.assign,xa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},rm=Object.prototype.hasOwnProperty,At=(e,t)=>rm.call(e,t),ot=Array.isArray,ur=e=>Fi(e)==="[object Map]",wh=e=>Fi(e)==="[object Set]",ct=e=>typeof e=="function",Bt=e=>typeof e=="string",xn=e=>typeof e=="symbol",Dt=e=>e!==null&&typeof e=="object",Ah=e=>(Dt(e)||ct(e))&&ct(e.then)&&ct(e.catch),Rh=Object.prototype.toString,Fi=e=>Rh.call(e),sm=e=>Fi(e).slice(8,-1),bh=e=>Fi(e)==="[object Object]",Na=e=>Bt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Yr=Va(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},im=/-(\w)/g,Se=Bi(e=>e.replace(im,(t,n)=>n?n.toUpperCase():"")),om=/\B([A-Z])/g,Kn=Bi(e=>e.replace(om,"-$1").toLowerCase()),Ui=Bi(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ro=Bi(e=>e?`on${Ui(e)}`:""),En=(e,t)=>!Object.is(e,t),oi=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Go=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Wo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Tc;const ji=()=>Tc||(Tc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Oa(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Bt(r)?um(r):Oa(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Bt(e)||Dt(e))return e}const am=/;(?![^(]*\))/g,lm=/:([^]+)/,cm=/\/\*[^]*?\*\//g;function um(e){const t={};return e.replace(cm,"").split(am).forEach(n=>{if(n){const r=n.split(lm);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ma(e){let t="";if(Bt(e))t=e;else if(ot(e))for(let n=0;n<e.length;n++){const r=Ma(e[n]);r&&(t+=r+" ")}else if(Dt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const hm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fm=Va(hm);function Sh(e){return!!e||e===""}const Ph=e=>!!(e&&e.__v_isRef===!0),dm=e=>Bt(e)?e:e==null?"":ot(e)||Dt(e)&&(e.toString===Rh||!ct(e.toString))?Ph(e)?dm(e.value):JSON.stringify(e,Ch,2):String(e),Ch=(e,t)=>Ph(t)?Ch(e,t.value):ur(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[bo(r,i)+" =>"]=s,n),{})}:wh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>bo(n))}:xn(t)?bo(t):Dt(t)&&!ot(t)&&!bh(t)?String(t):t,bo=(e,t="")=>{var n;return xn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fe;class Vh{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fe,!t&&fe&&(this.index=(fe.scopes||(fe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=fe;try{return fe=this,t()}finally{fe=n}}}on(){++this._on===1&&(this.prevScope=fe,fe=this)}off(){this._on>0&&--this._on===0&&(fe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function pm(e){return new Vh(e)}function mm(){return fe}let Pt;const So=new WeakSet;class Dh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fe&&fe.active&&fe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,So.has(this)&&(So.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Nh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ic(this),Oh(this);const t=Pt,n=xe;Pt=this,xe=!0;try{return this.fn()}finally{Mh(this),Pt=t,xe=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Fa(t);this.deps=this.depsTail=void 0,Ic(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?So.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Qo(this)&&this.run()}get dirty(){return Qo(this)}}let xh=0,Jr,Zr;function Nh(e,t=!1){if(e.flags|=8,t){e.next=Zr,Zr=e;return}e.next=Jr,Jr=e}function ka(){xh++}function La(){if(--xh>0)return;if(Zr){let t=Zr;for(Zr=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Jr;){let t=Jr;for(Jr=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Oh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Mh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Fa(r),gm(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function Qo(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(kh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function kh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===us)||(e.globalVersion=us,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Qo(e))))return;e.flags|=2;const t=e.dep,n=Pt,r=xe;Pt=e,xe=!0;try{Oh(e);const s=e.fn(e._value);(t.version===0||En(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Pt=n,xe=r,Mh(e),e.flags&=-3}}function Fa(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Fa(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function gm(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let xe=!0;const Lh=[];function nn(){Lh.push(xe),xe=!1}function rn(){const e=Lh.pop();xe=e===void 0?!0:e}function Ic(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Pt;Pt=void 0;try{t()}finally{Pt=n}}}let us=0;class _m{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ba{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Pt||!xe||Pt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Pt)n=this.activeLink=new _m(Pt,this),Pt.deps?(n.prevDep=Pt.depsTail,Pt.depsTail.nextDep=n,Pt.depsTail=n):Pt.deps=Pt.depsTail=n,Fh(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Pt.depsTail,n.nextDep=void 0,Pt.depsTail.nextDep=n,Pt.depsTail=n,Pt.deps===n&&(Pt.deps=r)}return n}trigger(t){this.version++,us++,this.notify(t)}notify(t){ka();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{La()}}}function Fh(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Fh(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Xo=new WeakMap,$n=Symbol(""),Yo=Symbol(""),hs=Symbol("");function ne(e,t,n){if(xe&&Pt){let r=Xo.get(e);r||Xo.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Ba),s.map=r,s.key=n),s.track()}}function Je(e,t,n,r,s,i){const a=Xo.get(e);if(!a){us++;return}const l=c=>{c&&c.trigger()};if(ka(),t==="clear")a.forEach(l);else{const c=ot(e),h=c&&Na(n);if(c&&n==="length"){const d=Number(r);a.forEach((p,g)=>{(g==="length"||g===hs||!xn(g)&&g>=d)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),h&&l(a.get(hs)),t){case"add":c?h&&l(a.get("length")):(l(a.get($n)),ur(e)&&l(a.get(Yo)));break;case"delete":c||(l(a.get($n)),ur(e)&&l(a.get(Yo)));break;case"set":ur(e)&&l(a.get($n));break}}La()}function er(e){const t=wt(e);return t===e?t:(ne(t,"iterate",hs),be(e)?t:t.map(Qt))}function $i(e){return ne(e=wt(e),"iterate",hs),e}const ym={__proto__:null,[Symbol.iterator](){return Po(this,Symbol.iterator,Qt)},concat(...e){return er(this).concat(...e.map(t=>ot(t)?er(t):t))},entries(){return Po(this,"entries",e=>(e[1]=Qt(e[1]),e))},every(e,t){return We(this,"every",e,t,void 0,arguments)},filter(e,t){return We(this,"filter",e,t,n=>n.map(Qt),arguments)},find(e,t){return We(this,"find",e,t,Qt,arguments)},findIndex(e,t){return We(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return We(this,"findLast",e,t,Qt,arguments)},findLastIndex(e,t){return We(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return We(this,"forEach",e,t,void 0,arguments)},includes(...e){return Co(this,"includes",e)},indexOf(...e){return Co(this,"indexOf",e)},join(e){return er(this).join(e)},lastIndexOf(...e){return Co(this,"lastIndexOf",e)},map(e,t){return We(this,"map",e,t,void 0,arguments)},pop(){return zr(this,"pop")},push(...e){return zr(this,"push",e)},reduce(e,...t){return wc(this,"reduce",e,t)},reduceRight(e,...t){return wc(this,"reduceRight",e,t)},shift(){return zr(this,"shift")},some(e,t){return We(this,"some",e,t,void 0,arguments)},splice(...e){return zr(this,"splice",e)},toReversed(){return er(this).toReversed()},toSorted(e){return er(this).toSorted(e)},toSpliced(...e){return er(this).toSpliced(...e)},unshift(...e){return zr(this,"unshift",e)},values(){return Po(this,"values",Qt)}};function Po(e,t,n){const r=$i(e),s=r[t]();return r!==e&&!be(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const Em=Array.prototype;function We(e,t,n,r,s,i){const a=$i(e),l=a!==e&&!be(e),c=a[t];if(c!==Em[t]){const p=c.apply(e,i);return l?Qt(p):p}let h=n;a!==e&&(l?h=function(p,g){return n.call(this,Qt(p),g,e)}:n.length>2&&(h=function(p,g){return n.call(this,p,g,e)}));const d=c.call(a,h,r);return l&&s?s(d):d}function wc(e,t,n,r){const s=$i(e);let i=n;return s!==e&&(be(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,Qt(l),c,e)}),s[t](i,...r)}function Co(e,t,n){const r=wt(e);ne(r,"iterate",hs);const s=r[t](...n);return(s===-1||s===!1)&&$a(n[0])?(n[0]=wt(n[0]),r[t](...n)):s}function zr(e,t,n=[]){nn(),ka();const r=wt(e)[t].apply(e,n);return La(),rn(),r}const vm=Va("__proto__,__v_isRef,__isVue"),Bh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(xn));function Tm(e){xn(e)||(e=String(e));const t=wt(this);return ne(t,"has",e),t.hasOwnProperty(e)}class Uh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Dm:zh:i?qh:$h).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=ot(t);if(!s){let c;if(a&&(c=ym[n]))return c;if(n==="hasOwnProperty")return Tm}const l=Reflect.get(t,n,ie(t)?t:r);return(xn(n)?Bh.has(n):vm(n))||(s||ne(t,"get",n),i)?l:ie(l)?a&&Na(n)?l:l.value:Dt(l)?s?Kh(l):qi(l):l}}class jh extends Uh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=An(i);if(!be(r)&&!An(r)&&(i=wt(i),r=wt(r)),!ot(t)&&ie(i)&&!ie(r))return c?!1:(i.value=r,!0)}const a=ot(t)&&Na(n)?Number(n)<t.length:At(t,n),l=Reflect.set(t,n,r,ie(t)?t:s);return t===wt(s)&&(a?En(r,i)&&Je(t,"set",n,r):Je(t,"add",n,r)),l}deleteProperty(t,n){const r=At(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Je(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!xn(n)||!Bh.has(n))&&ne(t,"has",n),r}ownKeys(t){return ne(t,"iterate",ot(t)?"length":$n),Reflect.ownKeys(t)}}class Im extends Uh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const wm=new jh,Am=new Im,Rm=new jh(!0);const Jo=e=>e,Xs=e=>Reflect.getPrototypeOf(e);function bm(e,t,n){return function(...r){const s=this.__v_raw,i=wt(s),a=ur(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,h=s[e](...r),d=n?Jo:t?_i:Qt;return!t&&ne(i,"iterate",c?Yo:$n),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:l?[d(p[0]),d(p[1])]:d(p),done:g}},[Symbol.iterator](){return this}}}}function Ys(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Sm(e,t){const n={get(s){const i=this.__v_raw,a=wt(i),l=wt(s);e||(En(s,l)&&ne(a,"get",s),ne(a,"get",l));const{has:c}=Xs(a),h=t?Jo:e?_i:Qt;if(c.call(a,s))return h(i.get(s));if(c.call(a,l))return h(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&ne(wt(s),"iterate",$n),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=wt(i),l=wt(s);return e||(En(s,l)&&ne(a,"has",s),ne(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=wt(l),h=t?Jo:e?_i:Qt;return!e&&ne(c,"iterate",$n),l.forEach((d,p)=>s.call(i,h(d),h(p),a))}};return oe(n,e?{add:Ys("add"),set:Ys("set"),delete:Ys("delete"),clear:Ys("clear")}:{add(s){!t&&!be(s)&&!An(s)&&(s=wt(s));const i=wt(this);return Xs(i).has.call(i,s)||(i.add(s),Je(i,"add",s,s)),this},set(s,i){!t&&!be(i)&&!An(i)&&(i=wt(i));const a=wt(this),{has:l,get:c}=Xs(a);let h=l.call(a,s);h||(s=wt(s),h=l.call(a,s));const d=c.call(a,s);return a.set(s,i),h?En(i,d)&&Je(a,"set",s,i):Je(a,"add",s,i),this},delete(s){const i=wt(this),{has:a,get:l}=Xs(i);let c=a.call(i,s);c||(s=wt(s),c=a.call(i,s)),l&&l.call(i,s);const h=i.delete(s);return c&&Je(i,"delete",s,void 0),h},clear(){const s=wt(this),i=s.size!==0,a=s.clear();return i&&Je(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=bm(s,e,t)}),n}function Ua(e,t){const n=Sm(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(At(n,s)&&s in r?n:r,s,i)}const Pm={get:Ua(!1,!1)},Cm={get:Ua(!1,!0)},Vm={get:Ua(!0,!1)};const $h=new WeakMap,qh=new WeakMap,zh=new WeakMap,Dm=new WeakMap;function xm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nm(e){return e.__v_skip||!Object.isExtensible(e)?0:xm(sm(e))}function qi(e){return An(e)?e:ja(e,!1,wm,Pm,$h)}function Hh(e){return ja(e,!1,Rm,Cm,qh)}function Kh(e){return ja(e,!0,Am,Vm,zh)}function ja(e,t,n,r,s){if(!Dt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Nm(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function hr(e){return An(e)?hr(e.__v_raw):!!(e&&e.__v_isReactive)}function An(e){return!!(e&&e.__v_isReadonly)}function be(e){return!!(e&&e.__v_isShallow)}function $a(e){return e?!!e.__v_raw:!1}function wt(e){const t=e&&e.__v_raw;return t?wt(t):e}function Gh(e){return!At(e,"__v_skip")&&Object.isExtensible(e)&&Go(e,"__v_skip",!0),e}const Qt=e=>Dt(e)?qi(e):e,_i=e=>Dt(e)?Kh(e):e;function ie(e){return e?e.__v_isRef===!0:!1}function Wh(e){return Qh(e,!1)}function Om(e){return Qh(e,!0)}function Qh(e,t){return ie(e)?e:new Mm(e,t)}class Mm{constructor(t,n){this.dep=new Ba,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:wt(t),this._value=n?t:Qt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||be(t)||An(t);t=r?t:wt(t),En(t,n)&&(this._rawValue=t,this._value=r?t:Qt(t),this.dep.trigger())}}function fr(e){return ie(e)?e.value:e}const km={get:(e,t,n)=>t==="__v_raw"?e:fr(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return ie(s)&&!ie(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Xh(e){return hr(e)?e:new Proxy(e,km)}class Lm{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ba(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=us-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Pt!==this)return Nh(this,!0),!0}get value(){const t=this.dep.track();return kh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Fm(e,t,n=!1){let r,s;return ct(e)?r=e:(r=e.get,s=e.set),new Lm(r,s,n)}const Js={},yi=new WeakMap;let Bn;function Bm(e,t=!1,n=Bn){if(n){let r=yi.get(n);r||yi.set(n,r=[]),r.push(e)}}function Um(e,t,n=St){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,h=K=>s?K:be(K)||s===!1||s===0?Ze(K,1):Ze(K);let d,p,g,E,V=!1,D=!1;if(ie(e)?(p=()=>e.value,V=be(e)):hr(e)?(p=()=>h(e),V=!0):ot(e)?(D=!0,V=e.some(K=>hr(K)||be(K)),p=()=>e.map(K=>{if(ie(K))return K.value;if(hr(K))return h(K);if(ct(K))return c?c(K,2):K()})):ct(e)?t?p=c?()=>c(e,2):e:p=()=>{if(g){nn();try{g()}finally{rn()}}const K=Bn;Bn=d;try{return c?c(e,3,[E]):e(E)}finally{Bn=K}}:p=Ue,t&&s){const K=p,ft=s===!0?1/0:s;p=()=>Ze(K(),ft)}const k=mm(),H=()=>{d.stop(),k&&k.active&&xa(k.effects,d)};if(i&&t){const K=t;t=(...ft)=>{K(...ft),H()}}let U=D?new Array(e.length).fill(Js):Js;const z=K=>{if(!(!(d.flags&1)||!d.dirty&&!K))if(t){const ft=d.run();if(s||V||(D?ft.some((mt,w)=>En(mt,U[w])):En(ft,U))){g&&g();const mt=Bn;Bn=d;try{const w=[ft,U===Js?void 0:D&&U[0]===Js?[]:U,E];U=ft,c?c(t,3,w):t(...w)}finally{Bn=mt}}}else d.run()};return l&&l(z),d=new Dh(p),d.scheduler=a?()=>a(z,!1):z,E=K=>Bm(K,!1,d),g=d.onStop=()=>{const K=yi.get(d);if(K){if(c)c(K,4);else for(const ft of K)ft();yi.delete(d)}},t?r?z(!0):U=d.run():a?a(z.bind(null,!0),!0):d.run(),H.pause=d.pause.bind(d),H.resume=d.resume.bind(d),H.stop=H,H}function Ze(e,t=1/0,n){if(t<=0||!Dt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,ie(e))Ze(e.value,t,n);else if(ot(e))for(let r=0;r<e.length;r++)Ze(e[r],t,n);else if(wh(e)||ur(e))e.forEach(r=>{Ze(r,t,n)});else if(bh(e)){for(const r in e)Ze(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Ze(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ps(e,t,n,r){try{return r?e(...r):e()}catch(s){zi(s,t,n)}}function qe(e,t,n,r){if(ct(e)){const s=Ps(e,t,n,r);return s&&Ah(s)&&s.catch(i=>{zi(i,t,n)}),s}if(ot(e)){const s=[];for(let i=0;i<e.length;i++)s.push(qe(e[i],t,n,r));return s}}function zi(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||St;if(t){let l=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,c,h)===!1)return}l=l.parent}if(i){nn(),Ps(i,null,10,[e,c,h]),rn();return}}jm(e,n,s,r,a)}function jm(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const ue=[];let Le=-1;const dr=[];let mn=null,nr=0;const Yh=Promise.resolve();let Ei=null;function Jh(e){const t=Ei||Yh;return e?t.then(this?e.bind(this):e):t}function $m(e){let t=Le+1,n=ue.length;for(;t<n;){const r=t+n>>>1,s=ue[r],i=fs(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function qa(e){if(!(e.flags&1)){const t=fs(e),n=ue[ue.length-1];!n||!(e.flags&2)&&t>=fs(n)?ue.push(e):ue.splice($m(t),0,e),e.flags|=1,Zh()}}function Zh(){Ei||(Ei=Yh.then(ef))}function qm(e){ot(e)?dr.push(...e):mn&&e.id===-1?mn.splice(nr+1,0,e):e.flags&1||(dr.push(e),e.flags|=1),Zh()}function Ac(e,t,n=Le+1){for(;n<ue.length;n++){const r=ue[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ue.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function tf(e){if(dr.length){const t=[...new Set(dr)].sort((n,r)=>fs(n)-fs(r));if(dr.length=0,mn){mn.push(...t);return}for(mn=t,nr=0;nr<mn.length;nr++){const n=mn[nr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}mn=null,nr=0}}const fs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ef(e){try{for(Le=0;Le<ue.length;Le++){const t=ue[Le];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ps(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Le<ue.length;Le++){const t=ue[Le];t&&(t.flags&=-2)}Le=-1,ue.length=0,tf(),Ei=null,(ue.length||dr.length)&&ef()}}let ye=null,nf=null;function vi(e){const t=ye;return ye=e,nf=e&&e.type.__scopeId||null,t}function zm(e,t=ye,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Oc(-1);const i=vi(t);let a;try{a=e(...s)}finally{vi(i),r._d&&Oc(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Bw(e,t){if(ye===null)return e;const n=Wi(ye),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,c=St]=t[s];i&&(ct(i)&&(i={mounted:i,updated:i}),i.deep&&Ze(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Ln(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(nn(),qe(c,n,8,[e.el,l,e,t]),rn())}}const Hm=Symbol("_vte"),Km=e=>e.__isTeleport;function za(e,t){e.shapeFlag&6&&e.component?(e.transition=t,za(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function rf(e,t){return ct(e)?oe({name:e.name},t,{setup:e}):e}function sf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ts(e,t,n,r,s=!1){if(ot(e)){e.forEach((V,D)=>ts(V,t&&(ot(t)?t[D]:t),n,r,s));return}if(es(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ts(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?Wi(r.component):r.el,a=s?null:i,{i:l,r:c}=e,h=t&&t.r,d=l.refs===St?l.refs={}:l.refs,p=l.setupState,g=wt(p),E=p===St?()=>!1:V=>At(g,V);if(h!=null&&h!==c&&(Bt(h)?(d[h]=null,E(h)&&(p[h]=null)):ie(h)&&(h.value=null)),ct(c))Ps(c,l,12,[a,d]);else{const V=Bt(c),D=ie(c);if(V||D){const k=()=>{if(e.f){const H=V?E(c)?p[c]:d[c]:c.value;s?ot(H)&&xa(H,i):ot(H)?H.includes(i)||H.push(i):V?(d[c]=[i],E(c)&&(p[c]=d[c])):(c.value=[i],e.k&&(d[e.k]=c.value))}else V?(d[c]=a,E(c)&&(p[c]=a)):D&&(c.value=a,e.k&&(d[e.k]=a))};a?(k.id=-1,_e(k,n)):k()}}}ji().requestIdleCallback;ji().cancelIdleCallback;const es=e=>!!e.type.__asyncLoader,of=e=>e.type.__isKeepAlive;function Gm(e,t){af(e,"a",t)}function Wm(e,t){af(e,"da",t)}function af(e,t,n=se){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Hi(t,r,n),n){let s=n.parent;for(;s&&s.parent;)of(s.parent.vnode)&&Qm(r,t,n,s),s=s.parent}}function Qm(e,t,n,r){const s=Hi(t,e,r,!0);lf(()=>{xa(r[t],s)},n)}function Hi(e,t,n=se,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{nn();const l=Cs(n),c=qe(t,n,e,a);return l(),rn(),c});return r?s.unshift(i):s.push(i),i}}const ln=e=>(t,n=se)=>{(!ps||e==="sp")&&Hi(e,(...r)=>t(...r),n)},Xm=ln("bm"),Ym=ln("m"),Jm=ln("bu"),Zm=ln("u"),tg=ln("bum"),lf=ln("um"),eg=ln("sp"),ng=ln("rtg"),rg=ln("rtc");function sg(e,t=se){Hi("ec",e,t)}const ig="components";function og(e,t){return lg(ig,e,!0,t)||e}const ag=Symbol.for("v-ndc");function lg(e,t,n=!0,r=!1){const s=ye||se;if(s){const i=s.type;{const l=Qg(i,!1);if(l&&(l===t||l===Se(t)||l===Ui(Se(t))))return i}const a=Rc(s[e]||i[e],t)||Rc(s.appContext[e],t);return!a&&r?i:a}}function Rc(e,t){return e&&(e[t]||e[Se(t)]||e[Ui(Se(t))])}function Uw(e,t,n,r){let s;const i=n,a=ot(e);if(a||Bt(e)){const l=a&&hr(e);let c=!1,h=!1;l&&(c=!be(e),h=An(e),e=$i(e)),s=new Array(e.length);for(let d=0,p=e.length;d<p;d++)s[d]=t(c?h?_i(Qt(e[d])):Qt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(Dt(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}const Zo=e=>e?Df(e)?Wi(e):Zo(e.parent):null,ns=oe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Zo(e.parent),$root:e=>Zo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>uf(e),$forceUpdate:e=>e.f||(e.f=()=>{qa(e.update)}),$nextTick:e=>e.n||(e.n=Jh.bind(e.proxy)),$watch:e=>Cg.bind(e)}),Vo=(e,t)=>e!==St&&!e.__isScriptSetup&&At(e,t),cg={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;let h;if(t[0]!=="$"){const E=a[t];if(E!==void 0)switch(E){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Vo(r,t))return a[t]=1,r[t];if(s!==St&&At(s,t))return a[t]=2,s[t];if((h=e.propsOptions[0])&&At(h,t))return a[t]=3,i[t];if(n!==St&&At(n,t))return a[t]=4,n[t];ta&&(a[t]=0)}}const d=ns[t];let p,g;if(d)return t==="$attrs"&&ne(e.attrs,"get",""),d(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(n!==St&&At(n,t))return a[t]=4,n[t];if(g=c.config.globalProperties,At(g,t))return g[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Vo(s,t)?(s[t]=n,!0):r!==St&&At(r,t)?(r[t]=n,!0):At(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let l;return!!n[a]||e!==St&&At(e,a)||Vo(t,a)||(l=i[0])&&At(l,a)||At(r,a)||At(ns,a)||At(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:At(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function bc(e){return ot(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ta=!0;function ug(e){const t=uf(e),n=e.proxy,r=e.ctx;ta=!1,t.beforeCreate&&Sc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:h,created:d,beforeMount:p,mounted:g,beforeUpdate:E,updated:V,activated:D,deactivated:k,beforeDestroy:H,beforeUnmount:U,destroyed:z,unmounted:K,render:ft,renderTracked:mt,renderTriggered:w,errorCaptured:y,serverPrefetch:I,expose:A,inheritAttrs:R,components:S,directives:T,filters:ae}=t;if(h&&hg(h,r,null),a)for(const gt in a){const dt=a[gt];ct(dt)&&(r[gt]=dt.bind(n))}if(s){const gt=s.call(n,n);Dt(gt)&&(e.data=qi(gt))}if(ta=!0,i)for(const gt in i){const dt=i[gt],me=ct(dt)?dt.bind(n,n):ct(dt.get)?dt.get.bind(n,n):Ue,Pe=!ct(dt)&&ct(dt.set)?dt.set.bind(n):Ue,Ie=Ve({get:me,set:Pe});Object.defineProperty(r,gt,{enumerable:!0,configurable:!0,get:()=>Ie.value,set:xt=>Ie.value=xt})}if(l)for(const gt in l)cf(l[gt],r,n,gt);if(c){const gt=ct(c)?c.call(n):c;Reflect.ownKeys(gt).forEach(dt=>{ai(dt,gt[dt])})}d&&Sc(d,e,"c");function Lt(gt,dt){ot(dt)?dt.forEach(me=>gt(me.bind(n))):dt&&gt(dt.bind(n))}if(Lt(Xm,p),Lt(Ym,g),Lt(Jm,E),Lt(Zm,V),Lt(Gm,D),Lt(Wm,k),Lt(sg,y),Lt(rg,mt),Lt(ng,w),Lt(tg,U),Lt(lf,K),Lt(eg,I),ot(A))if(A.length){const gt=e.exposed||(e.exposed={});A.forEach(dt=>{Object.defineProperty(gt,dt,{get:()=>n[dt],set:me=>n[dt]=me})})}else e.exposed||(e.exposed={});ft&&e.render===Ue&&(e.render=ft),R!=null&&(e.inheritAttrs=R),S&&(e.components=S),T&&(e.directives=T),I&&sf(e)}function hg(e,t,n=Ue){ot(e)&&(e=ea(e));for(const r in e){const s=e[r];let i;Dt(s)?"default"in s?i=tn(s.from||r,s.default,!0):i=tn(s.from||r):i=tn(s),ie(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Sc(e,t,n){qe(ot(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function cf(e,t,n,r){let s=r.includes(".")?wf(n,r):()=>n[r];if(Bt(e)){const i=t[e];ct(i)&&li(s,i)}else if(ct(e))li(s,e.bind(n));else if(Dt(e))if(ot(e))e.forEach(i=>cf(i,t,n,r));else{const i=ct(e.handler)?e.handler.bind(n):t[e.handler];ct(i)&&li(s,i,e)}}function uf(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(h=>Ti(c,h,a,!0)),Ti(c,t,a)),Dt(t)&&i.set(t,c),c}function Ti(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Ti(e,i,n,!0),s&&s.forEach(a=>Ti(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=fg[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const fg={data:Pc,props:Cc,emits:Cc,methods:Gr,computed:Gr,beforeCreate:ce,created:ce,beforeMount:ce,mounted:ce,beforeUpdate:ce,updated:ce,beforeDestroy:ce,beforeUnmount:ce,destroyed:ce,unmounted:ce,activated:ce,deactivated:ce,errorCaptured:ce,serverPrefetch:ce,components:Gr,directives:Gr,watch:pg,provide:Pc,inject:dg};function Pc(e,t){return t?e?function(){return oe(ct(e)?e.call(this,this):e,ct(t)?t.call(this,this):t)}:t:e}function dg(e,t){return Gr(ea(e),ea(t))}function ea(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ce(e,t){return e?[...new Set([].concat(e,t))]:t}function Gr(e,t){return e?oe(Object.create(null),e,t):t}function Cc(e,t){return e?ot(e)&&ot(t)?[...new Set([...e,...t])]:oe(Object.create(null),bc(e),bc(t??{})):t}function pg(e,t){if(!e)return t;if(!t)return e;const n=oe(Object.create(null),e);for(const r in t)n[r]=ce(e[r],t[r]);return n}function hf(){return{app:null,config:{isNativeTag:nm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mg=0;function gg(e,t){return function(r,s=null){ct(r)||(r=oe({},r)),s!=null&&!Dt(s)&&(s=null);const i=hf(),a=new WeakSet,l=[];let c=!1;const h=i.app={_uid:mg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Yg,get config(){return i.config},set config(d){},use(d,...p){return a.has(d)||(d&&ct(d.install)?(a.add(d),d.install(h,...p)):ct(d)&&(a.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,g){if(!c){const E=h._ceVNode||ve(r,s);return E.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),e(E,d,g),c=!0,h._container=d,d.__vue_app__=h,Wi(E.component)}},onUnmount(d){l.push(d)},unmount(){c&&(qe(l,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=pr;pr=h;try{return d()}finally{pr=p}}};return h}}let pr=null;function ai(e,t){if(se){let n=se.provides;const r=se.parent&&se.parent.provides;r===n&&(n=se.provides=Object.create(r)),n[e]=t}}function tn(e,t,n=!1){const r=se||ye;if(r||pr){let s=pr?pr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ct(t)?t.call(r&&r.proxy):t}}const ff={},df=()=>Object.create(ff),pf=e=>Object.getPrototypeOf(e)===ff;function _g(e,t,n,r=!1){const s={},i=df();e.propsDefaults=Object.create(null),mf(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Hh(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function yg(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=wt(s),[c]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(Ki(e.emitsOptions,g))continue;const E=t[g];if(c)if(At(i,g))E!==i[g]&&(i[g]=E,h=!0);else{const V=Se(g);s[V]=na(c,l,V,E,e,!1)}else E!==i[g]&&(i[g]=E,h=!0)}}}else{mf(e,t,s,i)&&(h=!0);let d;for(const p in l)(!t||!At(t,p)&&((d=Kn(p))===p||!At(t,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=na(c,l,p,void 0,e,!0)):delete s[p]);if(i!==l)for(const p in i)(!t||!At(t,p))&&(delete i[p],h=!0)}h&&Je(e.attrs,"set","")}function mf(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(Yr(c))continue;const h=t[c];let d;s&&At(s,d=Se(c))?!i||!i.includes(d)?n[d]=h:(l||(l={}))[d]=h:Ki(e.emitsOptions,c)||(!(c in r)||h!==r[c])&&(r[c]=h,a=!0)}if(i){const c=wt(n),h=l||St;for(let d=0;d<i.length;d++){const p=i[d];n[p]=na(s,c,p,h[p],e,!At(h,p))}}return a}function na(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=At(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ct(c)){const{propsDefaults:h}=s;if(n in h)r=h[n];else{const d=Cs(s);r=h[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Kn(n))&&(r=!0))}return r}const Eg=new WeakMap;function gf(e,t,n=!1){const r=n?Eg:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!ct(e)){const d=p=>{c=!0;const[g,E]=gf(p,t,!0);oe(a,g),E&&l.push(...E)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return Dt(e)&&r.set(e,cr),cr;if(ot(i))for(let d=0;d<i.length;d++){const p=Se(i[d]);Vc(p)&&(a[p]=St)}else if(i)for(const d in i){const p=Se(d);if(Vc(p)){const g=i[d],E=a[p]=ot(g)||ct(g)?{type:g}:oe({},g),V=E.type;let D=!1,k=!0;if(ot(V))for(let H=0;H<V.length;++H){const U=V[H],z=ct(U)&&U.name;if(z==="Boolean"){D=!0;break}else z==="String"&&(k=!1)}else D=ct(V)&&V.name==="Boolean";E[0]=D,E[1]=k,(D||At(E,"default"))&&l.push(p)}}const h=[a,l];return Dt(e)&&r.set(e,h),h}function Vc(e){return e[0]!=="$"&&!Yr(e)}const Ha=e=>e[0]==="_"||e==="$stable",Ka=e=>ot(e)?e.map(Be):[Be(e)],vg=(e,t,n)=>{if(t._n)return t;const r=zm((...s)=>Ka(t(...s)),n);return r._c=!1,r},_f=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Ha(s))continue;const i=e[s];if(ct(i))t[s]=vg(s,i,r);else if(i!=null){const a=Ka(i);t[s]=()=>a}}},yf=(e,t)=>{const n=Ka(t);e.slots.default=()=>n},Ef=(e,t,n)=>{for(const r in t)(n||!Ha(r))&&(e[r]=t[r])},Tg=(e,t,n)=>{const r=e.slots=df();if(e.vnode.shapeFlag&32){const s=t.__;s&&Go(r,"__",s,!0);const i=t._;i?(Ef(r,t,n),n&&Go(r,"_",i,!0)):_f(t,r)}else t&&yf(e,t)},Ig=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=St;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Ef(s,t,n):(i=!t.$stable,_f(t,s)),a=t}else t&&(yf(e,t),a={default:1});if(i)for(const l in s)!Ha(l)&&a[l]==null&&delete s[l]},_e=kg;function wg(e){return Ag(e)}function Ag(e,t){const n=ji();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:h,setElementText:d,parentNode:p,nextSibling:g,setScopeId:E=Ue,insertStaticContent:V}=e,D=(_,v,b,N=null,L=null,O=null,W=void 0,$=null,j=!!v.dynamicChildren)=>{if(_===v)return;_&&!Hr(_,v)&&(N=x(_),xt(_,L,O,!0),_=null),v.patchFlag===-2&&(j=!1,v.dynamicChildren=null);const{type:B,ref:et,shapeFlag:G}=v;switch(B){case Gi:k(_,v,b,N);break;case Rn:H(_,v,b,N);break;case xo:_==null&&U(v,b,N,W);break;case Ye:S(_,v,b,N,L,O,W,$,j);break;default:G&1?ft(_,v,b,N,L,O,W,$,j):G&6?T(_,v,b,N,L,O,W,$,j):(G&64||G&128)&&B.process(_,v,b,N,L,O,W,$,j,J)}et!=null&&L?ts(et,_&&_.ref,O,v||_,!v):et==null&&_&&_.ref!=null&&ts(_.ref,null,O,_,!0)},k=(_,v,b,N)=>{if(_==null)r(v.el=l(v.children),b,N);else{const L=v.el=_.el;v.children!==_.children&&h(L,v.children)}},H=(_,v,b,N)=>{_==null?r(v.el=c(v.children||""),b,N):v.el=_.el},U=(_,v,b,N)=>{[_.el,_.anchor]=V(_.children,v,b,N,_.el,_.anchor)},z=({el:_,anchor:v},b,N)=>{let L;for(;_&&_!==v;)L=g(_),r(_,b,N),_=L;r(v,b,N)},K=({el:_,anchor:v})=>{let b;for(;_&&_!==v;)b=g(_),s(_),_=b;s(v)},ft=(_,v,b,N,L,O,W,$,j)=>{v.type==="svg"?W="svg":v.type==="math"&&(W="mathml"),_==null?mt(v,b,N,L,O,W,$,j):I(_,v,L,O,W,$,j)},mt=(_,v,b,N,L,O,W,$)=>{let j,B;const{props:et,shapeFlag:G,transition:Z,dirs:it}=_;if(j=_.el=a(_.type,O,et&&et.is,et),G&8?d(j,_.children):G&16&&y(_.children,j,null,N,L,Do(_,O),W,$),it&&Ln(_,null,N,"created"),w(j,_,_.scopeId,W,N),et){for(const ut in et)ut!=="value"&&!Yr(ut)&&i(j,ut,null,et[ut],O,N);"value"in et&&i(j,"value",null,et.value,O),(B=et.onVnodeBeforeMount)&&ke(B,N,_)}it&&Ln(_,null,N,"beforeMount");const rt=Rg(L,Z);rt&&Z.beforeEnter(j),r(j,v,b),((B=et&&et.onVnodeMounted)||rt||it)&&_e(()=>{B&&ke(B,N,_),rt&&Z.enter(j),it&&Ln(_,null,N,"mounted")},L)},w=(_,v,b,N,L)=>{if(b&&E(_,b),N)for(let O=0;O<N.length;O++)E(_,N[O]);if(L){let O=L.subTree;if(v===O||Rf(O.type)&&(O.ssContent===v||O.ssFallback===v)){const W=L.vnode;w(_,W,W.scopeId,W.slotScopeIds,L.parent)}}},y=(_,v,b,N,L,O,W,$,j=0)=>{for(let B=j;B<_.length;B++){const et=_[B]=$?gn(_[B]):Be(_[B]);D(null,et,v,b,N,L,O,W,$)}},I=(_,v,b,N,L,O,W)=>{const $=v.el=_.el;let{patchFlag:j,dynamicChildren:B,dirs:et}=v;j|=_.patchFlag&16;const G=_.props||St,Z=v.props||St;let it;if(b&&Fn(b,!1),(it=Z.onVnodeBeforeUpdate)&&ke(it,b,v,_),et&&Ln(v,_,b,"beforeUpdate"),b&&Fn(b,!0),(G.innerHTML&&Z.innerHTML==null||G.textContent&&Z.textContent==null)&&d($,""),B?A(_.dynamicChildren,B,$,b,N,Do(v,L),O):W||dt(_,v,$,null,b,N,Do(v,L),O,!1),j>0){if(j&16)R($,G,Z,b,L);else if(j&2&&G.class!==Z.class&&i($,"class",null,Z.class,L),j&4&&i($,"style",G.style,Z.style,L),j&8){const rt=v.dynamicProps;for(let ut=0;ut<rt.length;ut++){const _t=rt[ut],zt=G[_t],Ht=Z[_t];(Ht!==zt||_t==="value")&&i($,_t,zt,Ht,L,b)}}j&1&&_.children!==v.children&&d($,v.children)}else!W&&B==null&&R($,G,Z,b,L);((it=Z.onVnodeUpdated)||et)&&_e(()=>{it&&ke(it,b,v,_),et&&Ln(v,_,b,"updated")},N)},A=(_,v,b,N,L,O,W)=>{for(let $=0;$<v.length;$++){const j=_[$],B=v[$],et=j.el&&(j.type===Ye||!Hr(j,B)||j.shapeFlag&198)?p(j.el):b;D(j,B,et,null,N,L,O,W,!0)}},R=(_,v,b,N,L)=>{if(v!==b){if(v!==St)for(const O in v)!Yr(O)&&!(O in b)&&i(_,O,v[O],null,L,N);for(const O in b){if(Yr(O))continue;const W=b[O],$=v[O];W!==$&&O!=="value"&&i(_,O,$,W,L,N)}"value"in b&&i(_,"value",v.value,b.value,L)}},S=(_,v,b,N,L,O,W,$,j)=>{const B=v.el=_?_.el:l(""),et=v.anchor=_?_.anchor:l("");let{patchFlag:G,dynamicChildren:Z,slotScopeIds:it}=v;it&&($=$?$.concat(it):it),_==null?(r(B,b,N),r(et,b,N),y(v.children||[],b,et,L,O,W,$,j)):G>0&&G&64&&Z&&_.dynamicChildren?(A(_.dynamicChildren,Z,b,L,O,W,$),(v.key!=null||L&&v===L.subTree)&&vf(_,v,!0)):dt(_,v,b,et,L,O,W,$,j)},T=(_,v,b,N,L,O,W,$,j)=>{v.slotScopeIds=$,_==null?v.shapeFlag&512?L.ctx.activate(v,b,N,W,j):ae(v,b,N,L,O,W,j):Te(_,v,j)},ae=(_,v,b,N,L,O,W)=>{const $=_.component=zg(_,N,L);if(of(_)&&($.ctx.renderer=J),Hg($,!1,W),$.asyncDep){if(L&&L.registerDep($,Lt,W),!_.el){const j=$.subTree=ve(Rn);H(null,j,v,b)}}else Lt($,_,v,b,L,O,W)},Te=(_,v,b)=>{const N=v.component=_.component;if(Og(_,v,b))if(N.asyncDep&&!N.asyncResolved){gt(N,v,b);return}else N.next=v,N.update();else v.el=_.el,N.vnode=v},Lt=(_,v,b,N,L,O,W)=>{const $=()=>{if(_.isMounted){let{next:G,bu:Z,u:it,parent:rt,vnode:ut}=_;{const Jt=Tf(_);if(Jt){G&&(G.el=ut.el,gt(_,G,W)),Jt.asyncDep.then(()=>{_.isUnmounted||$()});return}}let _t=G,zt;Fn(_,!1),G?(G.el=ut.el,gt(_,G,W)):G=ut,Z&&oi(Z),(zt=G.props&&G.props.onVnodeBeforeUpdate)&&ke(zt,rt,G,ut),Fn(_,!0);const Ht=xc(_),we=_.subTree;_.subTree=Ht,D(we,Ht,p(we.el),x(we),_,L,O),G.el=Ht.el,_t===null&&Mg(_,Ht.el),it&&_e(it,L),(zt=G.props&&G.props.onVnodeUpdated)&&_e(()=>ke(zt,rt,G,ut),L)}else{let G;const{el:Z,props:it}=v,{bm:rt,m:ut,parent:_t,root:zt,type:Ht}=_,we=es(v);Fn(_,!1),rt&&oi(rt),!we&&(G=it&&it.onVnodeBeforeMount)&&ke(G,_t,v),Fn(_,!0);{zt.ce&&zt.ce._def.shadowRoot!==!1&&zt.ce._injectChildStyle(Ht);const Jt=_.subTree=xc(_);D(null,Jt,b,N,_,L,O),v.el=Jt.el}if(ut&&_e(ut,L),!we&&(G=it&&it.onVnodeMounted)){const Jt=v;_e(()=>ke(G,_t,Jt),L)}(v.shapeFlag&256||_t&&es(_t.vnode)&&_t.vnode.shapeFlag&256)&&_.a&&_e(_.a,L),_.isMounted=!0,v=b=N=null}};_.scope.on();const j=_.effect=new Dh($);_.scope.off();const B=_.update=j.run.bind(j),et=_.job=j.runIfDirty.bind(j);et.i=_,et.id=_.uid,j.scheduler=()=>qa(et),Fn(_,!0),B()},gt=(_,v,b)=>{v.component=_;const N=_.vnode.props;_.vnode=v,_.next=null,yg(_,v.props,N,b),Ig(_,v.children,b),nn(),Ac(_),rn()},dt=(_,v,b,N,L,O,W,$,j=!1)=>{const B=_&&_.children,et=_?_.shapeFlag:0,G=v.children,{patchFlag:Z,shapeFlag:it}=v;if(Z>0){if(Z&128){Pe(B,G,b,N,L,O,W,$,j);return}else if(Z&256){me(B,G,b,N,L,O,W,$,j);return}}it&8?(et&16&&he(B,L,O),G!==B&&d(b,G)):et&16?it&16?Pe(B,G,b,N,L,O,W,$,j):he(B,L,O,!0):(et&8&&d(b,""),it&16&&y(G,b,N,L,O,W,$,j))},me=(_,v,b,N,L,O,W,$,j)=>{_=_||cr,v=v||cr;const B=_.length,et=v.length,G=Math.min(B,et);let Z;for(Z=0;Z<G;Z++){const it=v[Z]=j?gn(v[Z]):Be(v[Z]);D(_[Z],it,b,null,L,O,W,$,j)}B>et?he(_,L,O,!0,!1,G):y(v,b,N,L,O,W,$,j,G)},Pe=(_,v,b,N,L,O,W,$,j)=>{let B=0;const et=v.length;let G=_.length-1,Z=et-1;for(;B<=G&&B<=Z;){const it=_[B],rt=v[B]=j?gn(v[B]):Be(v[B]);if(Hr(it,rt))D(it,rt,b,null,L,O,W,$,j);else break;B++}for(;B<=G&&B<=Z;){const it=_[G],rt=v[Z]=j?gn(v[Z]):Be(v[Z]);if(Hr(it,rt))D(it,rt,b,null,L,O,W,$,j);else break;G--,Z--}if(B>G){if(B<=Z){const it=Z+1,rt=it<et?v[it].el:N;for(;B<=Z;)D(null,v[B]=j?gn(v[B]):Be(v[B]),b,rt,L,O,W,$,j),B++}}else if(B>Z)for(;B<=G;)xt(_[B],L,O,!0),B++;else{const it=B,rt=B,ut=new Map;for(B=rt;B<=Z;B++){const Kt=v[B]=j?gn(v[B]):Be(v[B]);Kt.key!=null&&ut.set(Kt.key,B)}let _t,zt=0;const Ht=Z-rt+1;let we=!1,Jt=0;const un=new Array(Ht);for(B=0;B<Ht;B++)un[B]=0;for(B=it;B<=G;B++){const Kt=_[B];if(zt>=Ht){xt(Kt,L,O,!0);continue}let Ae;if(Kt.key!=null)Ae=ut.get(Kt.key);else for(_t=rt;_t<=Z;_t++)if(un[_t-rt]===0&&Hr(Kt,v[_t])){Ae=_t;break}Ae===void 0?xt(Kt,L,O,!0):(un[Ae-rt]=B+1,Ae>=Jt?Jt=Ae:we=!0,D(Kt,v[Ae],b,null,L,O,W,$,j),zt++)}const Dr=we?bg(un):cr;for(_t=Dr.length-1,B=Ht-1;B>=0;B--){const Kt=rt+B,Ae=v[Kt],Os=Kt+1<et?v[Kt+1].el:N;un[B]===0?D(null,Ae,b,Os,L,O,W,$,j):we&&(_t<0||B!==Dr[_t]?Ie(Ae,b,Os,2):_t--)}}},Ie=(_,v,b,N,L=null)=>{const{el:O,type:W,transition:$,children:j,shapeFlag:B}=_;if(B&6){Ie(_.component.subTree,v,b,N);return}if(B&128){_.suspense.move(v,b,N);return}if(B&64){W.move(_,v,b,J);return}if(W===Ye){r(O,v,b);for(let G=0;G<j.length;G++)Ie(j[G],v,b,N);r(_.anchor,v,b);return}if(W===xo){z(_,v,b);return}if(N!==2&&B&1&&$)if(N===0)$.beforeEnter(O),r(O,v,b),_e(()=>$.enter(O),L);else{const{leave:G,delayLeave:Z,afterLeave:it}=$,rt=()=>{_.ctx.isUnmounted?s(O):r(O,v,b)},ut=()=>{G(O,()=>{rt(),it&&it()})};Z?Z(O,rt,ut):ut()}else r(O,v,b)},xt=(_,v,b,N=!1,L=!1)=>{const{type:O,props:W,ref:$,children:j,dynamicChildren:B,shapeFlag:et,patchFlag:G,dirs:Z,cacheIndex:it}=_;if(G===-2&&(L=!1),$!=null&&(nn(),ts($,null,b,_,!0),rn()),it!=null&&(v.renderCache[it]=void 0),et&256){v.ctx.deactivate(_);return}const rt=et&1&&Z,ut=!es(_);let _t;if(ut&&(_t=W&&W.onVnodeBeforeUnmount)&&ke(_t,v,_),et&6)Me(_.component,b,N);else{if(et&128){_.suspense.unmount(b,N);return}rt&&Ln(_,null,v,"beforeUnmount"),et&64?_.type.remove(_,v,b,J,N):B&&!B.hasOnce&&(O!==Ye||G>0&&G&64)?he(B,v,b,!1,!0):(O===Ye&&G&384||!L&&et&16)&&he(j,v,b),N&&Nt(_)}(ut&&(_t=W&&W.onVnodeUnmounted)||rt)&&_e(()=>{_t&&ke(_t,v,_),rt&&Ln(_,null,v,"unmounted")},b)},Nt=_=>{const{type:v,el:b,anchor:N,transition:L}=_;if(v===Ye){cn(b,N);return}if(v===xo){K(_);return}const O=()=>{s(b),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(_.shapeFlag&1&&L&&!L.persisted){const{leave:W,delayLeave:$}=L,j=()=>W(b,O);$?$(_.el,O,j):j()}else O()},cn=(_,v)=>{let b;for(;_!==v;)b=g(_),s(_),_=b;s(v)},Me=(_,v,b)=>{const{bum:N,scope:L,job:O,subTree:W,um:$,m:j,a:B,parent:et,slots:{__:G}}=_;Dc(j),Dc(B),N&&oi(N),et&&ot(G)&&G.forEach(Z=>{et.renderCache[Z]=void 0}),L.stop(),O&&(O.flags|=8,xt(W,_,v,b)),$&&_e($,v),_e(()=>{_.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},he=(_,v,b,N=!1,L=!1,O=0)=>{for(let W=O;W<_.length;W++)xt(_[W],v,b,N,L)},x=_=>{if(_.shapeFlag&6)return x(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const v=g(_.anchor||_.el),b=v&&v[Hm];return b?g(b):v};let X=!1;const Q=(_,v,b)=>{_==null?v._vnode&&xt(v._vnode,null,null,!0):D(v._vnode||null,_,v,null,null,null,b),v._vnode=_,X||(X=!0,Ac(),tf(),X=!1)},J={p:D,um:xt,m:Ie,r:Nt,mt:ae,mc:y,pc:dt,pbc:A,n:x,o:e};return{render:Q,hydrate:void 0,createApp:gg(Q)}}function Do({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Fn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Rg(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function vf(e,t,n=!1){const r=e.children,s=t.children;if(ot(r)&&ot(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=gn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&vf(a,l)),l.type===Gi&&(l.el=a.el),l.type===Rn&&!l.el&&(l.el=a.el)}}function bg(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const h=e[r];if(h!==0){if(s=n[n.length-1],e[s]<h){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<h?i=l+1:a=l;h<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Tf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Tf(t)}function Dc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Sg=Symbol.for("v-scx"),Pg=()=>tn(Sg);function li(e,t,n){return If(e,t,n)}function If(e,t,n=St){const{immediate:r,deep:s,flush:i,once:a}=n,l=oe({},n),c=t&&r||!t&&i!=="post";let h;if(ps){if(i==="sync"){const E=Pg();h=E.__watcherHandles||(E.__watcherHandles=[])}else if(!c){const E=()=>{};return E.stop=Ue,E.resume=Ue,E.pause=Ue,E}}const d=se;l.call=(E,V,D)=>qe(E,d,V,D);let p=!1;i==="post"?l.scheduler=E=>{_e(E,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(E,V)=>{V?E():qa(E)}),l.augmentJob=E=>{t&&(E.flags|=4),p&&(E.flags|=2,d&&(E.id=d.uid,E.i=d))};const g=Um(e,t,l);return ps&&(h?h.push(g):c&&g()),g}function Cg(e,t,n){const r=this.proxy,s=Bt(e)?e.includes(".")?wf(r,e):()=>r[e]:e.bind(r,r);let i;ct(t)?i=t:(i=t.handler,n=t);const a=Cs(this),l=If(s,i.bind(r),n);return a(),l}function wf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Vg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Se(t)}Modifiers`]||e[`${Kn(t)}Modifiers`];function Dg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||St;let s=n;const i=t.startsWith("update:"),a=i&&Vg(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Bt(d)?d.trim():d)),a.number&&(s=n.map(Wo)));let l,c=r[l=Ro(t)]||r[l=Ro(Se(t))];!c&&i&&(c=r[l=Ro(Kn(t))]),c&&qe(c,e,6,s);const h=r[l+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,qe(h,e,6,s)}}function Af(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!ct(e)){const c=h=>{const d=Af(h,t,!0);d&&(l=!0,oe(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Dt(e)&&r.set(e,null),null):(ot(i)?i.forEach(c=>a[c]=null):oe(a,i),Dt(e)&&r.set(e,a),a)}function Ki(e,t){return!e||!Li(t)?!1:(t=t.slice(2).replace(/Once$/,""),At(e,t[0].toLowerCase()+t.slice(1))||At(e,Kn(t))||At(e,t))}function xc(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:h,renderCache:d,props:p,data:g,setupState:E,ctx:V,inheritAttrs:D}=e,k=vi(e);let H,U;try{if(n.shapeFlag&4){const K=s||r,ft=K;H=Be(h.call(ft,K,d,p,E,g,V)),U=l}else{const K=t;H=Be(K.length>1?K(p,{attrs:l,slots:a,emit:c}):K(p,null)),U=t.props?l:xg(l)}}catch(K){rs.length=0,zi(K,e,1),H=ve(Rn)}let z=H;if(U&&D!==!1){const K=Object.keys(U),{shapeFlag:ft}=z;K.length&&ft&7&&(i&&K.some(Da)&&(U=Ng(U,i)),z=_r(z,U,!1,!0))}return n.dirs&&(z=_r(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&za(z,n.transition),H=z,vi(k),H}const xg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Li(n))&&((t||(t={}))[n]=e[n]);return t},Ng=(e,t)=>{const n={};for(const r in e)(!Da(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Og(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,h=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Nc(r,a,h):!!a;if(c&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(a[g]!==r[g]&&!Ki(h,g))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Nc(r,a,h):!0:!!a;return!1}function Nc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Ki(n,i))return!0}return!1}function Mg({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Rf=e=>e.__isSuspense;function kg(e,t){t&&t.pendingBranch?ot(e)?t.effects.push(...e):t.effects.push(e):qm(e)}const Ye=Symbol.for("v-fgt"),Gi=Symbol.for("v-txt"),Rn=Symbol.for("v-cmt"),xo=Symbol.for("v-stc"),rs=[];let Ee=null;function bf(e=!1){rs.push(Ee=e?null:[])}function Lg(){rs.pop(),Ee=rs[rs.length-1]||null}let ds=1;function Oc(e,t=!1){ds+=e,e<0&&Ee&&t&&(Ee.hasOnce=!0)}function Sf(e){return e.dynamicChildren=ds>0?Ee||cr:null,Lg(),ds>0&&Ee&&Ee.push(e),e}function jw(e,t,n,r,s,i){return Sf(Vf(e,t,n,r,s,i,!0))}function Pf(e,t,n,r,s){return Sf(ve(e,t,n,r,s,!0))}function Ii(e){return e?e.__v_isVNode===!0:!1}function Hr(e,t){return e.type===t.type&&e.key===t.key}const Cf=({key:e})=>e??null,ci=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Bt(e)||ie(e)||ct(e)?{i:ye,r:e,k:t,f:!!n}:e:null);function Vf(e,t=null,n=null,r=0,s=null,i=e===Ye?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Cf(t),ref:t&&ci(t),scopeId:nf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ye};return l?(Ga(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Bt(n)?8:16),ds>0&&!a&&Ee&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ee.push(c),c}const ve=Fg;function Fg(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===ag)&&(e=Rn),Ii(e)){const l=_r(e,t,!0);return n&&Ga(l,n),ds>0&&!i&&Ee&&(l.shapeFlag&6?Ee[Ee.indexOf(e)]=l:Ee.push(l)),l.patchFlag=-2,l}if(Xg(e)&&(e=e.__vccOpts),t){t=Bg(t);let{class:l,style:c}=t;l&&!Bt(l)&&(t.class=Ma(l)),Dt(c)&&($a(c)&&!ot(c)&&(c=oe({},c)),t.style=Oa(c))}const a=Bt(e)?1:Rf(e)?128:Km(e)?64:Dt(e)?4:ct(e)?2:0;return Vf(e,t,n,r,s,a,i,!0)}function Bg(e){return e?$a(e)||pf(e)?oe({},e):e:null}function _r(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,h=t?jg(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&Cf(h),ref:t&&t.ref?n&&i?ot(i)?i.concat(ci(t)):[i,ci(t)]:ci(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ye?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&_r(e.ssContent),ssFallback:e.ssFallback&&_r(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&za(d,c.clone(d)),d}function Ug(e=" ",t=0){return ve(Gi,null,e,t)}function $w(e="",t=!1){return t?(bf(),Pf(Rn,null,e)):ve(Rn,null,e)}function Be(e){return e==null||typeof e=="boolean"?ve(Rn):ot(e)?ve(Ye,null,e.slice()):Ii(e)?gn(e):ve(Gi,null,String(e))}function gn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:_r(e)}function Ga(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ot(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Ga(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!pf(t)?t._ctx=ye:s===3&&ye&&(ye.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ct(t)?(t={default:t,_ctx:ye},n=32):(t=String(t),r&64?(n=16,t=[Ug(t)]):n=8);e.children=t,e.shapeFlag|=n}function jg(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Ma([t.class,r.class]));else if(s==="style")t.style=Oa([t.style,r.style]);else if(Li(s)){const i=t[s],a=r[s];a&&i!==a&&!(ot(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function ke(e,t,n,r=null){qe(e,t,7,[n,r])}const $g=hf();let qg=0;function zg(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||$g,i={uid:qg++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gf(r,s),emitsOptions:Af(r,s),emit:null,emitted:null,propsDefaults:St,inheritAttrs:r.inheritAttrs,ctx:St,data:St,props:St,attrs:St,slots:St,refs:St,setupState:St,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Dg.bind(null,i),e.ce&&e.ce(i),i}let se=null,wi,ra;{const e=ji(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};wi=t("__VUE_INSTANCE_SETTERS__",n=>se=n),ra=t("__VUE_SSR_SETTERS__",n=>ps=n)}const Cs=e=>{const t=se;return wi(e),e.scope.on(),()=>{e.scope.off(),wi(t)}},Mc=()=>{se&&se.scope.off(),wi(null)};function Df(e){return e.vnode.shapeFlag&4}let ps=!1;function Hg(e,t=!1,n=!1){t&&ra(t);const{props:r,children:s}=e.vnode,i=Df(e);_g(e,r,i,t),Tg(e,s,n||t);const a=i?Kg(e,t):void 0;return t&&ra(!1),a}function Kg(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,cg);const{setup:r}=n;if(r){nn();const s=e.setupContext=r.length>1?Wg(e):null,i=Cs(e),a=Ps(r,e,0,[e.props,s]),l=Ah(a);if(rn(),i(),(l||e.sp)&&!es(e)&&sf(e),l){if(a.then(Mc,Mc),t)return a.then(c=>{kc(e,c)}).catch(c=>{zi(c,e,0)});e.asyncDep=a}else kc(e,a)}else xf(e)}function kc(e,t,n){ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Dt(t)&&(e.setupState=Xh(t)),xf(e)}function xf(e,t,n){const r=e.type;e.render||(e.render=r.render||Ue);{const s=Cs(e);nn();try{ug(e)}finally{rn(),s()}}}const Gg={get(e,t){return ne(e,"get",""),e[t]}};function Wg(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Gg),slots:e.slots,emit:e.emit,expose:t}}function Wi(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Xh(Gh(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ns)return ns[n](e)},has(t,n){return n in t||n in ns}})):e.proxy}function Qg(e,t=!0){return ct(e)?e.displayName||e.name:e.name||t&&e.__name}function Xg(e){return ct(e)&&"__vccOpts"in e}const Ve=(e,t)=>Fm(e,t,ps);function Nf(e,t,n){const r=arguments.length;return r===2?Dt(t)&&!ot(t)?Ii(t)?ve(e,null,[t]):ve(e,t):ve(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ii(n)&&(n=[n]),ve(e,t,n))}const Yg="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sa;const Lc=typeof window<"u"&&window.trustedTypes;if(Lc)try{sa=Lc.createPolicy("vue",{createHTML:e=>e})}catch{}const Of=sa?e=>sa.createHTML(e):e=>e,Jg="http://www.w3.org/2000/svg",Zg="http://www.w3.org/1998/Math/MathML",Xe=typeof document<"u"?document:null,Fc=Xe&&Xe.createElement("template"),t_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Xe.createElementNS(Jg,e):t==="mathml"?Xe.createElementNS(Zg,e):n?Xe.createElement(e,{is:n}):Xe.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Xe.createTextNode(e),createComment:e=>Xe.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Xe.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Fc.innerHTML=Of(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=Fc.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},e_=Symbol("_vtc");function n_(e,t,n){const r=e[e_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Bc=Symbol("_vod"),r_=Symbol("_vsh"),s_=Symbol(""),i_=/(^|;)\s*display\s*:/;function o_(e,t,n){const r=e.style,s=Bt(n);let i=!1;if(n&&!s){if(t)if(Bt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&ui(r,l,"")}else for(const a in t)n[a]==null&&ui(r,a,"");for(const a in n)a==="display"&&(i=!0),ui(r,a,n[a])}else if(s){if(t!==n){const a=r[s_];a&&(n+=";"+a),r.cssText=n,i=i_.test(n)}}else t&&e.removeAttribute("style");Bc in e&&(e[Bc]=i?r.display:"",e[r_]&&(r.display="none"))}const Uc=/\s*!important$/;function ui(e,t,n){if(ot(n))n.forEach(r=>ui(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=a_(e,t);Uc.test(n)?e.setProperty(Kn(r),n.replace(Uc,""),"important"):e[r]=n}}const jc=["Webkit","Moz","ms"],No={};function a_(e,t){const n=No[t];if(n)return n;let r=Se(t);if(r!=="filter"&&r in e)return No[t]=r;r=Ui(r);for(let s=0;s<jc.length;s++){const i=jc[s]+r;if(i in e)return No[t]=i}return t}const $c="http://www.w3.org/1999/xlink";function qc(e,t,n,r,s,i=fm(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS($c,t.slice(6,t.length)):e.setAttributeNS($c,t,n):n==null||i&&!Sh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":xn(n)?String(n):n)}function zc(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Of(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Sh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function rr(e,t,n,r){e.addEventListener(t,n,r)}function l_(e,t,n,r){e.removeEventListener(t,n,r)}const Hc=Symbol("_vei");function c_(e,t,n,r,s=null){const i=e[Hc]||(e[Hc]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=u_(t);if(r){const h=i[t]=d_(r,s);rr(e,l,h,c)}else a&&(l_(e,l,a,c),i[t]=void 0)}}const Kc=/(?:Once|Passive|Capture)$/;function u_(e){let t;if(Kc.test(e)){t={};let r;for(;r=e.match(Kc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Kn(e.slice(2)),t]}let Oo=0;const h_=Promise.resolve(),f_=()=>Oo||(h_.then(()=>Oo=0),Oo=Date.now());function d_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;qe(p_(r,n.value),t,5,[r])};return n.value=e,n.attached=f_(),n}function p_(e,t){if(ot(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Gc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,m_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?n_(e,r,a):t==="style"?o_(e,n,r):Li(t)?Da(t)||c_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):g_(e,t,r,a))?(zc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&qc(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Bt(r))?zc(e,Se(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),qc(e,t,r,a))};function g_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Gc(t)&&ct(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Gc(t)&&Bt(n)?!1:t in e}const Wc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ot(t)?n=>oi(t,n):t};function __(e){e.target.composing=!0}function Qc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Mo=Symbol("_assign"),qw={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Mo]=Wc(s);const i=r||s.props&&s.props.type==="number";rr(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=Wo(l)),e[Mo](l)}),n&&rr(e,"change",()=>{e.value=e.value.trim()}),t||(rr(e,"compositionstart",__),rr(e,"compositionend",Qc),rr(e,"change",Qc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[Mo]=Wc(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Wo(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},y_=oe({patchProp:m_},t_);let Xc;function E_(){return Xc||(Xc=wg(y_))}const v_=(...e)=>{const t=E_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=I_(r);if(!s)return;const i=t._component;!ct(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,T_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function T_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function I_(e){return Bt(e)?document.querySelector(e):e}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const w_=Symbol();var Yc;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Yc||(Yc={}));function A_(){const e=pm(!0),t=e.run(()=>Wh({}));let n=[],r=[];const s=Gh({install(i){s._a=i,i.provide(w_,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const R_=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},b_={};function S_(e,t){const n=og("RouterView");return bf(),Pf(n)}const P_=R_(b_,[["render",S_]]),C_="modulepreload",V_=function(e){return"/isbar-game/"+e},Jc={},Zs=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let a=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=a(n.map(h=>{if(h=V_(h),h in Jc)return;Jc[h]=!0;const d=h.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":C_,d||(g.as="script"),g.crossOrigin="",g.href=h,c&&g.setAttribute("nonce",c),document.head.appendChild(g),d)return new Promise((E,V)=>{g.addEventListener("load",E),g.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const sr=typeof document<"u";function Mf(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function D_(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Mf(e.default)}const It=Object.assign;function ko(e,t){const n={};for(const r in t){const s=t[r];n[r]=Oe(s)?s.map(e):e(s)}return n}const ss=()=>{},Oe=Array.isArray,kf=/#/g,x_=/&/g,N_=/\//g,O_=/=/g,M_=/\?/g,Lf=/\+/g,k_=/%5B/g,L_=/%5D/g,Ff=/%5E/g,F_=/%60/g,Bf=/%7B/g,B_=/%7C/g,Uf=/%7D/g,U_=/%20/g;function Wa(e){return encodeURI(""+e).replace(B_,"|").replace(k_,"[").replace(L_,"]")}function j_(e){return Wa(e).replace(Bf,"{").replace(Uf,"}").replace(Ff,"^")}function ia(e){return Wa(e).replace(Lf,"%2B").replace(U_,"+").replace(kf,"%23").replace(x_,"%26").replace(F_,"`").replace(Bf,"{").replace(Uf,"}").replace(Ff,"^")}function $_(e){return ia(e).replace(O_,"%3D")}function q_(e){return Wa(e).replace(kf,"%23").replace(M_,"%3F")}function z_(e){return e==null?"":q_(e).replace(N_,"%2F")}function ms(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const H_=/\/$/,K_=e=>e.replace(H_,"");function Lo(e,t,n="/"){let r,s={},i="",a="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,l>-1?l:t.length),s=e(i)),l>-1&&(r=r||t.slice(0,l),a=t.slice(l,t.length)),r=X_(r??t,n),{fullPath:r+(i&&"?")+i+a,path:r,query:s,hash:ms(a)}}function G_(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Zc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function W_(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&yr(t.matched[r],n.matched[s])&&jf(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function yr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function jf(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Q_(e[n],t[n]))return!1;return!0}function Q_(e,t){return Oe(e)?tu(e,t):Oe(t)?tu(t,e):e===t}function tu(e,t){return Oe(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function X_(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,a,l;for(a=0;a<r.length;a++)if(l=r[a],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const pn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var gs;(function(e){e.pop="pop",e.push="push"})(gs||(gs={}));var is;(function(e){e.back="back",e.forward="forward",e.unknown=""})(is||(is={}));function Y_(e){if(!e)if(sr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),K_(e)}const J_=/^[^#]+#/;function Z_(e,t){return e.replace(J_,"#")+t}function ty(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Qi=()=>({left:window.scrollX,top:window.scrollY});function ey(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=ty(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function eu(e,t){return(history.state?history.state.position-t:-1)+e}const oa=new Map;function ny(e,t){oa.set(e,t)}function ry(e){const t=oa.get(e);return oa.delete(e),t}let sy=()=>location.protocol+"//"+location.host;function $f(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let l=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(l);return c[0]!=="/"&&(c="/"+c),Zc(c,"")}return Zc(n,e)+r+s}function iy(e,t,n,r){let s=[],i=[],a=null;const l=({state:g})=>{const E=$f(e,location),V=n.value,D=t.value;let k=0;if(g){if(n.value=E,t.value=g,a&&a===V){a=null;return}k=D?g.position-D.position:0}else r(E);s.forEach(H=>{H(n.value,V,{delta:k,type:gs.pop,direction:k?k>0?is.forward:is.back:is.unknown})})};function c(){a=n.value}function h(g){s.push(g);const E=()=>{const V=s.indexOf(g);V>-1&&s.splice(V,1)};return i.push(E),E}function d(){const{history:g}=window;g.state&&g.replaceState(It({},g.state,{scroll:Qi()}),"")}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:h,destroy:p}}function nu(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?Qi():null}}function oy(e){const{history:t,location:n}=window,r={value:$f(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,h,d){const p=e.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?e:e.slice(p))+c:sy()+e+c;try{t[d?"replaceState":"pushState"](h,"",g),s.value=h}catch(E){console.error(E),n[d?"replace":"assign"](g)}}function a(c,h){const d=It({},t.state,nu(s.value.back,c,s.value.forward,!0),h,{position:s.value.position});i(c,d,!0),r.value=c}function l(c,h){const d=It({},s.value,t.state,{forward:c,scroll:Qi()});i(d.current,d,!0);const p=It({},nu(r.value,c,null),{position:d.position+1},h);i(c,p,!1),r.value=c}return{location:r,state:s,push:l,replace:a}}function ay(e){e=Y_(e);const t=oy(e),n=iy(e,t.state,t.location,t.replace);function r(i,a=!0){a||n.pauseListeners(),history.go(i)}const s=It({location:"",base:e,go:r,createHref:Z_.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function ly(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),ay(e)}function cy(e){return typeof e=="string"||e&&typeof e=="object"}function qf(e){return typeof e=="string"||typeof e=="symbol"}const zf=Symbol("");var ru;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ru||(ru={}));function Er(e,t){return It(new Error,{type:e,[zf]:!0},t)}function Qe(e,t){return e instanceof Error&&zf in e&&(t==null||!!(e.type&t))}const su="[^/]+?",uy={sensitive:!1,strict:!1,start:!0,end:!0},hy=/[.+*?^${}()[\]/\\]/g;function fy(e,t){const n=It({},uy,t),r=[];let s=n.start?"^":"";const i=[];for(const h of e){const d=h.length?[]:[90];n.strict&&!h.length&&(s+="/");for(let p=0;p<h.length;p++){const g=h[p];let E=40+(n.sensitive?.25:0);if(g.type===0)p||(s+="/"),s+=g.value.replace(hy,"\\$&"),E+=40;else if(g.type===1){const{value:V,repeatable:D,optional:k,regexp:H}=g;i.push({name:V,repeatable:D,optional:k});const U=H||su;if(U!==su){E+=10;try{new RegExp(`(${U})`)}catch(K){throw new Error(`Invalid custom RegExp for param "${V}" (${U}): `+K.message)}}let z=D?`((?:${U})(?:/(?:${U}))*)`:`(${U})`;p||(z=k&&h.length<2?`(?:/${z})`:"/"+z),k&&(z+="?"),s+=z,E+=20,k&&(E+=-8),D&&(E+=-20),U===".*"&&(E+=-50)}d.push(E)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function l(h){const d=h.match(a),p={};if(!d)return null;for(let g=1;g<d.length;g++){const E=d[g]||"",V=i[g-1];p[V.name]=E&&V.repeatable?E.split("/"):E}return p}function c(h){let d="",p=!1;for(const g of e){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const E of g)if(E.type===0)d+=E.value;else if(E.type===1){const{value:V,repeatable:D,optional:k}=E,H=V in h?h[V]:"";if(Oe(H)&&!D)throw new Error(`Provided param "${V}" is an array but it is not repeatable (* or + modifiers)`);const U=Oe(H)?H.join("/"):H;if(!U)if(k)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${V}"`);d+=U}}return d||"/"}return{re:a,score:r,keys:i,parse:l,stringify:c}}function dy(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Hf(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=dy(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(iu(r))return 1;if(iu(s))return-1}return s.length-r.length}function iu(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const py={type:0,value:""},my=/[a-zA-Z0-9_]/;function gy(e){if(!e)return[[]];if(e==="/")return[[py]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(E){throw new Error(`ERR (${n})/"${h}": ${E}`)}let n=0,r=n;const s=[];let i;function a(){i&&s.push(i),i=[]}let l=0,c,h="",d="";function p(){h&&(n===0?i.push({type:0,value:h}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:h,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function g(){h+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(h&&p(),a()):c===":"?(p(),n=1):g();break;case 4:g(),n=r;break;case 1:c==="("?n=2:my.test(c)?g():(p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),p(),a(),s}function _y(e,t,n){const r=fy(gy(e.path),n),s=It(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function yy(e,t){const n=[],r=new Map;t=cu({strict:!1,end:!0,sensitive:!1},t);function s(p){return r.get(p)}function i(p,g,E){const V=!E,D=au(p);D.aliasOf=E&&E.record;const k=cu(t,p),H=[D];if("alias"in p){const K=typeof p.alias=="string"?[p.alias]:p.alias;for(const ft of K)H.push(au(It({},D,{components:E?E.record.components:D.components,path:ft,aliasOf:E?E.record:D})))}let U,z;for(const K of H){const{path:ft}=K;if(g&&ft[0]!=="/"){const mt=g.record.path,w=mt[mt.length-1]==="/"?"":"/";K.path=g.record.path+(ft&&w+ft)}if(U=_y(K,g,k),E?E.alias.push(U):(z=z||U,z!==U&&z.alias.push(U),V&&p.name&&!lu(U)&&a(p.name)),Kf(U)&&c(U),D.children){const mt=D.children;for(let w=0;w<mt.length;w++)i(mt[w],U,E&&E.children[w])}E=E||U}return z?()=>{a(z)}:ss}function a(p){if(qf(p)){const g=r.get(p);g&&(r.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(a),g.alias.forEach(a))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&r.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function l(){return n}function c(p){const g=Ty(p,n);n.splice(g,0,p),p.record.name&&!lu(p)&&r.set(p.record.name,p)}function h(p,g){let E,V={},D,k;if("name"in p&&p.name){if(E=r.get(p.name),!E)throw Er(1,{location:p});k=E.record.name,V=It(ou(g.params,E.keys.filter(z=>!z.optional).concat(E.parent?E.parent.keys.filter(z=>z.optional):[]).map(z=>z.name)),p.params&&ou(p.params,E.keys.map(z=>z.name))),D=E.stringify(V)}else if(p.path!=null)D=p.path,E=n.find(z=>z.re.test(D)),E&&(V=E.parse(D),k=E.record.name);else{if(E=g.name?r.get(g.name):n.find(z=>z.re.test(g.path)),!E)throw Er(1,{location:p,currentLocation:g});k=E.record.name,V=It({},g.params,p.params),D=E.stringify(V)}const H=[];let U=E;for(;U;)H.unshift(U.record),U=U.parent;return{name:k,path:D,params:V,matched:H,meta:vy(H)}}e.forEach(p=>i(p));function d(){n.length=0,r.clear()}return{addRoute:i,resolve:h,removeRoute:a,clearRoutes:d,getRoutes:l,getRecordMatcher:s}}function ou(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function au(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Ey(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Ey(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function lu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function vy(e){return e.reduce((t,n)=>It(t,n.meta),{})}function cu(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function Ty(e,t){let n=0,r=t.length;for(;n!==r;){const i=n+r>>1;Hf(e,t[i])<0?r=i:n=i+1}const s=Iy(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function Iy(e){let t=e;for(;t=t.parent;)if(Kf(t)&&Hf(e,t)===0)return t}function Kf({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function wy(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Lf," "),a=i.indexOf("="),l=ms(a<0?i:i.slice(0,a)),c=a<0?null:ms(i.slice(a+1));if(l in t){let h=t[l];Oe(h)||(h=t[l]=[h]),h.push(c)}else t[l]=c}return t}function uu(e){let t="";for(let n in e){const r=e[n];if(n=$_(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Oe(r)?r.map(i=>i&&ia(i)):[r&&ia(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function Ay(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Oe(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const Ry=Symbol(""),hu=Symbol(""),Qa=Symbol(""),Gf=Symbol(""),aa=Symbol("");function Kr(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function _n(e,t,n,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,c)=>{const h=g=>{g===!1?c(Er(4,{from:n,to:t})):g instanceof Error?c(g):cy(g)?c(Er(2,{from:t,to:g})):(a&&r.enterCallbacks[s]===a&&typeof g=="function"&&a.push(g),l())},d=i(()=>e.call(r&&r.instances[s],t,n,h));let p=Promise.resolve(d);e.length<3&&(p=p.then(h)),p.catch(g=>c(g))})}function Fo(e,t,n,r,s=i=>i()){const i=[];for(const a of e)for(const l in a.components){let c=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(Mf(c)){const d=(c.__vccOpts||c)[t];d&&i.push(_n(d,n,r,a,l,s))}else{let h=c();i.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const p=D_(d)?d.default:d;a.mods[l]=d,a.components[l]=p;const E=(p.__vccOpts||p)[t];return E&&_n(E,n,r,a,l,s)()}))}}return i}function fu(e){const t=tn(Qa),n=tn(Gf),r=Ve(()=>{const c=fr(e.to);return t.resolve(c)}),s=Ve(()=>{const{matched:c}=r.value,{length:h}=c,d=c[h-1],p=n.matched;if(!d||!p.length)return-1;const g=p.findIndex(yr.bind(null,d));if(g>-1)return g;const E=du(c[h-2]);return h>1&&du(d)===E&&p[p.length-1].path!==E?p.findIndex(yr.bind(null,c[h-2])):g}),i=Ve(()=>s.value>-1&&Vy(n.params,r.value.params)),a=Ve(()=>s.value>-1&&s.value===n.matched.length-1&&jf(n.params,r.value.params));function l(c={}){if(Cy(c)){const h=t[fr(e.replace)?"replace":"push"](fr(e.to)).catch(ss);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:Ve(()=>r.value.href),isActive:i,isExactActive:a,navigate:l}}function by(e){return e.length===1?e[0]:e}const Sy=rf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:fu,setup(e,{slots:t}){const n=qi(fu(e)),{options:r}=tn(Qa),s=Ve(()=>({[pu(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[pu(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&by(t.default(n));return e.custom?i:Nf("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Py=Sy;function Cy(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Vy(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Oe(s)||s.length!==r.length||r.some((i,a)=>i!==s[a]))return!1}return!0}function du(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const pu=(e,t,n)=>e??t??n,Dy=rf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=tn(aa),s=Ve(()=>e.route||r.value),i=tn(hu,0),a=Ve(()=>{let h=fr(i);const{matched:d}=s.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),l=Ve(()=>s.value.matched[a.value]);ai(hu,Ve(()=>a.value+1)),ai(Ry,l),ai(aa,s);const c=Wh();return li(()=>[c.value,l.value,e.name],([h,d,p],[g,E,V])=>{d&&(d.instances[p]=h,E&&E!==d&&h&&h===g&&(d.leaveGuards.size||(d.leaveGuards=E.leaveGuards),d.updateGuards.size||(d.updateGuards=E.updateGuards))),h&&d&&(!E||!yr(d,E)||!g)&&(d.enterCallbacks[p]||[]).forEach(D=>D(h))},{flush:"post"}),()=>{const h=s.value,d=e.name,p=l.value,g=p&&p.components[d];if(!g)return mu(n.default,{Component:g,route:h});const E=p.props[d],V=E?E===!0?h.params:typeof E=="function"?E(h):E:null,k=Nf(g,It({},V,t,{onVnodeUnmounted:H=>{H.component.isUnmounted&&(p.instances[d]=null)},ref:c}));return mu(n.default,{Component:k,route:h})||k}}});function mu(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const xy=Dy;function Ny(e){const t=yy(e.routes,e),n=e.parseQuery||wy,r=e.stringifyQuery||uu,s=e.history,i=Kr(),a=Kr(),l=Kr(),c=Om(pn);let h=pn;sr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=ko.bind(null,x=>""+x),p=ko.bind(null,z_),g=ko.bind(null,ms);function E(x,X){let Q,J;return qf(x)?(Q=t.getRecordMatcher(x),J=X):J=x,t.addRoute(J,Q)}function V(x){const X=t.getRecordMatcher(x);X&&t.removeRoute(X)}function D(){return t.getRoutes().map(x=>x.record)}function k(x){return!!t.getRecordMatcher(x)}function H(x,X){if(X=It({},X||c.value),typeof x=="string"){const b=Lo(n,x,X.path),N=t.resolve({path:b.path},X),L=s.createHref(b.fullPath);return It(b,N,{params:g(N.params),hash:ms(b.hash),redirectedFrom:void 0,href:L})}let Q;if(x.path!=null)Q=It({},x,{path:Lo(n,x.path,X.path).path});else{const b=It({},x.params);for(const N in b)b[N]==null&&delete b[N];Q=It({},x,{params:p(b)}),X.params=p(X.params)}const J=t.resolve(Q,X),vt=x.hash||"";J.params=d(g(J.params));const _=G_(r,It({},x,{hash:j_(vt),path:J.path})),v=s.createHref(_);return It({fullPath:_,hash:vt,query:r===uu?Ay(x.query):x.query||{}},J,{redirectedFrom:void 0,href:v})}function U(x){return typeof x=="string"?Lo(n,x,c.value.path):It({},x)}function z(x,X){if(h!==x)return Er(8,{from:X,to:x})}function K(x){return w(x)}function ft(x){return K(It(U(x),{replace:!0}))}function mt(x){const X=x.matched[x.matched.length-1];if(X&&X.redirect){const{redirect:Q}=X;let J=typeof Q=="function"?Q(x):Q;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=U(J):{path:J},J.params={}),It({query:x.query,hash:x.hash,params:J.path!=null?{}:x.params},J)}}function w(x,X){const Q=h=H(x),J=c.value,vt=x.state,_=x.force,v=x.replace===!0,b=mt(Q);if(b)return w(It(U(b),{state:typeof b=="object"?It({},vt,b.state):vt,force:_,replace:v}),X||Q);const N=Q;N.redirectedFrom=X;let L;return!_&&W_(r,J,Q)&&(L=Er(16,{to:N,from:J}),Ie(J,J,!0,!1)),(L?Promise.resolve(L):A(N,J)).catch(O=>Qe(O)?Qe(O,2)?O:Pe(O):dt(O,N,J)).then(O=>{if(O){if(Qe(O,2))return w(It({replace:v},U(O.to),{state:typeof O.to=="object"?It({},vt,O.to.state):vt,force:_}),X||N)}else O=S(N,J,!0,v,vt);return R(N,J,O),O})}function y(x,X){const Q=z(x,X);return Q?Promise.reject(Q):Promise.resolve()}function I(x){const X=cn.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(x):x()}function A(x,X){let Q;const[J,vt,_]=Oy(x,X);Q=Fo(J.reverse(),"beforeRouteLeave",x,X);for(const b of J)b.leaveGuards.forEach(N=>{Q.push(_n(N,x,X))});const v=y.bind(null,x,X);return Q.push(v),he(Q).then(()=>{Q=[];for(const b of i.list())Q.push(_n(b,x,X));return Q.push(v),he(Q)}).then(()=>{Q=Fo(vt,"beforeRouteUpdate",x,X);for(const b of vt)b.updateGuards.forEach(N=>{Q.push(_n(N,x,X))});return Q.push(v),he(Q)}).then(()=>{Q=[];for(const b of _)if(b.beforeEnter)if(Oe(b.beforeEnter))for(const N of b.beforeEnter)Q.push(_n(N,x,X));else Q.push(_n(b.beforeEnter,x,X));return Q.push(v),he(Q)}).then(()=>(x.matched.forEach(b=>b.enterCallbacks={}),Q=Fo(_,"beforeRouteEnter",x,X,I),Q.push(v),he(Q))).then(()=>{Q=[];for(const b of a.list())Q.push(_n(b,x,X));return Q.push(v),he(Q)}).catch(b=>Qe(b,8)?b:Promise.reject(b))}function R(x,X,Q){l.list().forEach(J=>I(()=>J(x,X,Q)))}function S(x,X,Q,J,vt){const _=z(x,X);if(_)return _;const v=X===pn,b=sr?history.state:{};Q&&(J||v?s.replace(x.fullPath,It({scroll:v&&b&&b.scroll},vt)):s.push(x.fullPath,vt)),c.value=x,Ie(x,X,Q,v),Pe()}let T;function ae(){T||(T=s.listen((x,X,Q)=>{if(!Me.listening)return;const J=H(x),vt=mt(J);if(vt){w(It(vt,{replace:!0,force:!0}),J).catch(ss);return}h=J;const _=c.value;sr&&ny(eu(_.fullPath,Q.delta),Qi()),A(J,_).catch(v=>Qe(v,12)?v:Qe(v,2)?(w(It(U(v.to),{force:!0}),J).then(b=>{Qe(b,20)&&!Q.delta&&Q.type===gs.pop&&s.go(-1,!1)}).catch(ss),Promise.reject()):(Q.delta&&s.go(-Q.delta,!1),dt(v,J,_))).then(v=>{v=v||S(J,_,!1),v&&(Q.delta&&!Qe(v,8)?s.go(-Q.delta,!1):Q.type===gs.pop&&Qe(v,20)&&s.go(-1,!1)),R(J,_,v)}).catch(ss)}))}let Te=Kr(),Lt=Kr(),gt;function dt(x,X,Q){Pe(x);const J=Lt.list();return J.length?J.forEach(vt=>vt(x,X,Q)):console.error(x),Promise.reject(x)}function me(){return gt&&c.value!==pn?Promise.resolve():new Promise((x,X)=>{Te.add([x,X])})}function Pe(x){return gt||(gt=!x,ae(),Te.list().forEach(([X,Q])=>x?Q(x):X()),Te.reset()),x}function Ie(x,X,Q,J){const{scrollBehavior:vt}=e;if(!sr||!vt)return Promise.resolve();const _=!Q&&ry(eu(x.fullPath,0))||(J||!Q)&&history.state&&history.state.scroll||null;return Jh().then(()=>vt(x,X,_)).then(v=>v&&ey(v)).catch(v=>dt(v,x,X))}const xt=x=>s.go(x);let Nt;const cn=new Set,Me={currentRoute:c,listening:!0,addRoute:E,removeRoute:V,clearRoutes:t.clearRoutes,hasRoute:k,getRoutes:D,resolve:H,options:e,push:K,replace:ft,go:xt,back:()=>xt(-1),forward:()=>xt(1),beforeEach:i.add,beforeResolve:a.add,afterEach:l.add,onError:Lt.add,isReady:me,install(x){const X=this;x.component("RouterLink",Py),x.component("RouterView",xy),x.config.globalProperties.$router=X,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>fr(c)}),sr&&!Nt&&c.value===pn&&(Nt=!0,K(s.location).catch(vt=>{}));const Q={};for(const vt in pn)Object.defineProperty(Q,vt,{get:()=>c.value[vt],enumerable:!0});x.provide(Qa,X),x.provide(Gf,Hh(Q)),x.provide(aa,c);const J=x.unmount;cn.add(x),x.unmount=function(){cn.delete(x),cn.size<1&&(h=pn,T&&T(),T=null,c.value=pn,Nt=!1,gt=!1),J()}}};function he(x){return x.reduce((X,Q)=>X.then(()=>I(Q)),Promise.resolve())}return Me}function Oy(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const l=t.matched[a];l&&(e.matched.find(h=>yr(h,l))?r.push(l):n.push(l));const c=e.matched[a];c&&(t.matched.find(h=>yr(h,c))||s.push(c))}return[n,r,s]}const My=()=>{};var gu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},ky=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Qf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,h=c?e[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,E=h&63;c||(E=64,a||(g=64)),r.push(n[d],n[p],n[g],n[E])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Wf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):ky(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const p=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new Ly;const g=i<<2|l>>4;if(r.push(g),h!==64){const E=l<<4&240|h>>2;if(r.push(E),p!==64){const V=h<<6&192|p;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ly extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fy=function(e){const t=Wf(e);return Qf.encodeByteArray(t,!0)},Xf=function(e){return Fy(e).replace(/\./g,"")},By=function(e){try{return Qf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=()=>Uy().__FIREBASE_DEFAULTS__,$y=()=>{if(typeof process>"u"||typeof gu>"u")return;const e=gu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},qy=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&By(e[1]);return t&&JSON.parse(t)},Yf=()=>{try{return My()||jy()||$y()||qy()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},zy=()=>{var e;return(e=Yf())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(e){return e.endsWith(".cloudworkstations.dev")}async function Ky(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Wy(){var e;const t=(e=Yf())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qy(){return!Wy()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xy(){try{return typeof indexedDB=="object"}catch{return!1}}function Yy(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="FirebaseError";class br extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Jy,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zf.prototype.create)}}class Zf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?Zy(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new br(s,l,r)}}function Zy(e,t){return e.replace(tE,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const tE=/\{\$([^}]+)}/g;function Ai(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(_u(i)&&_u(a)){if(!Ai(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _u(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(e){return e&&e._delegate?e._delegate:e}class ys{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Hy;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(rE(t))try{this.getOrInitializeService({instanceIdentifier:Un})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Un){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Un){return this.instances.has(t)}getOptions(t=Un){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nE(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Un){return this.component?this.component.multipleInstances?t:Un:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nE(e){return e===Un?void 0:e}function rE(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new eE(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Et||(Et={}));const iE={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},oE=Et.INFO,aE={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},lE=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=aE[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class td{constructor(t){this.name=t,this._logLevel=oE,this._logHandler=lE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?iE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...t),this._logHandler(this,Et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...t),this._logHandler(this,Et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...t),this._logHandler(this,Et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...t),this._logHandler(this,Et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...t),this._logHandler(this,Et.ERROR,...t)}}const cE=(e,t)=>t.some(n=>e instanceof n);let yu,Eu;function uE(){return yu||(yu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hE(){return Eu||(Eu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ed=new WeakMap,la=new WeakMap,nd=new WeakMap,Bo=new WeakMap,Xa=new WeakMap;function fE(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(vn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&ed.set(n,e)}).catch(()=>{}),Xa.set(t,e),t}function dE(e){if(la.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});la.set(e,t)}let ca={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return la.get(e);if(t==="objectStoreNames")return e.objectStoreNames||nd.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function pE(e){ca=e(ca)}function mE(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Uo(this),t,...n);return nd.set(r,t.sort?t.sort():[t]),vn(r)}:hE().includes(e)?function(...t){return e.apply(Uo(this),t),vn(ed.get(this))}:function(...t){return vn(e.apply(Uo(this),t))}}function gE(e){return typeof e=="function"?mE(e):(e instanceof IDBTransaction&&dE(e),cE(e,uE())?new Proxy(e,ca):e)}function vn(e){if(e instanceof IDBRequest)return fE(e);if(Bo.has(e))return Bo.get(e);const t=gE(e);return t!==e&&(Bo.set(e,t),Xa.set(t,e)),t}const Uo=e=>Xa.get(e);function _E(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=vn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(vn(a.result),c.oldVersion,c.newVersion,vn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const yE=["get","getKey","getAll","getAllKeys","count"],EE=["put","add","delete","clear"],jo=new Map;function vu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(jo.get(t))return jo.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=EE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||yE.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return jo.set(t,i),i}pE(e=>({...e,get:(t,n,r)=>vu(t,n)||e.get(t,n,r),has:(t,n)=>!!vu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function TE(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ua="@firebase/app",Tu="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new td("@firebase/app"),IE="@firebase/app-compat",wE="@firebase/analytics-compat",AE="@firebase/analytics",RE="@firebase/app-check-compat",bE="@firebase/app-check",SE="@firebase/auth",PE="@firebase/auth-compat",CE="@firebase/database",VE="@firebase/data-connect",DE="@firebase/database-compat",xE="@firebase/functions",NE="@firebase/functions-compat",OE="@firebase/installations",ME="@firebase/installations-compat",kE="@firebase/messaging",LE="@firebase/messaging-compat",FE="@firebase/performance",BE="@firebase/performance-compat",UE="@firebase/remote-config",jE="@firebase/remote-config-compat",$E="@firebase/storage",qE="@firebase/storage-compat",zE="@firebase/firestore",HE="@firebase/ai",KE="@firebase/firestore-compat",GE="firebase",WE="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="[DEFAULT]",XE={[ua]:"fire-core",[IE]:"fire-core-compat",[AE]:"fire-analytics",[wE]:"fire-analytics-compat",[bE]:"fire-app-check",[RE]:"fire-app-check-compat",[SE]:"fire-auth",[PE]:"fire-auth-compat",[CE]:"fire-rtdb",[VE]:"fire-data-connect",[DE]:"fire-rtdb-compat",[xE]:"fire-fn",[NE]:"fire-fn-compat",[OE]:"fire-iid",[ME]:"fire-iid-compat",[kE]:"fire-fcm",[LE]:"fire-fcm-compat",[FE]:"fire-perf",[BE]:"fire-perf-compat",[UE]:"fire-rc",[jE]:"fire-rc-compat",[$E]:"fire-gcs",[qE]:"fire-gcs-compat",[zE]:"fire-fst",[KE]:"fire-fst-compat",[HE]:"fire-vertex","fire-js":"fire-js",[GE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new Map,YE=new Map,fa=new Map;function Iu(e,t){try{e.container.addComponent(t)}catch(n){sn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ri(e){const t=e.name;if(fa.has(t))return sn.debug(`There were multiple attempts to register component ${t}.`),!1;fa.set(t,e);for(const n of ha.values())Iu(n,e);for(const n of YE.values())Iu(n,e);return!0}function JE(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ZE(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qn=new Zf("app","Firebase",tv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=WE;function rv(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:QE,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw qn.create("bad-app-name",{appName:String(s)});if(n||(n=zy()),!n)throw qn.create("no-options");const i=ha.get(s);if(i){if(Ai(n,i.options)&&Ai(r,i.config))return i;throw qn.create("duplicate-app",{appName:s})}const a=new sE(s);for(const c of fa.values())a.addComponent(c);const l=new ev(n,r,a);return ha.set(s,l),l}function mr(e,t,n){var r;let s=(r=XE[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sn.warn(l.join(" "));return}Ri(new ys(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="firebase-heartbeat-database",iv=1,Es="firebase-heartbeat-store";let $o=null;function rd(){return $o||($o=_E(sv,iv,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Es)}catch(n){console.warn(n)}}}}).catch(e=>{throw qn.create("idb-open",{originalErrorMessage:e.message})})),$o}async function ov(e){try{const n=(await rd()).transaction(Es),r=await n.objectStore(Es).get(sd(e));return await n.done,r}catch(t){if(t instanceof br)sn.warn(t.message);else{const n=qn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});sn.warn(n.message)}}}async function wu(e,t){try{const r=(await rd()).transaction(Es,"readwrite");await r.objectStore(Es).put(t,sd(e)),await r.done}catch(n){if(n instanceof br)sn.warn(n.message);else{const r=qn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sn.warn(r.message)}}}function sd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=1024,lv=30;class cv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Au();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>lv){const a=fv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){sn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Au(),{heartbeatsToSend:r,unsentEntries:s}=uv(this._heartbeatsCache.heartbeats),i=Xf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return sn.warn(n),""}}}function Au(){return new Date().toISOString().substring(0,10)}function uv(e,t=av){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Ru(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ru(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xy()?Yy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ov(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Ru(e){return Xf(JSON.stringify({version:2,heartbeats:e})).length}function fv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(e){Ri(new ys("platform-logger",t=>new vE(t),"PRIVATE")),Ri(new ys("heartbeat",t=>new cv(t),"PRIVATE")),mr(ua,Tu,e),mr(ua,Tu,"esm2017"),mr("fire-js","")}dv("");var pv="firebase",mv="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(pv,mv,"app");var bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tn,id;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,y){function I(){}I.prototype=y.prototype,w.D=y.prototype,w.prototype=new I,w.prototype.constructor=w,w.C=function(A,R,S){for(var T=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)T[ae-2]=arguments[ae];return y.prototype[R].apply(A,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,y,I){I||(I=0);var A=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)A[R]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(R=0;16>R;++R)A[R]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=w.g[0],I=w.g[1],R=w.g[2];var S=w.g[3],T=y+(S^I&(R^S))+A[0]+3614090360&4294967295;y=I+(T<<7&4294967295|T>>>25),T=S+(R^y&(I^R))+A[1]+3905402710&4294967295,S=y+(T<<12&4294967295|T>>>20),T=R+(I^S&(y^I))+A[2]+606105819&4294967295,R=S+(T<<17&4294967295|T>>>15),T=I+(y^R&(S^y))+A[3]+3250441966&4294967295,I=R+(T<<22&4294967295|T>>>10),T=y+(S^I&(R^S))+A[4]+4118548399&4294967295,y=I+(T<<7&4294967295|T>>>25),T=S+(R^y&(I^R))+A[5]+1200080426&4294967295,S=y+(T<<12&4294967295|T>>>20),T=R+(I^S&(y^I))+A[6]+2821735955&4294967295,R=S+(T<<17&4294967295|T>>>15),T=I+(y^R&(S^y))+A[7]+4249261313&4294967295,I=R+(T<<22&4294967295|T>>>10),T=y+(S^I&(R^S))+A[8]+1770035416&4294967295,y=I+(T<<7&4294967295|T>>>25),T=S+(R^y&(I^R))+A[9]+2336552879&4294967295,S=y+(T<<12&4294967295|T>>>20),T=R+(I^S&(y^I))+A[10]+4294925233&4294967295,R=S+(T<<17&4294967295|T>>>15),T=I+(y^R&(S^y))+A[11]+2304563134&4294967295,I=R+(T<<22&4294967295|T>>>10),T=y+(S^I&(R^S))+A[12]+1804603682&4294967295,y=I+(T<<7&4294967295|T>>>25),T=S+(R^y&(I^R))+A[13]+4254626195&4294967295,S=y+(T<<12&4294967295|T>>>20),T=R+(I^S&(y^I))+A[14]+2792965006&4294967295,R=S+(T<<17&4294967295|T>>>15),T=I+(y^R&(S^y))+A[15]+1236535329&4294967295,I=R+(T<<22&4294967295|T>>>10),T=y+(R^S&(I^R))+A[1]+4129170786&4294967295,y=I+(T<<5&4294967295|T>>>27),T=S+(I^R&(y^I))+A[6]+3225465664&4294967295,S=y+(T<<9&4294967295|T>>>23),T=R+(y^I&(S^y))+A[11]+643717713&4294967295,R=S+(T<<14&4294967295|T>>>18),T=I+(S^y&(R^S))+A[0]+3921069994&4294967295,I=R+(T<<20&4294967295|T>>>12),T=y+(R^S&(I^R))+A[5]+3593408605&4294967295,y=I+(T<<5&4294967295|T>>>27),T=S+(I^R&(y^I))+A[10]+38016083&4294967295,S=y+(T<<9&4294967295|T>>>23),T=R+(y^I&(S^y))+A[15]+3634488961&4294967295,R=S+(T<<14&4294967295|T>>>18),T=I+(S^y&(R^S))+A[4]+3889429448&4294967295,I=R+(T<<20&4294967295|T>>>12),T=y+(R^S&(I^R))+A[9]+568446438&4294967295,y=I+(T<<5&4294967295|T>>>27),T=S+(I^R&(y^I))+A[14]+3275163606&4294967295,S=y+(T<<9&4294967295|T>>>23),T=R+(y^I&(S^y))+A[3]+4107603335&4294967295,R=S+(T<<14&4294967295|T>>>18),T=I+(S^y&(R^S))+A[8]+1163531501&4294967295,I=R+(T<<20&4294967295|T>>>12),T=y+(R^S&(I^R))+A[13]+2850285829&4294967295,y=I+(T<<5&4294967295|T>>>27),T=S+(I^R&(y^I))+A[2]+4243563512&4294967295,S=y+(T<<9&4294967295|T>>>23),T=R+(y^I&(S^y))+A[7]+1735328473&4294967295,R=S+(T<<14&4294967295|T>>>18),T=I+(S^y&(R^S))+A[12]+2368359562&4294967295,I=R+(T<<20&4294967295|T>>>12),T=y+(I^R^S)+A[5]+4294588738&4294967295,y=I+(T<<4&4294967295|T>>>28),T=S+(y^I^R)+A[8]+2272392833&4294967295,S=y+(T<<11&4294967295|T>>>21),T=R+(S^y^I)+A[11]+1839030562&4294967295,R=S+(T<<16&4294967295|T>>>16),T=I+(R^S^y)+A[14]+4259657740&4294967295,I=R+(T<<23&4294967295|T>>>9),T=y+(I^R^S)+A[1]+2763975236&4294967295,y=I+(T<<4&4294967295|T>>>28),T=S+(y^I^R)+A[4]+1272893353&4294967295,S=y+(T<<11&4294967295|T>>>21),T=R+(S^y^I)+A[7]+4139469664&4294967295,R=S+(T<<16&4294967295|T>>>16),T=I+(R^S^y)+A[10]+3200236656&4294967295,I=R+(T<<23&4294967295|T>>>9),T=y+(I^R^S)+A[13]+681279174&4294967295,y=I+(T<<4&4294967295|T>>>28),T=S+(y^I^R)+A[0]+3936430074&4294967295,S=y+(T<<11&4294967295|T>>>21),T=R+(S^y^I)+A[3]+3572445317&4294967295,R=S+(T<<16&4294967295|T>>>16),T=I+(R^S^y)+A[6]+76029189&4294967295,I=R+(T<<23&4294967295|T>>>9),T=y+(I^R^S)+A[9]+3654602809&4294967295,y=I+(T<<4&4294967295|T>>>28),T=S+(y^I^R)+A[12]+3873151461&4294967295,S=y+(T<<11&4294967295|T>>>21),T=R+(S^y^I)+A[15]+530742520&4294967295,R=S+(T<<16&4294967295|T>>>16),T=I+(R^S^y)+A[2]+3299628645&4294967295,I=R+(T<<23&4294967295|T>>>9),T=y+(R^(I|~S))+A[0]+4096336452&4294967295,y=I+(T<<6&4294967295|T>>>26),T=S+(I^(y|~R))+A[7]+1126891415&4294967295,S=y+(T<<10&4294967295|T>>>22),T=R+(y^(S|~I))+A[14]+2878612391&4294967295,R=S+(T<<15&4294967295|T>>>17),T=I+(S^(R|~y))+A[5]+4237533241&4294967295,I=R+(T<<21&4294967295|T>>>11),T=y+(R^(I|~S))+A[12]+1700485571&4294967295,y=I+(T<<6&4294967295|T>>>26),T=S+(I^(y|~R))+A[3]+2399980690&4294967295,S=y+(T<<10&4294967295|T>>>22),T=R+(y^(S|~I))+A[10]+4293915773&4294967295,R=S+(T<<15&4294967295|T>>>17),T=I+(S^(R|~y))+A[1]+2240044497&4294967295,I=R+(T<<21&4294967295|T>>>11),T=y+(R^(I|~S))+A[8]+1873313359&4294967295,y=I+(T<<6&4294967295|T>>>26),T=S+(I^(y|~R))+A[15]+4264355552&4294967295,S=y+(T<<10&4294967295|T>>>22),T=R+(y^(S|~I))+A[6]+2734768916&4294967295,R=S+(T<<15&4294967295|T>>>17),T=I+(S^(R|~y))+A[13]+1309151649&4294967295,I=R+(T<<21&4294967295|T>>>11),T=y+(R^(I|~S))+A[4]+4149444226&4294967295,y=I+(T<<6&4294967295|T>>>26),T=S+(I^(y|~R))+A[11]+3174756917&4294967295,S=y+(T<<10&4294967295|T>>>22),T=R+(y^(S|~I))+A[2]+718787259&4294967295,R=S+(T<<15&4294967295|T>>>17),T=I+(S^(R|~y))+A[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+S&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var I=y-this.blockSize,A=this.B,R=this.h,S=0;S<y;){if(R==0)for(;S<=I;)s(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<y;)if(A[R++]=w.charCodeAt(S++),R==this.blockSize){s(this,A),R=0;break}}else for(;S<y;)if(A[R++]=w[S++],R==this.blockSize){s(this,A),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var I=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=I&255,I/=256;for(this.u(w),w=Array(16),y=I=0;4>y;++y)for(var A=0;32>A;A+=8)w[I++]=this.g[y]>>>A&255;return w};function i(w,y){var I=l;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=y(w)}function a(w,y){this.h=y;for(var I=[],A=!0,R=w.length-1;0<=R;R--){var S=w[R]|0;A&&S==y||(I[R]=S,A=!1)}this.g=I}var l={};function c(w){return-128<=w&&128>w?i(w,function(y){return new a([y|0],0>y?-1:0)}):new a([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return k(h(-w));for(var y=[],I=1,A=0;w>=I;A++)y[A]=w/I|0,I*=4294967296;return new a(y,0)}function d(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return k(d(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(y,8)),A=p,R=0;R<w.length;R+=8){var S=Math.min(8,w.length-R),T=parseInt(w.substring(R,R+S),y);8>S?(S=h(Math.pow(y,S)),A=A.j(S).add(h(T))):(A=A.j(I),A=A.add(h(T)))}return A}var p=c(0),g=c(1),E=c(16777216);e=a.prototype,e.m=function(){if(D(this))return-k(this).m();for(var w=0,y=1,I=0;I<this.g.length;I++){var A=this.i(I);w+=(0<=A?A:4294967296+A)*y,y*=4294967296}return w},e.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(V(this))return"0";if(D(this))return"-"+k(this).toString(w);for(var y=h(Math.pow(w,6)),I=this,A="";;){var R=K(I,y).g;I=H(I,R.j(y));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(w);if(I=R,V(I))return S+A;for(;6>S.length;)S="0"+S;A=S+A}},e.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function V(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function D(w){return w.h==-1}e.l=function(w){return w=H(this,w),D(w)?-1:V(w)?0:1};function k(w){for(var y=w.g.length,I=[],A=0;A<y;A++)I[A]=~w.g[A];return new a(I,~w.h).add(g)}e.abs=function(){return D(this)?k(this):this},e.add=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],A=0,R=0;R<=y;R++){var S=A+(this.i(R)&65535)+(w.i(R)&65535),T=(S>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);A=T>>>16,S&=65535,T&=65535,I[R]=T<<16|S}return new a(I,I[I.length-1]&-2147483648?-1:0)};function H(w,y){return w.add(k(y))}e.j=function(w){if(V(this)||V(w))return p;if(D(this))return D(w)?k(this).j(k(w)):k(k(this).j(w));if(D(w))return k(this.j(k(w)));if(0>this.l(E)&&0>w.l(E))return h(this.m()*w.m());for(var y=this.g.length+w.g.length,I=[],A=0;A<2*y;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<w.g.length;R++){var S=this.i(A)>>>16,T=this.i(A)&65535,ae=w.i(R)>>>16,Te=w.i(R)&65535;I[2*A+2*R]+=T*Te,U(I,2*A+2*R),I[2*A+2*R+1]+=S*Te,U(I,2*A+2*R+1),I[2*A+2*R+1]+=T*ae,U(I,2*A+2*R+1),I[2*A+2*R+2]+=S*ae,U(I,2*A+2*R+2)}for(A=0;A<y;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=y;A<2*y;A++)I[A]=0;return new a(I,0)};function U(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function z(w,y){this.g=w,this.h=y}function K(w,y){if(V(y))throw Error("division by zero");if(V(w))return new z(p,p);if(D(w))return y=K(k(w),y),new z(k(y.g),k(y.h));if(D(y))return y=K(w,k(y)),new z(k(y.g),y.h);if(30<w.g.length){if(D(w)||D(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,A=y;0>=A.l(w);)I=ft(I),A=ft(A);var R=mt(I,1),S=mt(A,1);for(A=mt(A,2),I=mt(I,2);!V(A);){var T=S.add(A);0>=T.l(w)&&(R=R.add(I),S=T),A=mt(A,1),I=mt(I,1)}return y=H(w,R.j(y)),new z(R,y)}for(R=p;0<=w.l(y);){for(I=Math.max(1,Math.floor(w.m()/y.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),S=h(I),T=S.j(y);D(T)||0<T.l(w);)I-=A,S=h(I),T=S.j(y);V(S)&&(S=g),R=R.add(S),w=H(w,T)}return new z(R,w)}e.A=function(w){return K(this,w).h},e.and=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)&w.i(A);return new a(I,this.h&w.h)},e.or=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)|w.i(A);return new a(I,this.h|w.h)},e.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)^w.i(A);return new a(I,this.h^w.h)};function ft(w){for(var y=w.g.length+1,I=[],A=0;A<y;A++)I[A]=w.i(A)<<1|w.i(A-1)>>>31;return new a(I,w.h)}function mt(w,y){var I=y>>5;y%=32;for(var A=w.g.length-I,R=[],S=0;S<A;S++)R[S]=0<y?w.i(S+I)>>>y|w.i(S+I+1)<<32-y:w.i(S+I);return new a(R,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,id=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Tn=a}).apply(typeof bu<"u"?bu:typeof self<"u"?self:typeof window<"u"?window:{});var ti=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var od,Wr,ad,hi,da,ld,cd,ud;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){return o==Array.prototype||o==Object.prototype||(o[u]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof ti=="object"&&ti];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var P=o[m];if(!(P in f))break t;f=f[P]}o=o[o.length-1],m=f[o],u=u(m),u!=m&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var f=0,m=!1,P={next:function(){if(!m&&f<o.length){var C=f++;return{value:u(C,o[C]),done:!1}}return m=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,f){return o.call.apply(o.bind,arguments)}function p(o,u,f){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,m),o.apply(u,P)}}return function(){return o.apply(u,arguments)}}function g(o,u,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function E(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function V(o,u){function f(){}f.prototype=u.prototype,o.aa=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(m,P,C){for(var q=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)q[bt-2]=arguments[bt];return u.prototype[P].apply(m,q)}}function D(o){const u=o.length;if(0<u){const f=Array(u);for(let m=0;m<u;m++)f[m]=o[m];return f}return[]}function k(o,u){for(let f=1;f<arguments.length;f++){const m=arguments[f];if(c(m)){const P=o.length||0,C=m.length||0;o.length=P+C;for(let q=0;q<C;q++)o[P+q]=m[q]}else o.push(m)}}class H{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function U(o){return/^[\s\xa0]*$/.test(o)}function z(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function K(o){return K[" "](o),o}K[" "]=function(){};var ft=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function mt(o,u,f){for(const m in o)u.call(f,o[m],m,o)}function w(o,u){for(const f in o)u.call(void 0,o[f],f,o)}function y(o){const u={};for(const f in o)u[f]=o[f];return u}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(o,u){let f,m;for(let P=1;P<arguments.length;P++){m=arguments[P];for(f in m)o[f]=m[f];for(let C=0;C<I.length;C++)f=I[C],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function R(o){var u=1;o=o.split(":");const f=[];for(;0<u&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function S(o){l.setTimeout(()=>{throw o},0)}function T(){var o=me;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class ae{constructor(){this.h=this.g=null}add(u,f){const m=Te.get();m.set(u,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Te=new H(()=>new Lt,o=>o.reset());class Lt{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let gt,dt=!1,me=new ae,Pe=()=>{const o=l.Promise.resolve(void 0);gt=()=>{o.then(Ie)}};var Ie=()=>{for(var o;o=T();){try{o.h.call(o.g)}catch(f){S(f)}var u=Te;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}dt=!1};function xt(){this.s=this.s,this.C=this.C}xt.prototype.s=!1,xt.prototype.ma=function(){this.s||(this.s=!0,this.N())},xt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Nt(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Nt.prototype.h=function(){this.defaultPrevented=!0};var cn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,u),l.removeEventListener("test",f,u)}catch{}return o}();function Me(o,u){if(Nt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(ft){t:{try{K(u.nodeName);var P=!0;break t}catch{}P=!1}P||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:he[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Me.aa.h.call(this)}}V(Me,Nt);var he={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var x="closure_listenable_"+(1e6*Math.random()|0),X=0;function Q(o,u,f,m,P){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!m,this.ha=P,this.key=++X,this.da=this.fa=!1}function J(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function vt(o){this.src=o,this.g={},this.h=0}vt.prototype.add=function(o,u,f,m,P){var C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);var q=v(o,u,m,P);return-1<q?(u=o[q],f||(u.fa=!1)):(u=new Q(u,this.src,C,!!m,P),u.fa=f,o.push(u)),u};function _(o,u){var f=u.type;if(f in o.g){var m=o.g[f],P=Array.prototype.indexOf.call(m,u,void 0),C;(C=0<=P)&&Array.prototype.splice.call(m,P,1),C&&(J(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function v(o,u,f,m){for(var P=0;P<o.length;++P){var C=o[P];if(!C.da&&C.listener==u&&C.capture==!!f&&C.ha==m)return P}return-1}var b="closure_lm_"+(1e6*Math.random()|0),N={};function L(o,u,f,m,P){if(Array.isArray(u)){for(var C=0;C<u.length;C++)L(o,u[C],f,m,P);return null}return f=it(f),o&&o[x]?o.K(u,f,h(m)?!!m.capture:!1,P):O(o,u,f,!1,m,P)}function O(o,u,f,m,P,C){if(!u)throw Error("Invalid event type");var q=h(P)?!!P.capture:!!P,bt=G(o);if(bt||(o[b]=bt=new vt(o)),f=bt.add(u,f,m,q,C),f.proxy)return f;if(m=W(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)cn||(P=q),P===void 0&&(P=!1),o.addEventListener(u.toString(),m,P);else if(o.attachEvent)o.attachEvent(B(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function W(){function o(f){return u.call(o.src,o.listener,f)}const u=et;return o}function $(o,u,f,m,P){if(Array.isArray(u))for(var C=0;C<u.length;C++)$(o,u[C],f,m,P);else m=h(m)?!!m.capture:!!m,f=it(f),o&&o[x]?(o=o.i,u=String(u).toString(),u in o.g&&(C=o.g[u],f=v(C,f,m,P),-1<f&&(J(C[f]),Array.prototype.splice.call(C,f,1),C.length==0&&(delete o.g[u],o.h--)))):o&&(o=G(o))&&(u=o.g[u.toString()],o=-1,u&&(o=v(u,f,m,P)),(f=-1<o?u[o]:null)&&j(f))}function j(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[x])_(u.i,o);else{var f=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(f,m,o.capture):u.detachEvent?u.detachEvent(B(f),m):u.addListener&&u.removeListener&&u.removeListener(m),(f=G(u))?(_(f,o),f.h==0&&(f.src=null,u[b]=null)):J(o)}}}function B(o){return o in N?N[o]:N[o]="on"+o}function et(o,u){if(o.da)o=!0;else{u=new Me(u,this);var f=o.listener,m=o.ha||o.src;o.fa&&j(o),o=f.call(m,u)}return o}function G(o){return o=o[b],o instanceof vt?o:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(o){return typeof o=="function"?o:(o[Z]||(o[Z]=function(u){return o.handleEvent(u)}),o[Z])}function rt(){xt.call(this),this.i=new vt(this),this.M=this,this.F=null}V(rt,xt),rt.prototype[x]=!0,rt.prototype.removeEventListener=function(o,u,f,m){$(this,o,u,f,m)};function ut(o,u){var f,m=o.F;if(m)for(f=[];m;m=m.F)f.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new Nt(u,o);else if(u instanceof Nt)u.target=u.target||o;else{var P=u;u=new Nt(m,o),A(u,P)}if(P=!0,f)for(var C=f.length-1;0<=C;C--){var q=u.g=f[C];P=_t(q,m,!0,u)&&P}if(q=u.g=o,P=_t(q,m,!0,u)&&P,P=_t(q,m,!1,u)&&P,f)for(C=0;C<f.length;C++)q=u.g=f[C],P=_t(q,m,!1,u)&&P}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var f=o.g[u],m=0;m<f.length;m++)J(f[m]);delete o.g[u],o.h--}}this.F=null},rt.prototype.K=function(o,u,f,m){return this.i.add(String(o),u,!1,f,m)},rt.prototype.L=function(o,u,f,m){return this.i.add(String(o),u,!0,f,m)};function _t(o,u,f,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var P=!0,C=0;C<u.length;++C){var q=u[C];if(q&&!q.da&&q.capture==f){var bt=q.listener,Gt=q.ha||q.src;q.fa&&_(o.i,q),P=bt.call(Gt,m)!==!1&&P}}return P&&!m.defaultPrevented}function zt(o,u,f){if(typeof o=="function")f&&(o=g(o,f));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Ht(o){o.g=zt(()=>{o.g=null,o.i&&(o.i=!1,Ht(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class we extends xt{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Ht(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(o){xt.call(this),this.h=o,this.g={}}V(Jt,xt);var un=[];function Dr(o){mt(o.g,function(u,f){this.g.hasOwnProperty(f)&&j(u)},o),o.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),Dr(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=l.JSON.stringify,Ae=l.JSON.parse,Os=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function co(){}co.prototype.h=null;function Vl(o){return o.h||(o.h=o.i())}function Dl(){}var xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function uo(){Nt.call(this,"d")}V(uo,Nt);function ho(){Nt.call(this,"c")}V(ho,Nt);var Nn={},xl=null;function Ms(){return xl=xl||new rt}Nn.La="serverreachability";function Nl(o){Nt.call(this,Nn.La,o)}V(Nl,Nt);function Nr(o){const u=Ms();ut(u,new Nl(u))}Nn.STAT_EVENT="statevent";function Ol(o,u){Nt.call(this,Nn.STAT_EVENT,o),this.stat=u}V(Ol,Nt);function le(o){const u=Ms();ut(u,new Ol(u,o))}Nn.Ma="timingevent";function Ml(o,u){Nt.call(this,Nn.Ma,o),this.size=u}V(Ml,Nt);function Or(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Mr(){this.g=!0}Mr.prototype.xa=function(){this.g=!1};function Np(o,u,f,m,P,C){o.info(function(){if(o.g)if(C)for(var q="",bt=C.split("&"),Gt=0;Gt<bt.length;Gt++){var Tt=bt[Gt].split("=");if(1<Tt.length){var Zt=Tt[0];Tt=Tt[1];var te=Zt.split("_");q=2<=te.length&&te[1]=="type"?q+(Zt+"="+Tt+"&"):q+(Zt+"=redacted&")}}else q=null;else q=C;return"XMLHTTP REQ ("+m+") [attempt "+P+"]: "+u+`
`+f+`
`+q})}function Op(o,u,f,m,P,C,q){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+P+"]: "+u+`
`+f+`
`+C+" "+q})}function Yn(o,u,f,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+kp(o,f)+(m?" "+m:"")})}function Mp(o,u){o.info(function(){return"TIMEOUT: "+u})}Mr.prototype.info=function(){};function kp(o,u){if(!o.g)return u;if(!u)return null;try{var f=JSON.parse(u);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var m=f[o];if(!(2>m.length)){var P=m[1];if(Array.isArray(P)&&!(1>P.length)){var C=P[0];if(C!="noop"&&C!="stop"&&C!="close")for(var q=1;q<P.length;q++)P[q]=""}}}}return Kt(f)}catch{return u}}var ks={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fo;function Ls(){}V(Ls,co),Ls.prototype.g=function(){return new XMLHttpRequest},Ls.prototype.i=function(){return{}},fo=new Ls;function hn(o,u,f,m){this.j=o,this.i=u,this.l=f,this.R=m||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ll}function Ll(){this.i=null,this.g="",this.h=!1}var Fl={},po={};function mo(o,u,f){o.L=1,o.v=js(Ke(u)),o.m=f,o.P=!0,Bl(o,null)}function Bl(o,u){o.F=Date.now(),Fs(o),o.A=Ke(o.v);var f=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Zl(f.i,"t",m),o.C=0,f=o.j.J,o.h=new Ll,o.g=_c(o.j,f?u:null,!o.m),0<o.O&&(o.M=new we(g(o.Y,o,o.g),o.O)),u=o.U,f=o.g,m=o.ca;var P="readystatechange";Array.isArray(P)||(P&&(un[0]=P.toString()),P=un);for(var C=0;C<P.length;C++){var q=L(f,P[C],m||u.handleEvent,!1,u.h||u);if(!q)break;u.g[q.key]=q}u=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Nr(),Np(o.i,o.u,o.A,o.l,o.R,o.m)}hn.prototype.ca=function(o){o=o.target;const u=this.M;u&&Ge(o)==3?u.j():this.Y(o)},hn.prototype.Y=function(o){try{if(o==this.g)t:{const te=Ge(this.g);var u=this.g.Ba();const tr=this.g.Z();if(!(3>te)&&(te!=3||this.g&&(this.h.h||this.g.oa()||oc(this.g)))){this.J||te!=4||u==7||(u==8||0>=tr?Nr(3):Nr(2)),go(this);var f=this.g.Z();this.X=f;e:if(Ul(this)){var m=oc(this.g);o="";var P=m.length,C=Ge(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){On(this),kr(this);var q="";break e}this.h.i=new l.TextDecoder}for(u=0;u<P;u++)this.h.h=!0,o+=this.h.i.decode(m[u],{stream:!(C&&u==P-1)});m.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,Op(this.i,this.u,this.A,this.l,this.R,te,f),this.o){if(this.T&&!this.K){e:{if(this.g){var bt,Gt=this.g;if((bt=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(bt)){var Tt=bt;break e}}Tt=null}if(f=Tt)Yn(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_o(this,f);else{this.o=!1,this.s=3,le(12),On(this),kr(this);break t}}if(this.P){f=!0;let Ce;for(;!this.J&&this.C<q.length;)if(Ce=Lp(this,q),Ce==po){te==4&&(this.s=4,le(14),f=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ce==Fl){this.s=4,le(15),Yn(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else Yn(this.i,this.l,Ce,null),_o(this,Ce);if(Ul(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||q.length!=0||this.h.h||(this.s=1,le(16),f=!1),this.o=this.o&&f,!f)Yn(this.i,this.l,q,"[Invalid Chunked Response]"),On(this),kr(this);else if(0<q.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),wo(Zt),Zt.M=!0,le(11))}}else Yn(this.i,this.l,q,null),_o(this,q);te==4&&On(this),this.o&&!this.J&&(te==4?dc(this.j,this):(this.o=!1,Fs(this)))}else tm(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,le(12)):(this.s=0,le(13)),On(this),kr(this)}}}catch{}finally{}};function Ul(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Lp(o,u){var f=o.C,m=u.indexOf(`
`,f);return m==-1?po:(f=Number(u.substring(f,m)),isNaN(f)?Fl:(m+=1,m+f>u.length?po:(u=u.slice(m,m+f),o.C=m+f,u)))}hn.prototype.cancel=function(){this.J=!0,On(this)};function Fs(o){o.S=Date.now()+o.I,jl(o,o.I)}function jl(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Or(g(o.ba,o),u)}function go(o){o.B&&(l.clearTimeout(o.B),o.B=null)}hn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Mp(this.i,this.A),this.L!=2&&(Nr(),le(17)),On(this),this.s=2,kr(this)):jl(this,this.S-o)};function kr(o){o.j.G==0||o.J||dc(o.j,o)}function On(o){go(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Dr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function _o(o,u){try{var f=o.j;if(f.G!=0&&(f.g==o||yo(f.h,o))){if(!o.K&&yo(f.h,o)&&f.G==3){try{var m=f.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var P=m;if(P[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Gs(f),Hs(f);else break t;Io(f),le(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=Or(g(f.Za,f),6e3));if(1>=zl(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else kn(f,11)}else if((o.K||f.g==o)&&Gs(f),!U(u))for(P=f.Da.g.parse(u),u=0;u<P.length;u++){let Tt=P[u];if(f.T=Tt[0],Tt=Tt[1],f.G==2)if(Tt[0]=="c"){f.K=Tt[1],f.ia=Tt[2];const Zt=Tt[3];Zt!=null&&(f.la=Zt,f.j.info("VER="+f.la));const te=Tt[4];te!=null&&(f.Aa=te,f.j.info("SVER="+f.Aa));const tr=Tt[5];tr!=null&&typeof tr=="number"&&0<tr&&(m=1.5*tr,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const Ce=o.g;if(Ce){const Qs=Ce.g?Ce.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var C=m.h;C.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Eo(C,C.h),C.h=null))}if(m.D){const Ao=Ce.g?Ce.g.getResponseHeader("X-HTTP-Session-Id"):null;Ao&&(m.ya=Ao,Ct(m.I,m.D,Ao))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var q=o;if(m.qa=gc(m,m.J?m.ia:null,m.W),q.K){Hl(m.h,q);var bt=q,Gt=m.L;Gt&&(bt.I=Gt),bt.B&&(go(bt),Fs(bt)),m.g=q}else hc(m);0<f.i.length&&Ks(f)}else Tt[0]!="stop"&&Tt[0]!="close"||kn(f,7);else f.G==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?kn(f,7):To(f):Tt[0]!="noop"&&f.l&&f.l.ta(Tt),f.v=0)}}Nr(4)}catch{}}var Fp=class{constructor(o,u){this.g=o,this.map=u}};function $l(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ql(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function zl(o){return o.h?1:o.g?o.g.size:0}function yo(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Eo(o,u){o.g?o.g.add(u):o.h=u}function Hl(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}$l.prototype.cancel=function(){if(this.i=Kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Kl(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const f of o.g.values())u=u.concat(f.D);return u}return D(o.i)}function Bp(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],f=o.length,m=0;m<f;m++)u.push(o[m]);return u}u=[],f=0;for(m in o)u[f++]=o[m];return u}function Up(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(const m in o)u[f++]=m;return u}}}function Gl(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var f=Up(o),m=Bp(o),P=m.length,C=0;C<P;C++)u.call(void 0,m[C],f&&f[C],o)}var Wl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jp(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var m=o[f].indexOf("="),P=null;if(0<=m){var C=o[f].substring(0,m);P=o[f].substring(m+1)}else C=o[f];u(C,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Mn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Mn){this.h=o.h,Bs(this,o.j),this.o=o.o,this.g=o.g,Us(this,o.s),this.l=o.l;var u=o.i,f=new Br;f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),Ql(this,f),this.m=o.m}else o&&(u=String(o).match(Wl))?(this.h=!1,Bs(this,u[1]||"",!0),this.o=Lr(u[2]||""),this.g=Lr(u[3]||"",!0),Us(this,u[4]),this.l=Lr(u[5]||"",!0),Ql(this,u[6]||"",!0),this.m=Lr(u[7]||"")):(this.h=!1,this.i=new Br(null,this.h))}Mn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Fr(u,Xl,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Fr(u,Xl,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Fr(f,f.charAt(0)=="/"?zp:qp,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Fr(f,Kp)),o.join("")};function Ke(o){return new Mn(o)}function Bs(o,u,f){o.j=f?Lr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Us(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Ql(o,u,f){u instanceof Br?(o.i=u,Gp(o.i,o.h)):(f||(u=Fr(u,Hp)),o.i=new Br(u,o.h))}function Ct(o,u,f){o.i.set(u,f)}function js(o){return Ct(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Lr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Fr(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,$p),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function $p(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Xl=/[#\/\?@]/g,qp=/[#\?:]/g,zp=/[#\?]/g,Hp=/[#\?@]/g,Kp=/#/g;function Br(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function fn(o){o.g||(o.g=new Map,o.h=0,o.i&&jp(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}e=Br.prototype,e.add=function(o,u){fn(this),this.i=null,o=Jn(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function Yl(o,u){fn(o),u=Jn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Jl(o,u){return fn(o),u=Jn(o,u),o.g.has(u)}e.forEach=function(o,u){fn(this),this.g.forEach(function(f,m){f.forEach(function(P){o.call(u,P,m,this)},this)},this)},e.na=function(){fn(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),f=[];for(let m=0;m<u.length;m++){const P=o[m];for(let C=0;C<P.length;C++)f.push(u[m])}return f},e.V=function(o){fn(this);let u=[];if(typeof o=="string")Jl(this,o)&&(u=u.concat(this.g.get(Jn(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)u=u.concat(o[f])}return u},e.set=function(o,u){return fn(this),this.i=null,o=Jn(this,o),Jl(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Zl(o,u,f){Yl(o,u),0<f.length&&(o.i=null,o.g.set(Jn(o,u),D(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var f=0;f<u.length;f++){var m=u[f];const C=encodeURIComponent(String(m)),q=this.V(m);for(m=0;m<q.length;m++){var P=C;q[m]!==""&&(P+="="+encodeURIComponent(String(q[m]))),o.push(P)}}return this.i=o.join("&")};function Jn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Gp(o,u){u&&!o.j&&(fn(o),o.i=null,o.g.forEach(function(f,m){var P=m.toLowerCase();m!=P&&(Yl(this,m),Zl(this,P,f))},o)),o.j=u}function Wp(o,u){const f=new Mr;if(l.Image){const m=new Image;m.onload=E(dn,f,"TestLoadImage: loaded",!0,u,m),m.onerror=E(dn,f,"TestLoadImage: error",!1,u,m),m.onabort=E(dn,f,"TestLoadImage: abort",!1,u,m),m.ontimeout=E(dn,f,"TestLoadImage: timeout",!1,u,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function Qp(o,u){const f=new Mr,m=new AbortController,P=setTimeout(()=>{m.abort(),dn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(C=>{clearTimeout(P),C.ok?dn(f,"TestPingServer: ok",!0,u):dn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(P),dn(f,"TestPingServer: error",!1,u)})}function dn(o,u,f,m,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),m(f)}catch{}}function Xp(){this.g=new Os}function Yp(o,u,f){const m=f||"";try{Gl(o,function(P,C){let q=P;h(P)&&(q=Kt(P)),u.push(m+C+"="+encodeURIComponent(q))})}catch(P){throw u.push(m+"type="+encodeURIComponent("_badmap")),P}}function $s(o){this.l=o.Ub||null,this.j=o.eb||!1}V($s,co),$s.prototype.g=function(){return new qs(this.l,this.j)},$s.prototype.i=function(o){return function(){return o}}({});function qs(o,u){rt.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(qs,rt),e=qs.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,jr(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ur(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,jr(this)),this.g&&(this.readyState=3,jr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tc(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function tc(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Ur(this):jr(this),this.readyState==3&&tc(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Ur(this))},e.Qa=function(o){this.g&&(this.response=o,Ur(this))},e.ga=function(){this.g&&Ur(this)};function Ur(o){o.readyState=4,o.l=null,o.j=null,o.v=null,jr(o)}e.setRequestHeader=function(o,u){this.u.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function jr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ec(o){let u="";return mt(o,function(f,m){u+=m,u+=":",u+=f,u+=`\r
`}),u}function vo(o,u,f){t:{for(m in f){var m=!1;break t}m=!0}m||(f=ec(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Ct(o,u,f))}function Mt(o){rt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Mt,rt);var Jp=/^https?$/i,Zp=["POST","PUT"];e=Mt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,u,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fo.g(),this.v=this.o?Vl(this.o):Vl(fo),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(C){nc(this,C);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var P in m)f.set(P,m[P]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const C of m.keys())f.set(C,m.get(C));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(C=>C.toLowerCase()=="content-type"),P=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Zp,u,void 0))||m||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,q]of f)this.g.setRequestHeader(C,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ic(this),this.u=!0,this.g.send(o),this.u=!1}catch(C){nc(this,C)}};function nc(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,rc(o),zs(o)}function rc(o){o.A||(o.A=!0,ut(o,"complete"),ut(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ut(this,"complete"),ut(this,"abort"),zs(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zs(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?sc(this):this.bb())},e.bb=function(){sc(this)};function sc(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Ge(o)!=4||o.Z()!=2)){if(o.u&&Ge(o)==4)zt(o.Ea,0,o);else if(ut(o,"readystatechange"),Ge(o)==4){o.h=!1;try{const q=o.Z();t:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var f;if(!(f=u)){var m;if(m=q===0){var P=String(o.D).match(Wl)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),m=!Jp.test(P?P.toLowerCase():"")}f=m}if(f)ut(o,"complete"),ut(o,"success");else{o.m=6;try{var C=2<Ge(o)?o.g.statusText:""}catch{C=""}o.l=C+" ["+o.Z()+"]",rc(o)}}finally{zs(o)}}}}function zs(o,u){if(o.g){ic(o);const f=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||ut(o,"ready");try{f.onreadystatechange=m}catch{}}}function ic(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Ge(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Ge(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Ae(u)}};function oc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function tm(o){const u={};o=(o.g&&2<=Ge(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(U(o[m]))continue;var f=R(o[m]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const C=u[P]||[];u[P]=C,C.push(f)}w(u,function(m){return m.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function ac(o){this.Aa=0,this.i=[],this.j=new Mr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,o),this.cb=$r("retryDelaySeedMs",1e4,o),this.Wa=$r("forwardChannelMaxRetries",2,o),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new $l(o&&o.concurrentRequestLimit),this.Da=new Xp,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ac.prototype,e.la=8,e.G=1,e.connect=function(o,u,f,m){le(0),this.W=o,this.H=u||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=gc(this,null,this.W),Ks(this)};function To(o){if(lc(o),o.G==3){var u=o.U++,f=Ke(o.I);if(Ct(f,"SID",o.K),Ct(f,"RID",u),Ct(f,"TYPE","terminate"),qr(o,f),u=new hn(o,o.j,u),u.L=2,u.v=js(Ke(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=u.v,f=!0),f||(u.g=_c(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Fs(u)}mc(o)}function Hs(o){o.g&&(wo(o),o.g.cancel(),o.g=null)}function lc(o){Hs(o),o.u&&(l.clearTimeout(o.u),o.u=null),Gs(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Ks(o){if(!ql(o.h)&&!o.s){o.s=!0;var u=o.Ga;gt||Pe(),dt||(gt(),dt=!0),me.add(u,o),o.B=0}}function em(o,u){return zl(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Or(g(o.Ga,o,u),pc(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const P=new hn(this,this.j,o);let C=this.o;if(this.S&&(C?(C=y(C),A(C,this.S)):C=this.S),this.m!==null||this.O||(P.H=C,C=null),this.P)t:{for(var u=0,f=0;f<this.i.length;f++){e:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=f;break t}if(u===4096||f===this.i.length-1){u=f+1;break t}}u=1e3}else u=1e3;u=uc(this,P,u),f=Ke(this.I),Ct(f,"RID",o),Ct(f,"CVER",22),this.D&&Ct(f,"X-HTTP-Session-Id",this.D),qr(this,f),C&&(this.O?u="headers="+encodeURIComponent(String(ec(C)))+"&"+u:this.m&&vo(f,this.m,C)),Eo(this.h,P),this.Ua&&Ct(f,"TYPE","init"),this.P?(Ct(f,"$req",u),Ct(f,"SID","null"),P.T=!0,mo(P,f,null)):mo(P,f,u),this.G=2}}else this.G==3&&(o?cc(this,o):this.i.length==0||ql(this.h)||cc(this))};function cc(o,u){var f;u?f=u.l:f=o.U++;const m=Ke(o.I);Ct(m,"SID",o.K),Ct(m,"RID",f),Ct(m,"AID",o.T),qr(o,m),o.m&&o.o&&vo(m,o.m,o.o),f=new hn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),u&&(o.i=u.D.concat(o.i)),u=uc(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Eo(o.h,f),mo(f,m,u)}function qr(o,u){o.H&&mt(o.H,function(f,m){Ct(u,m,f)}),o.l&&Gl({},function(f,m){Ct(u,m,f)})}function uc(o,u,f){f=Math.min(o.i.length,f);var m=o.l?g(o.l.Na,o.l,o):null;t:{var P=o.i;let C=-1;for(;;){const q=["count="+f];C==-1?0<f?(C=P[0].g,q.push("ofs="+C)):C=0:q.push("ofs="+C);let bt=!0;for(let Gt=0;Gt<f;Gt++){let Tt=P[Gt].g;const Zt=P[Gt].map;if(Tt-=C,0>Tt)C=Math.max(0,P[Gt].g-100),bt=!1;else try{Yp(Zt,q,"req"+Tt+"_")}catch{m&&m(Zt)}}if(bt){m=q.join("&");break t}}}return o=o.i.splice(0,f),u.D=o,m}function hc(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;gt||Pe(),dt||(gt(),dt=!0),me.add(u,o),o.v=0}}function Io(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Or(g(o.Fa,o),pc(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,fc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Or(g(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,le(10),Hs(this),fc(this))};function wo(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function fc(o){o.g=new hn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Ke(o.qa);Ct(u,"RID","rpc"),Ct(u,"SID",o.K),Ct(u,"AID",o.T),Ct(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ct(u,"TO",o.ja),Ct(u,"TYPE","xmlhttp"),qr(o,u),o.m&&o.o&&vo(u,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=js(Ke(u)),f.m=null,f.P=!0,Bl(f,o)}e.Za=function(){this.C!=null&&(this.C=null,Hs(this),Io(this),le(19))};function Gs(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function dc(o,u){var f=null;if(o.g==u){Gs(o),wo(o),o.g=null;var m=2}else if(yo(o.h,u))f=u.D,Hl(o.h,u),m=1;else return;if(o.G!=0){if(u.o)if(m==1){f=u.m?u.m.length:0,u=Date.now()-u.F;var P=o.B;m=Ms(),ut(m,new Ml(m,f)),Ks(o)}else hc(o);else if(P=u.s,P==3||P==0&&0<u.X||!(m==1&&em(o,u)||m==2&&Io(o)))switch(f&&0<f.length&&(u=o.h,u.i=u.i.concat(f)),P){case 1:kn(o,5);break;case 4:kn(o,10);break;case 3:kn(o,6);break;default:kn(o,2)}}}function pc(o,u){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*u}function kn(o,u){if(o.j.info("Error code "+u),u==2){var f=g(o.fb,o),m=o.Xa;const P=!m;m=new Mn(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Bs(m,"https"),js(m),P?Wp(m.toString(),f):Qp(m.toString(),f)}else le(2);o.G=0,o.l&&o.l.sa(u),mc(o),lc(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function mc(o){if(o.G=0,o.ka=[],o.l){const u=Kl(o.h);(u.length!=0||o.i.length!=0)&&(k(o.ka,u),k(o.ka,o.i),o.h.i.length=0,D(o.i),o.i.length=0),o.l.ra()}}function gc(o,u,f){var m=f instanceof Mn?Ke(f):new Mn(f);if(m.g!="")u&&(m.g=u+"."+m.g),Us(m,m.s);else{var P=l.location;m=P.protocol,u=u?u+"."+P.hostname:P.hostname,P=+P.port;var C=new Mn(null);m&&Bs(C,m),u&&(C.g=u),P&&Us(C,P),f&&(C.l=f),m=C}return f=o.D,u=o.ya,f&&u&&Ct(m,f,u),Ct(m,"VER",o.la),qr(o,m),m}function _c(o,u,f){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Mt(new $s({eb:f})):new Mt(o.pa),u.Ha(o.J),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function yc(){}e=yc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ws(){}Ws.prototype.g=function(o,u){return new ge(o,u)};function ge(o,u){rt.call(this),this.g=new ac(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!U(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!U(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Zn(this)}V(ge,rt),ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ge.prototype.close=function(){To(this.g)},ge.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Kt(o),o=f);u.i.push(new Fp(u.Ya++,o)),u.G==3&&Ks(u)},ge.prototype.N=function(){this.g.l=null,delete this.j,To(this.g),delete this.g,ge.aa.N.call(this)};function Ec(o){uo.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const f in u){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}V(Ec,uo);function vc(){ho.call(this),this.status=1}V(vc,ho);function Zn(o){this.g=o}V(Zn,yc),Zn.prototype.ua=function(){ut(this.g,"a")},Zn.prototype.ta=function(o){ut(this.g,new Ec(o))},Zn.prototype.sa=function(o){ut(this.g,new vc)},Zn.prototype.ra=function(){ut(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,ge.prototype.send=ge.prototype.o,ge.prototype.open=ge.prototype.m,ge.prototype.close=ge.prototype.close,ud=function(){return new Ws},cd=function(){return Ms()},ld=Nn,da={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ks.NO_ERROR=0,ks.TIMEOUT=8,ks.HTTP_ERROR=6,hi=ks,kl.COMPLETE="complete",ad=kl,Dl.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",rt.prototype.listen=rt.prototype.K,Wr=Dl,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,od=Mt}).apply(typeof ti<"u"?ti:typeof self<"u"?self:typeof window<"u"?window:{});const Su="@firebase/firestore",Pu="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}de.UNAUTHENTICATED=new de(null),de.GOOGLE_CREDENTIALS=new de("google-credentials-uid"),de.FIRST_PARTY=new de("first-party-uid"),de.MOCK_USER=new de("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sr="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new td("@firebase/firestore");function ir(){return zn.logLevel}function Y(e,...t){if(zn.logLevel<=Et.DEBUG){const n=t.map(Ya);zn.debug(`Firestore (${Sr}): ${e}`,...n)}}function on(e,...t){if(zn.logLevel<=Et.ERROR){const n=t.map(Ya);zn.error(`Firestore (${Sr}): ${e}`,...n)}}function vs(e,...t){if(zn.logLevel<=Et.WARN){const n=t.map(Ya);zn.warn(`Firestore (${Sr}): ${e}`,...n)}}function Ya(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,hd(e,r,n)}function hd(e,t,n){let r=`FIRESTORE (${Sr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw on(r),new Error(r)}function Rt(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||hd(t,s,r)}function lt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends br{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class _v{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(de.UNAUTHENTICATED))}shutdown(){}}class yv{constructor(t){this.t=t,this.currentUser=de.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Rt(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new In;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new In,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new In)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt(typeof r.accessToken=="string",31837,{l:r}),new gv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Rt(t===null||typeof t=="string",2055,{h:t}),new de(t)}}class Ev{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=de.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vv{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Ev(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(de.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cu{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tv{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ZE(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Rt(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cu(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Cu(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Iv(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ht(e,t){return e<t?-1:e>t?1:0}function pa(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return ht(r,s);{const i=fd(),a=wv(i.encode(Vu(e,n)),i.encode(Vu(t,n)));return a!==0?a:ht(r,s)}}n+=r>65535?2:1}return ht(e.length,t.length)}function Vu(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function wv(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ht(e[n],t[n]);return ht(e.length,t.length)}function vr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=-62135596800,xu=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(t){return jt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*xu);return new jt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new tt(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new tt(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Du)throw new tt(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new tt(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xu}_compareTo(t){return this.seconds===t.seconds?ht(this.nanoseconds,t.nanoseconds):ht(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Du;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{static fromTimestamp(t){return new at(t)}static min(){return new at(new jt(0,0))}static max(){return new at(new jt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu="__name__";class Fe{constructor(t,n,r){n===void 0?n=0:n>t.length&&st(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&st(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Fe.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Fe?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Fe.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ht(t.length,n.length)}static compareSegments(t,n){const r=Fe.isNumericId(t),s=Fe.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Fe.extractNumericId(t).compare(Fe.extractNumericId(n)):pa(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Tn.fromString(t.substring(4,t.length-2))}}class Vt extends Fe{construct(t,n,r){return new Vt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new tt(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Vt(n)}static emptyPath(){return new Vt([])}}const Av=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Fe{construct(t,n,r){return new Xt(t,n,r)}static isValidIdentifier(t){return Av.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nu}static keyField(){return new Xt([Nu])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new tt(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new tt(F.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new tt(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new tt(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xt(n)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t){this.path=t}static fromPath(t){return new nt(Vt.fromString(t))}static fromName(t){return new nt(Vt.fromString(t).popFirst(5))}static empty(){return new nt(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Vt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Vt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new nt(new Vt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=-1;function Rv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=at.fromTimestamp(r===1e9?new jt(n+1,0):new jt(n,r));return new bn(s,nt.empty(),t)}function bv(e){return new bn(e.readTime,e.key,Ts)}class bn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new bn(at.min(),nt.empty(),Ts)}static max(){return new bn(at.max(),nt.empty(),Ts)}}function Sv(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=nt.comparator(e.documentKey,t.documentKey),n!==0?n:ht(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Cv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pr(e){if(e.code!==F.FAILED_PRECONDITION||e.message!==Pv)throw e;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&st(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):M.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):M.reject(n)}static resolve(t){return new M((n,r)=>{n(t)})}static reject(t){return new M((n,r)=>{r(t)})}static waitFor(t){return new M((n,r)=>{let s=0,i=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(t){let n=M.resolve(!1);for(const r of t)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new M((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(t[h]).next(d=>{a[h]=d,++l,l===i&&r(a)},d=>s(d))}})}static doWhile(t,n){return new M((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function Vv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Xi.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=-1;function Yi(e){return e==null}function bi(e){return e===0&&1/e==-1/0}function Dv(e){return typeof e=="number"&&Number.isInteger(e)&&!bi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="";function xv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ou(t)),t=Nv(e.get(n),t);return Ou(t)}function Nv(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case pd:n+="";break;default:n+=i}}return n}function Ou(e){return e+pd+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Gn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function md(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t,n){this.comparator=t,this.root=n||Wt.EMPTY}insert(t,n){return new Ot(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(t){return new Ot(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ei(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ei(this.root,t,this.comparator,!1)}getReverseIterator(){return new ei(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ei(this.root,t,this.comparator,!0)}}class ei{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Wt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Wt.RED,this.left=s??Wt.EMPTY,this.right=i??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Wt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw st(43730,{key:this.key,value:this.value});if(this.right.isRed())throw st(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw st(27949);return t+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw st(57766)}get value(){throw st(16141)}get color(){throw st(16727)}get left(){throw st(29726)}get right(){throw st(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Wt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.comparator=t,this.data=new Ot(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new ku(this.data.getIterator())}getIteratorFrom(t){return new ku(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $t)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $t(this.comparator);return n.data=t,n}}class ku{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.fields=t,t.sort(Xt.comparator)}static empty(){return new De([])}unionWith(t){let n=new $t(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new De(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return vr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new gd("Invalid base64 string: "+i):i}}(t);return new Yt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(t);return new Yt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ht(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const Ov=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sn(e){if(Rt(!!e,39018),typeof e=="string"){let t=0;const n=Ov.exec(e);if(Rt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:kt(e.seconds),nanos:kt(e.nanos)}}function kt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Pn(e){return typeof e=="string"?Yt.fromBase64String(e):Yt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="server_timestamp",yd="__type__",Ed="__previous_value__",vd="__local_write_time__";function Za(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[yd])===null||n===void 0?void 0:n.stringValue)===_d}function Ji(e){const t=e.mapValue.fields[Ed];return Za(t)?Ji(t):t}function Is(e){const t=Sn(e.mapValue.fields[vd].timestampValue);return new jt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t,n,r,s,i,a,l,c,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=d}}const Si="(default)";class ws{constructor(t,n){this.projectId=t,this.database=n||Si}static empty(){return new ws("","")}get isDefaultDatabase(){return this.database===Si}isEqual(t){return t instanceof ws&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td="__type__",kv="__max__",ni={mapValue:{}},Id="__vector__",Pi="value";function Cn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Za(e)?4:Fv(e)?9007199254740991:Lv(e)?10:11:st(28295,{value:e})}function ze(e,t){if(e===t)return!0;const n=Cn(e);if(n!==Cn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Is(e).isEqual(Is(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Sn(s.timestampValue),l=Sn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Pn(s.bytesValue).isEqual(Pn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return kt(s.geoPointValue.latitude)===kt(i.geoPointValue.latitude)&&kt(s.geoPointValue.longitude)===kt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return kt(s.integerValue)===kt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=kt(s.doubleValue),l=kt(i.doubleValue);return a===l?bi(a)===bi(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return vr(e.arrayValue.values||[],t.arrayValue.values||[],ze);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Mu(a)!==Mu(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!ze(a[c],l[c])))return!1;return!0}(e,t);default:return st(52216,{left:e})}}function As(e,t){return(e.values||[]).find(n=>ze(n,t))!==void 0}function Tr(e,t){if(e===t)return 0;const n=Cn(e),r=Cn(t);if(n!==r)return ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ht(e.booleanValue,t.booleanValue);case 2:return function(i,a){const l=kt(i.integerValue||i.doubleValue),c=kt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return Lu(e.timestampValue,t.timestampValue);case 4:return Lu(Is(e),Is(t));case 5:return pa(e.stringValue,t.stringValue);case 6:return function(i,a){const l=Pn(i),c=Pn(a);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const d=ht(l[h],c[h]);if(d!==0)return d}return ht(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,a){const l=ht(kt(i.latitude),kt(a.latitude));return l!==0?l:ht(kt(i.longitude),kt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Fu(e.arrayValue,t.arrayValue);case 10:return function(i,a){var l,c,h,d;const p=i.fields||{},g=a.fields||{},E=(l=p[Pi])===null||l===void 0?void 0:l.arrayValue,V=(c=g[Pi])===null||c===void 0?void 0:c.arrayValue,D=ht(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((d=V==null?void 0:V.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:Fu(E,V)}(e.mapValue,t.mapValue);case 11:return function(i,a){if(i===ni.mapValue&&a===ni.mapValue)return 0;if(i===ni.mapValue)return 1;if(a===ni.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=a.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=pa(c[p],d[p]);if(g!==0)return g;const E=Tr(l[c[p]],h[d[p]]);if(E!==0)return E}return ht(c.length,d.length)}(e.mapValue,t.mapValue);default:throw st(23264,{Pe:n})}}function Lu(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ht(e,t);const n=Sn(e),r=Sn(t),s=ht(n.seconds,r.seconds);return s!==0?s:ht(n.nanos,r.nanos)}function Fu(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Tr(n[s],r[s]);if(i)return i}return ht(n.length,r.length)}function Ir(e){return ma(e)}function ma(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Sn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Pn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return nt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ma(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${ma(n.fields[a])}`;return s+"}"}(e.mapValue):st(61005,{value:e})}function fi(e){switch(Cn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ji(e);return t?16+fi(t):16;case 5:return 2*e.stringValue.length;case 6:return Pn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+fi(i),0)}(e.arrayValue);case 10:case 11:return function(r){let s=0;return Gn(r.fields,(i,a)=>{s+=i.length+fi(a)}),s}(e.mapValue);default:throw st(13486,{value:e})}}function ga(e){return!!e&&"integerValue"in e}function tl(e){return!!e&&"arrayValue"in e}function Bu(e){return!!e&&"nullValue"in e}function Uu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function di(e){return!!e&&"mapValue"in e}function Lv(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Td])===null||n===void 0?void 0:n.stringValue)===Id}function os(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Gn(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=os(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=os(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Fv(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===kv}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.value=t}static empty(){return new Re({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!di(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=os(n)}setAll(t){let n=Xt.emptyPath(),r={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=os(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());di(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ze(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];di(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Gn(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Re(os(this.value))}}function wd(e){const t=[];return Gn(e.fields,(n,r)=>{const s=new Xt([n]);if(di(r)){const i=wd(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)}),new De(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new re(t,0,at.min(),at.min(),at.min(),Re.empty(),0)}static newFoundDocument(t,n,r,s){return new re(t,1,n,at.min(),r,s,0)}static newNoDocument(t,n){return new re(t,2,n,at.min(),at.min(),Re.empty(),0)}static newUnknownDocument(t,n){return new re(t,3,n,at.min(),at.min(),Re.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Re.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Re.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof re&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new re(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,n){this.position=t,this.inclusive=n}}function ju(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=nt.comparator(nt.fromName(a.referenceValue),n.key):r=Tr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function $u(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ze(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,n="asc"){this.field=t,this.dir=n}}function Bv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{}class Ut extends Ad{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new jv(t,n,r):n==="array-contains"?new zv(t,r):n==="in"?new Hv(t,r):n==="not-in"?new Kv(t,r):n==="array-contains-any"?new Gv(t,r):new Ut(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new $v(t,r):new qv(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Tr(n,this.value)):n!==null&&Cn(this.value)===Cn(n)&&this.matchesComparison(Tr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return st(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class He extends Ad{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new He(t,n)}matches(t){return Rd(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Rd(e){return e.op==="and"}function bd(e){return Uv(e)&&Rd(e)}function Uv(e){for(const t of e.filters)if(t instanceof He)return!1;return!0}function _a(e){if(e instanceof Ut)return e.field.canonicalString()+e.op.toString()+Ir(e.value);if(bd(e))return e.filters.map(t=>_a(t)).join(",");{const t=e.filters.map(n=>_a(n)).join(",");return`${e.op}(${t})`}}function Sd(e,t){return e instanceof Ut?function(r,s){return s instanceof Ut&&r.op===s.op&&r.field.isEqual(s.field)&&ze(r.value,s.value)}(e,t):e instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&Sd(a,s.filters[l]),!0):!1}(e,t):void st(19439)}function Pd(e){return e instanceof Ut?function(n){return`${n.field.canonicalString()} ${n.op} ${Ir(n.value)}`}(e):e instanceof He?function(n){return n.op.toString()+" {"+n.getFilters().map(Pd).join(" ,")+"}"}(e):"Filter"}class jv extends Ut{constructor(t,n,r){super(t,n,r),this.key=nt.fromName(r.referenceValue)}matches(t){const n=nt.comparator(t.key,this.key);return this.matchesComparison(n)}}class $v extends Ut{constructor(t,n){super(t,"in",n),this.keys=Cd("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class qv extends Ut{constructor(t,n){super(t,"not-in",n),this.keys=Cd("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Cd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>nt.fromName(r.referenceValue))}class zv extends Ut{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return tl(n)&&As(n.arrayValue,this.value)}}class Hv extends Ut{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&As(this.value.arrayValue,n)}}class Kv extends Ut{constructor(t,n){super(t,"not-in",n)}matches(t){if(As(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!As(this.value.arrayValue,n)}}class Gv extends Ut{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!tl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>As(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Ie=null}}function qu(e,t=null,n=[],r=[],s=null,i=null,a=null){return new Wv(e,t,n,r,s,i,a)}function el(e){const t=lt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>_a(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Yi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Ir(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Ir(r)).join(",")),t.Ie=n}return t.Ie}function nl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Bv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Sd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$u(e.startAt,t.startAt)&&$u(e.endAt,t.endAt)}function ya(e){return nt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Qv(e,t,n,r,s,i,a,l){return new Zi(e,t,n,r,s,i,a,l)}function Vd(e){return new Zi(e)}function zu(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Xv(e){return e.collectionGroup!==null}function as(e){const t=lt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new $t(Xt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ee.push(new Vi(i,r))}),n.has(Xt.keyField().canonicalString())||t.Ee.push(new Vi(Xt.keyField(),r))}return t.Ee}function je(e){const t=lt(e);return t.de||(t.de=Yv(t,as(e))),t.de}function Yv(e,t){if(e.limitType==="F")return qu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Vi(s.field,i)});const n=e.endAt?new Ci(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ci(e.startAt.position,e.startAt.inclusive):null;return qu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ea(e,t,n){return new Zi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function to(e,t){return nl(je(e),je(t))&&e.limitType===t.limitType}function Dd(e){return`${el(je(e))}|lt:${e.limitType}`}function or(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Pd(s)).join(", ")}]`),Yi(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ir(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ir(s)).join(",")),`Target(${r})`}(je(e))}; limitType=${e.limitType})`}function eo(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):nt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of as(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(a,l,c){const h=ju(a,l,c);return a.inclusive?h<=0:h<0}(r.startAt,as(r),s)||r.endAt&&!function(a,l,c){const h=ju(a,l,c);return a.inclusive?h>=0:h>0}(r.endAt,as(r),s))}(e,t)}function Jv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xd(e){return(t,n)=>{let r=!1;for(const s of as(e)){const i=Zv(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Zv(e,t,n){const r=e.field.isKeyField()?nt.comparator(t.key,n.key):function(i,a,l){const c=a.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Tr(c,h):st(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return st(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Gn(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return md(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Ot(nt.comparator);function an(){return tT}const Nd=new Ot(nt.comparator);function Qr(...e){let t=Nd;for(const n of e)t=t.insert(n.key,n);return t}function Od(e){let t=Nd;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function jn(){return ls()}function Md(){return ls()}function ls(){return new Wn(e=>e.toString(),(e,t)=>e.isEqual(t))}const eT=new Ot(nt.comparator),nT=new $t(nt.comparator);function pt(...e){let t=nT;for(const n of e)t=t.add(n);return t}const rT=new $t(ht);function sT(){return rT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bi(t)?"-0":t}}function kd(e){return{integerValue:""+e}}function iT(e,t){return Dv(t)?kd(t):rl(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this._=void 0}}function oT(e,t,n){return e instanceof Rs?function(s,i){const a={fields:{[yd]:{stringValue:_d},[vd]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Za(i)&&(i=Ji(i)),i&&(a.fields[Ed]=i),{mapValue:a}}(n,t):e instanceof bs?Fd(e,t):e instanceof Ss?Bd(e,t):function(s,i){const a=Ld(s,i),l=Hu(a)+Hu(s.Re);return ga(a)&&ga(s.Re)?kd(l):rl(s.serializer,l)}(e,t)}function aT(e,t,n){return e instanceof bs?Fd(e,t):e instanceof Ss?Bd(e,t):n}function Ld(e,t){return e instanceof Di?function(r){return ga(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Rs extends no{}class bs extends no{constructor(t){super(),this.elements=t}}function Fd(e,t){const n=Ud(t);for(const r of e.elements)n.some(s=>ze(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ss extends no{constructor(t){super(),this.elements=t}}function Bd(e,t){let n=Ud(t);for(const r of e.elements)n=n.filter(s=>!ze(s,r));return{arrayValue:{values:n}}}class Di extends no{constructor(t,n){super(),this.serializer=t,this.Re=n}}function Hu(e){return kt(e.integerValue||e.doubleValue)}function Ud(e){return tl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(t,n){this.field=t,this.transform=n}}function cT(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof bs&&s instanceof bs||r instanceof Ss&&s instanceof Ss?vr(r.elements,s.elements,ze):r instanceof Di&&s instanceof Di?ze(r.Re,s.Re):r instanceof Rs&&s instanceof Rs}(e.transform,t.transform)}class uT{constructor(t,n){this.version=t,this.transformResults=n}}class en{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new en}static exists(t){return new en(void 0,t)}static updateTime(t){return new en(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function pi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class ro{}function jd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new qd(e.key,en.none()):new Vs(e.key,e.data,en.none());{const n=e.data,r=Re.empty();let s=new $t(Xt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Qn(e.key,r,new De(s.toArray()),en.none())}}function hT(e,t,n){e instanceof Vs?function(s,i,a){const l=s.value.clone(),c=Gu(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Qn?function(s,i,a){if(!pi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Gu(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll($d(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function cs(e,t,n,r){return e instanceof Vs?function(i,a,l,c){if(!pi(i.precondition,a))return l;const h=i.value.clone(),d=Wu(i.fieldTransforms,c,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,r):e instanceof Qn?function(i,a,l,c){if(!pi(i.precondition,a))return l;const h=Wu(i.fieldTransforms,c,a),d=a.data;return d.setAll($d(i)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(e,t,n,r):function(i,a,l){return pi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function fT(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=Ld(r.transform,s||null);i!=null&&(n===null&&(n=Re.empty()),n.set(r.field,i))}return n||null}function Ku(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vr(r,s,(i,a)=>cT(i,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Vs extends ro{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Qn extends ro{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function $d(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Gu(e,t,n){const r=new Map;Rt(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,aT(a,l,n[s]))}return r}function Wu(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,oT(i,a,t))}return r}class qd extends ro{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dT extends ro{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&hT(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=cs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=cs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Md();return this.mutations.forEach(s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=jd(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(at.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),pt())}isEqual(t){return this.batchId===t.batchId&&vr(this.mutations,t.mutations,(n,r)=>Ku(n,r))&&vr(this.baseMutations,t.baseMutations,(n,r)=>Ku(n,r))}}class sl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){Rt(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let s=function(){return eT}();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new sl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,yt;function _T(e){switch(e){case F.OK:return st(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return st(15467,{code:e})}}function zd(e){if(e===void 0)return on("GRPC error has no .code"),F.UNKNOWN;switch(e){case Ft.OK:return F.OK;case Ft.CANCELLED:return F.CANCELLED;case Ft.UNKNOWN:return F.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return F.INTERNAL;case Ft.UNAVAILABLE:return F.UNAVAILABLE;case Ft.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ft.NOT_FOUND:return F.NOT_FOUND;case Ft.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ft.ABORTED:return F.ABORTED;case Ft.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ft.DATA_LOSS:return F.DATA_LOSS;default:return st(39323,{code:e})}}(yt=Ft||(Ft={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=new Tn([4294967295,4294967295],0);function Qu(e){const t=fd().encode(e),n=new id;return n.update(t),new Uint8Array(n.digest())}function Xu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Tn([n,r],0),new Tn([s,i],0)]}class il{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xr(`Invalid padding: ${n}`);if(r<0)throw new Xr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Xr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Xr(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Tn.fromNumber(this.pe)}we(t,n,r){let s=t.add(n.multiply(Tn.fromNumber(r)));return s.compare(yT)===1&&(s=new Tn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=Qu(t),[r,s]=Xu(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);if(!this.be(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new il(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(t){if(this.pe===0)return;const n=Qu(t),[r,s]=Xu(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Xr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Ds.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new so(at.min(),s,new Ot(ht),an(),pt())}}class Ds{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Ds(r,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,n,r,s){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=s}}class Hd{constructor(t,n){this.targetId=t,this.Ce=n}}class Kd{constructor(t,n,r=Yt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Yu{constructor(){this.Fe=0,this.Me=Ju(),this.xe=Yt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=pt(),n=pt(),r=pt();return this.Me.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:st(38017,{changeType:i})}}),new Ds(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=Ju()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Rt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class ET{constructor(t){this.ze=t,this.je=new Map,this.He=an(),this.Je=ri(),this.Ye=ri(),this.Ze=new Ot(ht)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:st(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(t){const n=t.targetId,r=t.Ce.count,s=this._t(n);if(s){const i=s.target;if(ya(i))if(r===0){const a=new nt(i.path);this.tt(n,a,re.newNoDocument(a,at.min()))}else Rt(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const l=this.ct(t),c=l?this.lt(l,t,a):1;if(c!==0){this.st(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Pn(r).toUint8Array()}catch(c){if(c instanceof gd)return vs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new il(a,s,i)}catch(c){return vs(c instanceof Xr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(t){const n=new Map;this.je.forEach((i,a)=>{const l=this._t(a);if(l){if(i.current&&ya(l.target)){const c=new nt(l.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,re.newNoDocument(c,t))}i.Le&&(n.set(a,i.qe()),i.Qe())}});let r=pt();this.Ye.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const h=this._t(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,a)=>a.setReadTime(t));const s=new so(t,n,this.Ze,this.He,r);return this.He=an(),this.Je=ri(),this.Ye=ri(),this.Ze=new Ot(ht),s}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const s=this.rt(t);this.dt(t,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new Yu,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new $t(ht),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new $t(ht),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new Yu),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function ri(){return new Ot(nt.comparator)}function Ju(){return new Ot(nt.comparator)}const vT={asc:"ASCENDING",desc:"DESCENDING"},TT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IT={and:"AND",or:"OR"};class wT{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function va(e,t){return e.useProto3Json||Yi(t)?t:{value:t}}function xi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function AT(e,t){return xi(e,t.toTimestamp())}function $e(e){return Rt(!!e,49232),at.fromTimestamp(function(n){const r=Sn(n);return new jt(r.seconds,r.nanos)}(e))}function ol(e,t){return Ta(e,t).canonicalString()}function Ta(e,t){const n=function(s){return new Vt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Wd(e){const t=Vt.fromString(e);return Rt(Zd(t),10190,{key:t.toString()}),t}function Ia(e,t){return ol(e.databaseId,t.path)}function qo(e,t){const n=Wd(t);if(n.get(1)!==e.databaseId.projectId)throw new tt(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new tt(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new nt(Xd(n))}function Qd(e,t){return ol(e.databaseId,t)}function RT(e){const t=Wd(e);return t.length===4?Vt.emptyPath():Xd(t)}function wa(e){return new Vt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xd(e){return Rt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Zu(e,t,n){return{name:Ia(e,t),fields:n.value.mapValue.fields}}function bT(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:st(39313,{state:h})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(Rt(d===void 0||typeof d=="string",58123),Yt.fromBase64String(d||"")):(Rt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Yt.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?F.UNKNOWN:zd(h.code);return new tt(d,h.message||"")}(a);n=new Kd(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=qo(e,r.document.name),i=$e(r.document.updateTime),a=r.document.createTime?$e(r.document.createTime):at.min(),l=new Re({mapValue:{fields:r.document.fields}}),c=re.newFoundDocument(s,i,a,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new mi(h,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=qo(e,r.document),i=r.readTime?$e(r.readTime):at.min(),a=re.newNoDocument(s,i),l=r.removedTargetIds||[];n=new mi([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=qo(e,r.document),i=r.removedTargetIds||[];n=new mi([],i,s,null)}else{if(!("filter"in t))return st(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new gT(s,i),l=r.targetId;n=new Hd(l,a)}}return n}function ST(e,t){let n;if(t instanceof Vs)n={update:Zu(e,t.key,t.value)};else if(t instanceof qd)n={delete:Ia(e,t.key)};else if(t instanceof Qn)n={update:Zu(e,t.key,t.data),updateMask:kT(t.fieldMask)};else{if(!(t instanceof dT))return st(16599,{ft:t.type});n={verify:Ia(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Rs)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof bs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ss)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Di)return{fieldPath:a.field.canonicalString(),increment:l.Re};throw st(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:AT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:st(27497)}(e,t.precondition)),n}function PT(e,t){return e&&e.length>0?(Rt(t!==void 0,14353),e.map(n=>function(s,i){let a=s.updateTime?$e(s.updateTime):$e(i);return a.isEqual(at.min())&&(a=$e(i)),new uT(a,s.transformResults||[])}(n,t))):[]}function CT(e,t){return{documents:[Qd(e,t.path)]}}function VT(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Qd(e,s);const i=function(h){if(h.length!==0)return Jd(He.create(h,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(d=>function(g){return{field:ar(g.field),direction:NT(g.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=va(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{gt:n,parent:s}}function DT(e){let t=RT(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Rt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=function(p){const g=Yd(p);return g instanceof He&&bd(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(V){return new Vi(lr(V.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Yi(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,E=p.values||[];return new Ci(E,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,E=p.values||[];return new Ci(E,g)}(n.endAt)),Qv(t,s,a,i,l,"F",c,h)}function xT(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Yd(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lr(n.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=lr(n.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=lr(n.unaryFilter.field);return Ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=lr(n.unaryFilter.field);return Ut.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return st(61313);default:return st(60726)}}(e):e.fieldFilter!==void 0?function(n){return Ut.create(lr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return st(58110);default:return st(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return He.create(n.compositeFilter.filters.map(r=>Yd(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return st(1026)}}(n.compositeFilter.op))}(e):st(30097,{filter:e})}function NT(e){return vT[e]}function OT(e){return TT[e]}function MT(e){return IT[e]}function ar(e){return{fieldPath:e.canonicalString()}}function lr(e){return Xt.fromServerFormat(e.fieldPath)}function Jd(e){return e instanceof Ut?function(n){if(n.op==="=="){if(Uu(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NAN"}};if(Bu(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Uu(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NOT_NAN"}};if(Bu(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ar(n.field),op:OT(n.op),value:n.value}}}(e):e instanceof He?function(n){const r=n.getFilters().map(s=>Jd(s));return r.length===1?r[0]:{compositeFilter:{op:MT(n.op),filters:r}}}(e):st(54877,{filter:e})}function kT(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Zd(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,n,r,s,i=at.min(),a=at.min(),l=Yt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new yn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(t){this.wt=t}}function FT(e){const t=DT({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ea(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.Cn=new UT}addToCollectionParentIndex(t,n){return this.Cn.add(n),M.resolve()}getCollectionParents(t,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return M.resolve()}deleteFieldIndex(t,n){return M.resolve()}deleteAllFieldIndexes(t){return M.resolve()}createTargetIndexes(t,n){return M.resolve()}getDocumentsMatchingTarget(t,n){return M.resolve(null)}getIndexType(t,n){return M.resolve(0)}getFieldIndexes(t,n){return M.resolve([])}getNextCollectionGroupToUpdate(t){return M.resolve(null)}getMinOffset(t,n){return M.resolve(bn.min())}getMinOffsetFromCollectionGroup(t,n){return M.resolve(bn.min())}updateCollectionGroup(t,n,r){return M.resolve()}updateIndexEntries(t,n){return M.resolve()}}class UT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new $t(Vt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new $t(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tp=41943040;class pe{static withCacheSize(t){return new pe(t,pe.DEFAULT_COLLECTION_PERCENTILE,pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pe.DEFAULT_COLLECTION_PERCENTILE=10,pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pe.DEFAULT=new pe(tp,pe.DEFAULT_COLLECTION_PERCENTILE,pe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pe.DISABLED=new pe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new wr(0)}static lr(){return new wr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="LruGarbageCollector",ep=1048576;function nh([e,t],[n,r]){const s=ht(e,n);return s===0?ht(t,r):s}class jT{constructor(t){this.Er=t,this.buffer=new $t(nh),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();nh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $T{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){Y(eh,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cr(n)?Y(eh,"Ignoring IndexedDB error during garbage collection: ",n):await Pr(n)}await this.mr(3e5)})}}class qT{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return M.resolve(Xi.le);const r=new jT(n);return this.gr.forEachTarget(t,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(t,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(th)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),th):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,s,i,a,l,c,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(t,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(t,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(t,r))).next(p=>(h=Date.now(),ir()<=Et.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function zT(e,t){return new qT(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.changes=new Wn(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,re.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&cs(r.mutation,s,De.empty(),jt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,pt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=pt()){const s=jn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let a=Qr();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=jn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,pt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,r,s){let i=an();const a=ls(),l=function(){return ls()}();return n.forEach((c,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof Qn)?i=i.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),cs(d.mutation,h,d.mutation.getFieldMask(),jt.now())):a.set(h.key,De.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>{var p;return l.set(h,new KT(d,(p=a.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(t,n){const r=ls();let s=new Ot((a,l)=>a-l),i=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let d=r.get(c)||De.empty();d=l.applyToLocalView(h,d),r.set(c,d);const p=(s.get(l.batchId)||pt()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,d=c.value,p=Md();d.forEach(g=>{if(!i.has(g)){const E=jd(n.get(g),r.get(g));E!==null&&p.set(g,E),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return M.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(a){return nt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Xv(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):M.resolve(jn());let l=Ts,c=i;return a.next(h=>M.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(t,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(t,h,i)).next(()=>this.computeViews(t,c,h,pt())).next(d=>({batchId:l,changes:Od(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new nt(n)).next(r=>{let s=Qr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=Qr();return this.indexManager.getCollectionParents(t,i).next(l=>M.forEach(l,c=>{const h=function(p,g){return new Zi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,h,r,s).next(d=>{d.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(a=>{i.forEach((c,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,re.newInvalidDocument(d)))});let l=Qr();return a.forEach((c,h)=>{const d=i.get(c);d!==void 0&&cs(d.mutation,h,De.empty(),jt.now()),eo(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return M.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:$e(s.createTime)}}(n)),M.resolve()}getNamedQuery(t,n){return M.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(s){return{name:s.name,query:FT(s.bundledQuery),readTime:$e(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.overlays=new Ot(nt.comparator),this.Qr=new Map}getOverlay(t,n){return M.resolve(this.overlays.get(n))}getOverlays(t,n){const r=jn();return M.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.St(t,n,i)}),M.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),M.resolve()}getOverlaysForCollection(t,n,r){const s=jn(),i=n.length+1,a=new nt(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return M.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Ot((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=jn(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=jn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return M.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new mT(n,r));let i=this.Qr.get(n);i===void 0&&(i=pt(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(t){return M.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.$r=new $t(qt.Ur),this.Kr=new $t(qt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new qt(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new qt(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new nt(new Vt([])),r=new qt(n,t),s=new qt(n,t+1),i=[];return this.Kr.forEachInRange([r,s],a=>{this.zr(a),i.push(a.key)}),i}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new nt(new Vt([])),r=new qt(n,t),s=new qt(n,t+1);let i=pt();return this.Kr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(t){const n=new qt(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class qt{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return nt.comparator(t.key,n.key)||ht(t.Zr,n.Zr)}static Wr(t,n){return ht(t.Zr,n.Zr)||nt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $t(qt.Ur)}checkEmpty(t){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new pT(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Xr=this.Xr.add(new qt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(t,n){return M.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Ja:this.nr-1)}getAllMutationBatches(t){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new qt(n,0),s=new qt(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],a=>{const l=this.ei(a.Zr);i.push(l)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $t(ht);return n.forEach(s=>{const i=new qt(s,0),a=new qt(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,a],l=>{r=r.add(l.Zr)})}),M.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;nt.isDocumentKey(i)||(i=i.child(""));const a=new qt(new nt(i),0);let l=new $t(ht);return this.Xr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.Zr)),!0)},a),M.resolve(this.ni(l))}ni(t){const n=[];return t.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){Rt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return M.forEach(n.mutations,s=>{const i=new qt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new qt(n,0),s=this.Xr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,M.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(t){this.ii=t,this.docs=function(){return new Ot(nt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():re.newInvalidDocument(n))}getEntries(t,n){let r=an();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():re.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=an();const a=n.path,l=new nt(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Sv(bv(d),r)<=0||(s.has(d.key)||eo(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(t,n,r,s){st(9500)}si(t,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new ZT(this)}getSize(t){return M.resolve(this.size)}}class ZT extends HT{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(t,s)):this.Br.removeEntry(r)}),M.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t){this.persistence=t,this.oi=new Wn(n=>el(n),nl),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this._i=0,this.ai=new al,this.targetCount=0,this.ui=wr.cr()}forEachTarget(t,n){return this.oi.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(t){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return M.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),M.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new wr(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,M.resolve()}updateTargetData(t,n){return this.Tr(n),M.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(t){return M.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return M.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),M.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(t,a))}),M.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),M.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return M.resolve(r)}containsKey(t,n){return M.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(t,n){this.ci={},this.overlays={},this.li=new Xi(0),this.hi=!1,this.hi=!0,this.Pi=new XT,this.referenceDelegate=t(this),this.Ti=new tI(this),this.indexManager=new BT,this.remoteDocumentCache=function(s){return new JT(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new LT(n),this.Ei=new WT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new QT,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new YT(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){Y("MemoryPersistence","Starting transaction:",t);const s=new eI(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(t,n){return M.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class eI extends Cv{constructor(t){super(),this.currentSequenceNumber=t}}class ll{constructor(t){this.persistence=t,this.Vi=new al,this.mi=null}static fi(t){return new ll(t)}get gi(){if(this.mi)return this.mi;throw st(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),M.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),M.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.gi,r=>{const s=nt.fromPath(r);return this.pi(t,s).next(i=>{i||n.removeEntry(s,at.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return M.or([()=>M.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Ni{constructor(t,n){this.persistence=t,this.yi=new Wn(r=>xv(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=zT(this,n)}static fi(t,n){return new Ni(t,n)}di(){}Ai(t){return M.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(s=>r+s))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return M.forEach(this.yi,(r,s)=>this.Dr(t,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(t,a=>this.Dr(t,a,n).next(l=>{l||(r++,i.removeEntry(a,at.min()))})).next(()=>i.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),M.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),M.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),M.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),M.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=fi(t.data.value)),n}Dr(t,n,r){return M.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.yi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ds=r,this.As=s}static Rs(t,n){let r=pt(),s=pt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new cl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Qy()?8:Vv(Gy())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ws(t,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.bs(t,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new nI;return this.Ss(t,n,a).next(l=>{if(i.result=l,this.fs)return this.Ds(t,n,a,l.size)})}).next(()=>i.result)}Ds(t,n,r,s){return r.documentReadCount<this.gs?(ir()<=Et.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",or(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),M.resolve()):(ir()<=Et.DEBUG&&Y("QueryEngine","Query:",or(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(ir()<=Et.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",or(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,je(n))):M.resolve())}ws(t,n){if(zu(n))return M.resolve(null);let r=je(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ea(n,null,"F"),r=je(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const a=pt(...i);return this.ys.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,r).next(c=>{const h=this.vs(n,l);return this.Cs(n,h,a,c.readTime)?this.ws(t,Ea(n,null,"F")):this.Fs(t,h,n,c)}))})))}bs(t,n,r,s){return zu(n)||s.isEqual(at.min())?M.resolve(null):this.ys.getDocuments(t,r).next(i=>{const a=this.vs(n,i);return this.Cs(n,a,r,s)?M.resolve(null):(ir()<=Et.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),or(n)),this.Fs(t,a,n,Rv(s,Ts)).next(l=>l))})}vs(t,n){let r=new $t(xd(t));return n.forEach((s,i)=>{eo(t,i)&&(r=r.add(i))}),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return ir()<=Et.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",or(n)),this.ys.getDocumentsMatchingQuery(t,n,bn.min(),r)}Fs(t,n,r,s){return this.ys.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul="LocalStore",sI=3e8;class iI{constructor(t,n,r,s){this.persistence=t,this.Ms=n,this.serializer=s,this.xs=new Ot(ht),this.Os=new Wn(i=>el(i),nl),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new GT(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function oI(e,t,n,r){return new iI(e,t,n,r)}async function rp(e,t){const n=lt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=pt();for(const h of s){a.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(h=>({ks:h,removedBatchIds:a,addedBatchIds:l}))})})}function aI(e,t){const n=lt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,d){const p=h.batch,g=p.keys();let E=M.resolve();return g.forEach(V=>{E=E.next(()=>d.getEntry(c,V)).next(D=>{const k=h.docVersions.get(V);Rt(k!==null,48541),D.version.compareTo(k)<0&&(p.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),d.addEntry(D)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=pt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function sp(e){const t=lt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function lI(e,t){const n=lt(e),r=t.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const l=[];t.targetChanges.forEach((d,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ti.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(i,d.addedDocuments,p)));let E=g.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?E=E.withResumeToken(Yt.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):d.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(d.resumeToken,r)),s=s.insert(p,E),function(D,k,H){return D.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=sI?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(g,E,d)&&l.push(n.Ti.updateTargetData(i,E))});let c=an(),h=pt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(cI(i,a,t.documentUpdates).next(d=>{c=d.qs,h=d.Qs})),!r.isEqual(at.min())){const d=n.Ti.getLastRemoteSnapshotVersion(i).next(p=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return M.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.xs=s,i))}function cI(e,t,n){let r=pt(),s=pt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let a=an();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(at.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):Y(ul,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{qs:a,Qs:s}})}function uI(e,t){const n=lt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Ja),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function hI(e,t){const n=lt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,t).next(i=>i?(s=i,M.resolve(s)):n.Ti.allocateTargetId(r).next(a=>(s=new yn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function Aa(e,t,n){const r=lt(e),s=r.xs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Cr(a))throw a;Y(ul,`Failed to update sequence numbers for target ${t}: ${a}`)}r.xs=r.xs.remove(t),r.Os.delete(s.target)}function rh(e,t,n){const r=lt(e);let s=at.min(),i=pt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,d){const p=lt(c),g=p.Os.get(d);return g!==void 0?M.resolve(p.xs.get(g)):p.Ti.getTargetData(h,d)}(r,a,je(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(a,t,n?s:at.min(),n?i:pt())).next(l=>(fI(r,Jv(t),l),{documents:l,$s:i})))}function fI(e,t,n){let r=e.Ns.get(t)||at.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.Ns.set(t,r)}class sh{constructor(){this.activeTargetIds=sT()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class dI{constructor(){this.xo=new sh,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new sh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="ConnectivityMonitor";class oh{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Y(ih,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){Y(ih,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let si=null;function Ra(){return si===null?si=function(){return 268435456+Math.round(2147483648*Math.random())}():si++,"0x"+si.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="RestConnection",mI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gI{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Si?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(t,n,r,s,i){const a=Ra(),l=this.jo(t,n.toUriEncodedString());Y(zo,`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,s,i);const{host:h}=new URL(l),d=Jf(h);return this.Jo(t,l,c,r,d).then(p=>(Y(zo,`Received RPC '${t}' ${a}: `,p),p),p=>{throw vs(zo,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",r),p})}Yo(t,n,r,s,i,a){return this.zo(t,n,r,s,i)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>t[i]=s),r&&r.headers.forEach((s,i)=>t[i]=s)}jo(t,n){const r=mI[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee="WebChannelConnection";class yI extends gI{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=Ra();return new Promise((l,c)=>{const h=new od;h.setWithCredentials(!0),h.listenOnce(ad.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case hi.NO_ERROR:const p=h.getResponseJson();Y(ee,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case hi.TIMEOUT:Y(ee,`RPC '${t}' ${a} timed out`),c(new tt(F.DEADLINE_EXCEEDED,"Request time out"));break;case hi.HTTP_ERROR:const g=h.getStatus();if(Y(ee,`RPC '${t}' ${a} failed with status:`,g,"response text:",h.getResponseText()),g>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const V=E==null?void 0:E.error;if(V&&V.status&&V.message){const D=function(H){const U=H.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(U)>=0?U:F.UNKNOWN}(V.status);c(new tt(D,V.message))}else c(new tt(F.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new tt(F.UNAVAILABLE,"Connection failed."));break;default:st(9055,{h_:t,streamId:a,P_:h.getLastErrorCode(),T_:h.getLastError()})}}finally{Y(ee,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);Y(ee,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",d,r,15)})}I_(t,n,r){const s=Ra(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=ud(),l=cd(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");Y(ee,`Creating RPC '${t}' stream ${s}: ${d}`,c);const p=a.createWebChannel(d,c);this.E_(p);let g=!1,E=!1;const V=new _I({Zo:k=>{E?Y(ee,`Not sending because RPC '${t}' stream ${s} is closed:`,k):(g||(Y(ee,`Opening RPC '${t}' stream ${s} transport.`),p.open(),g=!0),Y(ee,`RPC '${t}' stream ${s} sending:`,k),p.send(k))},Xo:()=>p.close()}),D=(k,H,U)=>{k.listen(H,z=>{try{U(z)}catch(K){setTimeout(()=>{throw K},0)}})};return D(p,Wr.EventType.OPEN,()=>{E||(Y(ee,`RPC '${t}' stream ${s} transport opened.`),V.__())}),D(p,Wr.EventType.CLOSE,()=>{E||(E=!0,Y(ee,`RPC '${t}' stream ${s} transport closed`),V.u_(),this.d_(p))}),D(p,Wr.EventType.ERROR,k=>{E||(E=!0,vs(ee,`RPC '${t}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),V.u_(new tt(F.UNAVAILABLE,"The operation could not be completed")))}),D(p,Wr.EventType.MESSAGE,k=>{var H;if(!E){const U=k.data[0];Rt(!!U,16349);const z=U,K=(z==null?void 0:z.error)||((H=z[0])===null||H===void 0?void 0:H.error);if(K){Y(ee,`RPC '${t}' stream ${s} received error:`,K);const ft=K.status;let mt=function(I){const A=Ft[I];if(A!==void 0)return zd(A)}(ft),w=K.message;mt===void 0&&(mt=F.INTERNAL,w="Unknown error status: "+ft+" with message "+K.message),E=!0,V.u_(new tt(mt,w)),p.close()}else Y(ee,`RPC '${t}' stream ${s} received:`,U),V.c_(U)}}),D(l,ld.STAT_EVENT,k=>{k.stat===da.PROXY?Y(ee,`RPC '${t}' stream ${s} detected buffering proxy`):k.stat===da.NOPROXY&&Y(ee,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{V.a_()},0),V}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Ho(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(e){return new wT(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t,n,r=1e3,s=1.5,i=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="PersistentStream";class op{constructor(t,n,r,s,i,a,l,c){this.xi=t,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new ip(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(on(n.toString()),on("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{t(()=>{const s=new tt(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return Y(ah,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(Y(ah,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EI extends op{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=bT(this.serializer,t),r=function(i){if(!("targetChange"in i))return at.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?at.min():a.readTime?$e(a.readTime):at.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=wa(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=ya(c)?{documents:CT(i,c)}:{query:VT(i,c).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Gd(i,a.resumeToken);const h=va(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(at.min())>0){l.readTime=xi(i,a.snapshotVersion.toTimestamp());const h=va(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const r=xT(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=wa(this.serializer),n.removeTarget=t,this.Q_(n)}}class vI extends op{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return Rt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Rt(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){Rt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=PT(t.writeResults,t.commitTime),r=$e(t.commitTime);return this.listener.ra(r,n)}ia(){const t={};t.database=wa(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>ST(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{}class II extends TI{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new tt(F.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.zo(t,Ta(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new tt(F.UNKNOWN,i.toString())})}Yo(t,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(t,Ta(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new tt(F.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class wI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(on(n),this.ua=!1):Y("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="RemoteStore";class AI{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(a=>{r.enqueueAndForget(async()=>{Xn(this)&&(Y(Hn,"Restarting streams for network reachability change."),await async function(c){const h=lt(c);h.da.add(4),await xs(h),h.Va.set("Unknown"),h.da.delete(4),await oo(h)}(this))})}),this.Va=new wI(r,s)}}async function oo(e){if(Xn(e))for(const t of e.Aa)await t(!0)}async function xs(e){for(const t of e.Aa)await t(!1)}function ap(e,t){const n=lt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),pl(n)?dl(n):Vr(n).N_()&&fl(n,t))}function hl(e,t){const n=lt(e),r=Vr(n);n.Ea.delete(t),r.N_()&&lp(n,t),n.Ea.size===0&&(r.N_()?r.k_():Xn(n)&&n.Va.set("Unknown"))}function fl(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(at.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Vr(e).Z_(t)}function lp(e,t){e.ma.Ke(t),Vr(e).X_(t)}function dl(e){e.ma=new ET({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Vr(e).start(),e.Va.ca()}function pl(e){return Xn(e)&&!Vr(e).O_()&&e.Ea.size>0}function Xn(e){return lt(e).da.size===0}function cp(e){e.ma=void 0}async function RI(e){e.Va.set("Online")}async function bI(e){e.Ea.forEach((t,n)=>{fl(e,t)})}async function SI(e,t){cp(e),pl(e)?(e.Va.Pa(t),dl(e)):e.Va.set("Unknown")}async function PI(e,t,n){if(e.Va.set("Online"),t instanceof Kd&&t.state===2&&t.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ea.delete(l),s.ma.removeTarget(l))}(e,t)}catch(r){Y(Hn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Oi(e,r)}else if(t instanceof mi?e.ma.Xe(t):t instanceof Hd?e.ma.ot(t):e.ma.nt(t),!n.isEqual(at.min()))try{const r=await sp(e.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.ma.It(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ea.get(h);d&&i.Ea.set(h,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{const d=i.Ea.get(c);if(!d)return;i.Ea.set(c,d.withResumeToken(Yt.EMPTY_BYTE_STRING,d.snapshotVersion)),lp(i,c);const p=new yn(d.target,c,h,d.sequenceNumber);fl(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(r){Y(Hn,"Failed to raise snapshot:",r),await Oi(e,r)}}async function Oi(e,t,n){if(!Cr(t))throw t;e.da.add(1),await xs(e),e.Va.set("Offline"),n||(n=()=>sp(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Y(Hn,"Retrying IndexedDB access"),await n(),e.da.delete(1),await oo(e)})}function up(e,t){return t().catch(n=>Oi(e,n,t))}async function ao(e){const t=lt(e),n=Vn(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Ja;for(;CI(t);)try{const s=await uI(t.localStore,r);if(s===null){t.Ia.length===0&&n.k_();break}r=s.batchId,VI(t,s)}catch(s){await Oi(t,s)}hp(t)&&fp(t)}function CI(e){return Xn(e)&&e.Ia.length<10}function VI(e,t){e.Ia.push(t);const n=Vn(e);n.N_()&&n.ea&&n.ta(t.mutations)}function hp(e){return Xn(e)&&!Vn(e).O_()&&e.Ia.length>0}function fp(e){Vn(e).start()}async function DI(e){Vn(e).ia()}async function xI(e){const t=Vn(e);for(const n of e.Ia)t.ta(n.mutations)}async function NI(e,t,n){const r=e.Ia.shift(),s=sl.from(r,t,n);await up(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await ao(e)}async function OI(e,t){t&&Vn(e).ea&&await async function(r,s){if(function(a){return _T(a)&&a!==F.ABORTED}(s.code)){const i=r.Ia.shift();Vn(r).L_(),await up(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ao(r)}}(e,t),hp(e)&&fp(e)}async function lh(e,t){const n=lt(e);n.asyncQueue.verifyOperationInProgress(),Y(Hn,"RemoteStore received new credentials");const r=Xn(n);n.da.add(3),await xs(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await oo(n)}async function MI(e,t){const n=lt(e);t?(n.da.delete(2),await oo(n)):t||(n.da.add(2),await xs(n),n.Va.set("Unknown"))}function Vr(e){return e.fa||(e.fa=function(n,r,s){const i=lt(n);return i.oa(),new EI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{e_:RI.bind(null,e),n_:bI.bind(null,e),i_:SI.bind(null,e),Y_:PI.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),pl(e)?dl(e):e.Va.set("Unknown")):(await e.fa.stop(),cp(e))})),e.fa}function Vn(e){return e.ga||(e.ga=function(n,r,s){const i=lt(n);return i.oa(),new vI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:DI.bind(null,e),i_:OI.bind(null,e),na:xI.bind(null,e),ra:NI.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await ao(e)):(await e.ga.stop(),e.Ia.length>0&&(Y(Hn,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new ml(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(F.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gl(e,t){if(on("AsyncQueue",`${t}: ${e}`),Cr(e))return new tt(F.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{static emptySet(t){return new gr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||nt.comparator(n.key,r.key):(n,r)=>nt.comparator(n.key,r.key),this.keyedMap=Qr(),this.sortedSet=new Ot(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof gr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new gr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this.pa=new Ot(nt.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):st(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class Ar{constructor(t,n,r,s,i,a,l,c,h){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ar(t,n,gr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&to(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class LI{constructor(){this.queries=uh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=lt(n),i=s.queries;s.queries=uh(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new tt(F.ABORTED,"Firestore shutting down"))}}function uh(){return new Wn(e=>Dd(e),to)}async function FI(e,t){const n=lt(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Da()&&t.va()&&(r=2):(i=new kI,r=t.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=gl(a,`Initialization of query '${or(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.Fa(n.onlineState),i.ba&&t.Ma(i.ba)&&_l(n)}async function BI(e,t){const n=lt(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.va()?0:1:!i.Da()&&t.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function UI(e,t){const n=lt(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Ma(s)&&(r=!0);a.ba=s}}r&&_l(n)}function jI(e,t,n){const r=lt(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function _l(e){e.Ca.forEach(t=>{t.next()})}var ba,hh;(hh=ba||(ba={})).xa="default",hh.Cache="cache";class $I{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Ar(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=Ar.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==ba.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(t){this.key=t}}class pp{constructor(t){this.key=t}}class qI{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.Za=xd(t),this.Xa=new gr(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new ch,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,p)=>{const g=s.get(d),E=eo(this.query,p)?p:null,V=!!g&&this.mutatedKeys.has(g.key),D=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let k=!1;g&&E?g.data.isEqual(E.data)?V!==D&&(r.track({type:3,doc:E}),k=!0):this.ru(g,E)||(r.track({type:2,doc:E}),k=!0,(c&&this.Za(E,c)>0||h&&this.Za(E,h)<0)&&(l=!0)):!g&&E?(r.track({type:0,doc:E}),k=!0):g&&!E&&(r.track({type:1,doc:g}),k=!0,(c||h)&&(l=!0)),k&&(E?(a=a.add(E),i=D?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Xa:a,nu:r,Cs:l,mutatedKeys:i}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const a=t.nu.wa();a.sort((d,p)=>function(E,V){const D=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st(20277,{Vt:k})}};return D(E)-D(V)}(d.type,p.type)||this.Za(d.doc,p.doc)),this.iu(r),s=s!=null&&s;const l=n&&!s?this.su():[],c=this.Ya.size===0&&this.current&&!s?1:0,h=c!==this.Ja;return this.Ja=c,a.length!==0||h?{snapshot:new Ar(this.query,t.Xa,i,a,t.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new ch,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=pt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new pp(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new dp(r))}),n}au(t){this.Ha=t.$s,this.Ya=pt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return Ar.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const yl="SyncEngine";class zI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class HI{constructor(t){this.key=t,this.cu=!1}}class KI{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new Wn(l=>Dd(l),to),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ot(nt.comparator),this.Eu=new Map,this.du=new al,this.Au={},this.Ru=new Map,this.Vu=wr.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function GI(e,t,n=!0){const r=vp(e);let s;const i=r.hu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await mp(r,t,n,!0),s}async function WI(e,t){const n=vp(e);await mp(n,t,!0,!1)}async function mp(e,t,n,r){const s=await hI(e.localStore,je(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await QI(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&ap(e.remoteStore,s),l}async function QI(e,t,n,r,s){e.fu=(p,g,E)=>async function(D,k,H,U){let z=k.view.tu(H);z.Cs&&(z=await rh(D.localStore,k.query,!1).then(({documents:w})=>k.view.tu(w,z)));const K=U&&U.targetChanges.get(k.targetId),ft=U&&U.targetMismatches.get(k.targetId)!=null,mt=k.view.applyChanges(z,D.isPrimaryClient,K,ft);return dh(D,k.targetId,mt.ou),mt.snapshot}(e,p,g,E);const i=await rh(e.localStore,t,!0),a=new qI(t,i.$s),l=a.tu(i.documents),c=Ds.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,c);dh(e,n,h.ou);const d=new zI(t,n,a);return e.hu.set(t,d),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),h.snapshot}async function XI(e,t,n){const r=lt(e),s=r.hu.get(t),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(a=>!to(a,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Aa(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&hl(r.remoteStore,s.targetId),Sa(r,s.targetId)}).catch(Pr)):(Sa(r,s.targetId),await Aa(r.localStore,s.targetId,!0))}async function YI(e,t){const n=lt(e),r=n.hu.get(t),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hl(n.remoteStore,r.targetId))}async function JI(e,t,n){const r=iw(e);try{const s=await function(a,l){const c=lt(a),h=jt.now(),d=l.reduce((E,V)=>E.add(V.key),pt());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let V=an(),D=pt();return c.Bs.getEntries(E,d).next(k=>{V=k,V.forEach((H,U)=>{U.isValidDocument()||(D=D.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,V)).next(k=>{p=k;const H=[];for(const U of l){const z=fT(U,p.get(U.key).overlayedDocument);z!=null&&H.push(new Qn(U.key,z,wd(z.value.mapValue),en.exists(!0)))}return c.mutationQueue.addMutationBatch(E,h,H,l)}).next(k=>{g=k;const H=k.applyToLocalDocumentSet(p,D);return c.documentOverlayCache.saveOverlays(E,k.batchId,H)})}).then(()=>({batchId:g.batchId,changes:Od(p)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let h=a.Au[a.currentUser.toKey()];h||(h=new Ot(ht)),h=h.insert(l,c),a.Au[a.currentUser.toKey()]=h}(r,s.batchId,n),await Ns(r,s.changes),await ao(r.remoteStore)}catch(s){const i=gl(s,"Failed to persist write");n.reject(i)}}async function gp(e,t){const n=lt(e);try{const r=await lI(n.localStore,t);t.targetChanges.forEach((s,i)=>{const a=n.Eu.get(i);a&&(Rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.cu=!0:s.modifiedDocuments.size>0?Rt(a.cu,14607):s.removedDocuments.size>0&&(Rt(a.cu,42227),a.cu=!1))}),await Ns(n,r,t)}catch(r){await Pr(r)}}function fh(e,t,n){const r=lt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,a)=>{const l=a.view.Fa(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=lt(a);c.onlineState=l;let h=!1;c.queries.forEach((d,p)=>{for(const g of p.Sa)g.Fa(l)&&(h=!0)}),h&&_l(c)}(r.eventManager,t),s.length&&r.lu.Y_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ZI(e,t,n){const r=lt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let a=new Ot(nt.comparator);a=a.insert(i,re.newNoDocument(i,at.min()));const l=pt().add(i),c=new so(at.min(),new Map,new Ot(ht),a,l);await gp(r,c),r.Iu=r.Iu.remove(i),r.Eu.delete(t),El(r)}else await Aa(r.localStore,t,!1).then(()=>Sa(r,t,n)).catch(Pr)}async function tw(e,t){const n=lt(e),r=t.batch.batchId;try{const s=await aI(n.localStore,t);yp(n,r,null),_p(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ns(n,s)}catch(s){await Pr(s)}}async function ew(e,t,n){const r=lt(e);try{const s=await function(a,l){const c=lt(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return c.mutationQueue.lookupMutationBatch(h,l).next(p=>(Rt(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>c.localDocuments.getDocuments(h,d))})}(r.localStore,t);yp(r,t,n),_p(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ns(r,s)}catch(s){await Pr(s)}}function _p(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function yp(e,t,n){const r=lt(e);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Au[r.currentUser.toKey()]=s}}function Sa(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||Ep(e,r)})}function Ep(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(hl(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),El(e))}function dh(e,t,n){for(const r of n)r instanceof dp?(e.du.addReference(r.key,t),nw(e,r)):r instanceof pp?(Y(yl,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||Ep(e,r.key)):st(19791,{pu:r})}function nw(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(Y(yl,"New document in limbo: "+n),e.Tu.add(r),El(e))}function El(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new nt(Vt.fromString(t)),r=e.Vu.next();e.Eu.set(r,new HI(n)),e.Iu=e.Iu.insert(n,r),ap(e.remoteStore,new yn(je(Vd(n.path)),r,"TargetPurposeLimboResolution",Xi.le))}}async function Ns(e,t,n){const r=lt(e),s=[],i=[],a=[];r.hu.isEmpty()||(r.hu.forEach((l,c)=>{a.push(r.fu(c,t,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){s.push(h);const p=cl.Rs(c.targetId,h);i.push(p)}}))}),await Promise.all(a),r.lu.Y_(s),await async function(c,h){const d=lt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(h,g=>M.forEach(g.ds,E=>d.persistence.referenceDelegate.addReference(p,g.targetId,E)).next(()=>M.forEach(g.As,E=>d.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))}catch(p){if(!Cr(p))throw p;Y(ul,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const E=d.xs.get(g),V=E.snapshotVersion,D=E.withLastLimboFreeSnapshotVersion(V);d.xs=d.xs.insert(g,D)}}}(r.localStore,i))}async function rw(e,t){const n=lt(e);if(!n.currentUser.isEqual(t)){Y(yl,"User change. New user:",t.toKey());const r=await rp(n.localStore,t);n.currentUser=t,function(i,a){i.Ru.forEach(l=>{l.forEach(c=>{c.reject(new tt(F.CANCELLED,a))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ns(n,r.ks)}}function sw(e,t){const n=lt(e),r=n.Eu.get(t);if(r&&r.cu)return pt().add(r.key);{let s=pt();const i=n.Pu.get(t);if(!i)return s;for(const a of i){const l=n.hu.get(a);s=s.unionWith(l.view.eu)}return s}}function vp(e){const t=lt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZI.bind(null,t),t.lu.Y_=UI.bind(null,t.eventManager),t.lu.gu=jI.bind(null,t.eventManager),t}function iw(e){const t=lt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=tw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ew.bind(null,t),t}class Mi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=io(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return oI(this.persistence,new rI,t.initialUser,this.serializer)}Su(t){return new np(ll.fi,this.serializer)}bu(t){return new dI}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mi.provider={build:()=>new Mi};class ow extends Mi{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){Rt(this.persistence.referenceDelegate instanceof Ni,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $T(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?pe.withCacheSize(this.cacheSizeBytes):pe.DEFAULT;return new np(r=>Ni.fi(r,n),this.serializer)}}class Pa{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rw.bind(null,this.syncEngine),await MI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new LI}()}createDatastore(t){const n=io(t.databaseInfo.databaseId),r=function(i){return new yI(i)}(t.databaseInfo);return function(i,a,l,c){return new II(i,a,l,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,a,l){return new AI(r,s,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>fh(this.syncEngine,n,0),function(){return oh.C()?new oh:new pI}())}createSyncEngine(t,n){return function(s,i,a,l,c,h,d){const p=new KI(s,i,a,l,c,h);return d&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const i=lt(s);Y(Hn,"RemoteStore shutting down."),i.da.add(5),await xs(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Pa.provider={build:()=>new Pa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):on("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="FirestoreClient";class lw{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=de.UNAUTHENTICATED,this.clientId=dd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Y(Dn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Y(Dn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=gl(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Ko(e,t){e.asyncQueue.verifyOperationInProgress(),Y(Dn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await rp(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function ph(e,t){e.asyncQueue.verifyOperationInProgress();const n=await cw(e);Y(Dn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>lh(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>lh(t.remoteStore,s)),e._onlineComponents=t}async function cw(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Y(Dn,"Using user provided OfflineComponentProvider");try{await Ko(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;vs("Error using user provided cache. Falling back to memory cache: "+n),await Ko(e,new Mi)}}else Y(Dn,"Using default OfflineComponentProvider"),await Ko(e,new ow(void 0));return e._offlineComponents}async function Tp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Y(Dn,"Using user provided OnlineComponentProvider"),await ph(e,e._uninitializedComponentsProvider._online)):(Y(Dn,"Using default OnlineComponentProvider"),await ph(e,new Pa))),e._onlineComponents}function uw(e){return Tp(e).then(t=>t.syncEngine)}async function hw(e){const t=await Tp(e),n=t.eventManager;return n.onListen=GI.bind(null,t.syncEngine),n.onUnlisten=XI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=WI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=YI.bind(null,t.syncEngine),n}function fw(e,t,n={}){const r=new In;return e.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,h){const d=new aw({next:g=>{d.xu(),a.enqueueAndForget(()=>BI(i,p)),g.fromCache&&c.source==="server"?h.reject(new tt(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new $I(l,d,{includeMetadataChanges:!0,Qa:!0});return FI(i,p)}(await hw(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(e,t,n){if(!n)throw new tt(F.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function dw(e,t,n,r){if(t===!0&&r===!0)throw new tt(F.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function gh(e){if(!nt.isDocumentKey(e))throw new tt(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function _h(e){if(nt.isDocumentKey(e))throw new tt(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function vl(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":st(12329,{type:typeof e})}function Ca(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new tt(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vl(e);throw new tt(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="firestore.googleapis.com",yh=!0;class Eh{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new tt(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pw,this.ssl=yh}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:yh;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=tp;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<ep)throw new tt(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}dw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ip((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new tt(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new tt(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new tt(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Tl{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new tt(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eh(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _v;switch(r.type){case"firstParty":return new vv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new tt(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mh.get(n);r&&(Y("ComponentProvider","Removing Datastore"),mh.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new lo(this.firestore,t,this._query)}}class Ne{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ne(this.firestore,t,this._key)}}class wn extends lo{constructor(t,n,r){super(t,n,Vd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ne(this.firestore,null,new nt(t))}withConverter(t){return new wn(this.firestore,t,this._path)}}function Hw(e,t,...n){if(e=_s(e),wp("collection","path",t),e instanceof Tl){const r=Vt.fromString(t,...n);return _h(r),new wn(e,null,r)}{if(!(e instanceof Ne||e instanceof wn))throw new tt(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Vt.fromString(t,...n));return _h(r),new wn(e.firestore,null,r)}}function mw(e,t,...n){if(e=_s(e),arguments.length===1&&(t=dd.newId()),wp("doc","path",t),e instanceof Tl){const r=Vt.fromString(t,...n);return gh(r),new Ne(e,null,new nt(r))}{if(!(e instanceof Ne||e instanceof wn))throw new tt(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Vt.fromString(t,...n));return gh(r),new Ne(e.firestore,e instanceof wn?e.converter:null,new nt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="AsyncQueue";class Th{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new ip(this,"async_queue_retry"),this.rc=()=>{const r=Ho();r&&Y(vh,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=Ho();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Ho();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new In;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!Cr(t))throw t;Y(vh,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,on("INTERNAL UNHANDLED ERROR: ",Ih(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const s=ml.createAndSchedule(this,t,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&st(47125,{cc:Ih(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function Ih(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Il extends Tl{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new Th,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Th(t),this._firestoreClient=void 0,await t}}}function gw(e,t,n){n||(n=Si);const r=JE(e,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Ai(i,t))return s;throw new tt(F.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new tt(F.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<ep)throw new tt(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&Jf(t.host)&&Ky(t.host),r.initialize({options:t,instanceIdentifier:n})}function Ap(e){if(e._terminated)throw new tt(F.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||_w(e),e._firestoreClient}function _w(e){var t,n,r;const s=e._freezeSettings(),i=function(l,c,h,d){return new Mv(l,c,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Ip(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new lw(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Rr(Yt.fromBase64String(t))}catch(n){throw new tt(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Rr(Yt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new tt(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new tt(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new tt(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ht(this._lat,t._lat)||ht(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=/^__.*__$/;class Ew{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Qn(t,this.data,this.fieldMask,n,this.fieldTransforms):new Vs(t,this.data,n,this.fieldTransforms)}}function Rp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st(40011,{Ic:e})}}class Sl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new Sl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.dc({path:r,Rc:!1});return s.Vc(t),s}mc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return ki(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(Rp(this.Ic)&&yw.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class vw{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||io(t)}bc(t,n,r,s=!1){return new Sl({Ic:t,methodName:n,wc:r,path:Xt.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tw(e){const t=e._freezeSettings(),n=io(e._databaseId);return new vw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Iw(e,t,n,r,s,i={}){const a=e.bc(i.merge||i.mergeFields?2:0,t,n,s);Cp("Data must be an object, but it was:",a,r);const l=Sp(r,a);let c,h;if(i.merge)c=new De(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=ww(t,p,n);if(!a.contains(g))throw new tt(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Rw(d,g)||d.push(g)}c=new De(d),h=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=a.fieldTransforms;return new Ew(new Re(l),c,h)}class Pl extends Al{_toFieldTransform(t){return new lT(t.path,new Rs)}isEqual(t){return t instanceof Pl}}function bp(e,t){if(Pp(e=_s(e)))return Cp("Unsupported field value:",t,e),Sp(e,t);if(e instanceof Al)return function(r,s){if(!Rp(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=bp(l,s.fc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=_s(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=jt.fromDate(r);return{timestampValue:xi(s.serializer,i)}}if(r instanceof jt){const i=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xi(s.serializer,i)}}if(r instanceof Rl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rr)return{bytesValue:Gd(s.serializer,r._byteString)};if(r instanceof Ne){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.gc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ol(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof bl)return function(a,l){return{mapValue:{fields:{[Td]:{stringValue:Id},[Pi]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.gc("VectorValues must only contain numeric values.");return rl(l.serializer,h)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${vl(r)}`)}(e,t)}function Sp(e,t){const n={};return md(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gn(e,(r,s)=>{const i=bp(s,t.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Pp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof jt||e instanceof Rl||e instanceof Rr||e instanceof Ne||e instanceof Al||e instanceof bl)}function Cp(e,t,n){if(!Pp(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=vl(n);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function ww(e,t,n){if((t=_s(t))instanceof wl)return t._internalPath;if(typeof t=="string")return Vp(e,t);throw ki("Field path arguments must be of type string or ",e,!1,void 0,n)}const Aw=new RegExp("[~\\*/\\[\\]]");function Vp(e,t,n){if(t.search(Aw)>=0)throw ki(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new wl(...t.split("."))._internalPath}catch{throw ki(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ki(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new tt(F.INVALID_ARGUMENT,l+e+c)}function Rw(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new bw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(xp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bw extends Dp{data(){return super.data()}}function xp(e,t){return typeof t=="string"?Vp(e,t):t instanceof wl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new tt(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pw{convertValue(t,n="none"){switch(Cn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return kt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Pn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw st(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Gn(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n[Pi].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>kt(a.doubleValue));return new bl(i)}convertGeoPoint(t){return new Rl(kt(t.latitude),kt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Ji(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Is(t));default:return null}}convertTimestamp(t){const n=Sn(t);return new jt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Vt.fromString(t);Rt(Zd(r),9688,{name:t});const s=new ws(r.get(1),r.get(3)),i=new nt(r.popFirst(5));return s.isEqual(n)||on(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(e,t,n){let r;return r=e?e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Vw extends Dp{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new gi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(xp("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class gi extends Vw{data(t={}){return super.data(t)}}class Dw{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new ii(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new gi(this._firestore,this._userDataWriter,r.key,r,new ii(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new tt(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new gi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ii(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new gi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ii(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:xw(l.type),doc:c,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st(61501,{type:e})}}class Nw extends Pw{constructor(t){super(),this.firestore=t}convertBytes(t){return new Rr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ne(this.firestore,null,n)}}function Kw(e){e=Ca(e,lo);const t=Ca(e.firestore,Il),n=Ap(t),r=new Nw(t);return Sw(e._query),fw(n,e._query).then(s=>new Dw(t,r,e,s))}function Gw(e,t){const n=Ca(e.firestore,Il),r=mw(e),s=Cw(e.converter,t);return Ow(n,[Iw(Tw(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}function Ow(e,t){return function(r,s){const i=new In;return r.asyncQueue.enqueueAndForget(async()=>JI(await uw(r),s,i)),i.promise}(Ap(e),t)}function Ww(){return new Pl("serverTimestamp")}(function(t,n=!0){(function(s){Sr=s})(nv),Ri(new ys("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Il(new yv(r.getProvider("auth-internal")),new Tv(a,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new tt(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ws(h.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),mr(Su,Pu,t),mr(Su,Pu,"esm2017")})();const Mw={apiKey:"AIzaSyCzXNLqEBCpQm-WNTO88tk9a2joWYprBZM",authDomain:"isbar-game.firebaseapp.com",projectId:"isbar-game",storageBucket:"isbar-game.firebasestorage.app",messagingSenderId:"85547344634",appId:"1:85547344634:web:e7f18d990fc89e43105f43"},kw=rv(Mw),Qw=gw(kw,{experimentalForceLongPolling:!0}),Lw=[{path:"/isbar-game/",name:"Home",component:()=>Zs(()=>import("./Home-CWELR1xC.js"),__vite__mapDeps([0,1]))},{path:"/isbar-game/classify",name:"ClassifyGame",component:()=>Zs(()=>import("./ClassifyGame-BmRZQjnD.js"),__vite__mapDeps([2,3]))},{path:"/isbar-game/choice",name:"ChoiceGame",component:()=>Zs(()=>import("./ChoiceGame-DinKYG4x.js"),__vite__mapDeps([4,5]))},{path:"/:pathMatch(.*)*",redirect:"/isbar-game/"},{path:"/leaderboard",name:"Leaderboard",component:()=>Zs(()=>import("./Leaderboard-DniepCPk.js"),[])}],Fw=Ny({history:ly("/isbar-game/"),routes:Lw}),Cl=v_(P_);Cl.use(A_());Cl.use(Fw);Cl.mount("#app");export{Ye as F,Py as R,jt as T,R_ as _,Vf as a,ve as b,jw as c,rf as d,Ug as e,$w as f,Uw as g,Bw as h,Gw as i,Hw as j,Qw as k,Ym as l,Ve as m,Ma as n,bf as o,og as p,Kw as q,Wh as r,Ww as s,dm as t,fr as u,qw as v,zm as w};
