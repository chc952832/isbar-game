import{d as L,r,c as s,a,f as h,t as u,F as I,g as S,b as E,e as C,h as $,v as Z,w as M,u as V,R as U,i as W,j as J,k as K,s as X,o as l,n as T,_ as Y}from"./index-CHcNOb4E.js";const D=[{question:"請將下列交班內容項目，分類至適當的欄位",items:[{text:"交班時間與單位",category:"I",explanation:"基本交班資訊屬 I 分類"},{text:"異常檢驗值 / 檢查報告追蹤",category:"A",explanation:"檢查結果屬於評估，為 A（Assessment）"},{text:"特殊感染與隔離",category:"S",explanation:"現存特殊感染為 S（Situation）"},{text:"其他計畫 / 預排處置",category:"R",explanation:"未來處置及計畫為 R 類"},{text:"特殊裝置設定（如 ECMO, IABP）",category:"A",explanation:"特殊裝置分類為 A"},{text:"治療經過",category:"B",explanation:"治療過程為 Background"},{text:"現存管路",category:"A",explanation:"目前有哪些管路屬於 A 類評估"},{text:"入院診斷",category:"B",explanation:"入院診斷屬於病人背景資料"},{text:"今日狀況",category:"S",explanation:"今日的整體狀況歸為 S（Situation）"},{text:"呼吸器設定與警報值",category:"R",explanation:"呼吸器設定建議為 Recommendation"},{text:"呼吸治療計畫 / 策略 / 目標值",category:"R",explanation:"屬於建議與治療方向"},{text:"現況評估/呼吸治療評估",category:"A",explanation:"治療相關評估歸為 A（Assessment）"},{text:"病史",category:"B",explanation:"既往病史屬於 B（Background）"},{text:"意識狀況 / 生命徵象",category:"A",explanation:"生命徵象及意識屬於評估，分類為 A"},{text:"病人基本資料（姓名 / 床號 / 性別 / 年齡）",category:"I",explanation:"交班開頭需介紹基本資料，屬於 I（Introduction）"},{text:"交班提醒事項",category:"R",explanation:"需注意的提醒事項屬於建議類別"},{text:"鎮靜 / 升壓藥物",category:"A",explanation:"藥物使用影響評估結果，為 A 類"},{text:"交班者與接班者身份",category:"I",explanation:"介紹彼此的角色為 I 類別"}].map(c=>{var i;return{...c,id:((i=crypto.randomUUID)==null?void 0:i.call(crypto))||Math.random().toString()}})},{question:"48 歲男性，插管 3 日，正在使用呼吸器通氣。請將以下交班資訊分類至 ISBAR 對應欄位：",items:[{text:"GCS E1VEM1",category:"A",explanation:"意識評估屬於 Assessment"},{text:"intubated on 6/20, was admitted to RICU under impression of ARDS",category:"B",explanation:"入院診斷、入院經過與插管日為 Background"},{text:"FiO2 0.6, PEEP 10, VT 450, Flow 50, RR 22",category:"R",explanation:"目前呼吸器設定建議為 Recommendation"},{text:"keep VT< 450ml(6c.c/kg), pH≧7.25, SpO2≧88%",category:"R",explanation:"屬於呼吸器目標值建議"},{text:"交班人：RT 張三，接班人：RT 李四",category:"I",explanation:"身份介紹為 Introduction"}].map(c=>{var i;return{...c,id:((i=crypto.randomUUID)==null?void 0:i.call(crypto))||Math.random().toString()}})},{question:"72 歲女性，COPD 惡化住院第五天，使用BiPAP。請協助分類交班內容：",items:[{text:"HR 98, BP 142/88, RR 25, SpO2 92% ",category:"A",explanation:"最後一次生命徵象做為評估參考，屬於Assessment"},{text:"Hx: COPD, frequent exacerbation, chronic CO2 retention",category:"B",explanation:"為病史 Background"},{text:"BiPAP ST mode / IPAP 18 / EPAP 8 / Rate 14 / Ti 0.8",category:"R",explanation:"呼吸器設定屬 Recommendation"},{text:"建議依ABG調整 BiPAP 設定",category:"R",explanation:"建議與治療方向屬 Recommendation"},{text:"病人姓名：王小美，床號：7H-212",category:"I",explanation:"基本身份資料為 Introduction"}].map(c=>{var i;return{...c,id:((i=crypto.randomUUID)==null?void 0:i.call(crypto))||Math.random().toString()}})},{question:"60 歲男性, 入院換肝術後使用呼吸器。請分類以下交班資訊：",items:[{text:"Weaning Profile test, Pi: -60cmH2O, Pe: +100cmH2O, RSBI:40, cuff leak test Vti:500ml, Vte:123ml/162ml/101ml",category:"A",explanation:"呼吸脫離評估屬於 Assessment"},{text:"Hx: alcoholic cirrhosis, 07/11 was admitted to ward for preparation of liver transplant",category:"B",explanation:"病史和入院經過為 Background"},{text:"FiO2 0.3, PEEP 5, PS 10; Extubation is planned for tomorrow.",category:"R",explanation:"呼吸設定及治療計畫為 Recommendation"},{text:"He returned from the OR 7 hours ago with the ETT in place; he is now awake and has begun respiratory training.",category:"S",explanation:"病人現況為 Situation"},{text:"keep weaning",category:"R",explanation:"呼吸治療計畫屬於 Recommendation"}].map(c=>{var i;return{...c,id:((i=crypto.randomUUID)==null?void 0:i.call(crypto))||Math.random().toString()}})},{question:"88 歲女性，OHCA，住院第十天，VA ECMO及呼吸器使用中。請協助分類交班資訊：",items:[{text:"under VA ECMO support now.",category:"S",explanation:"現況屬於 S"},{text:"06/15 OHCA s/p CPCR 15mins with ROSC, due to cardiogenic shock, on VA ECMO support, post cath, transfer to CCU care. ",category:"B",explanation:"入院與治療經過為 Background"},{text:"VA type ECMO FiO2:100%, Gas flow: 1500ml/min, Blood flow: 3.11L/min, Pump speed: 1891RPM",category:"A",explanation:"特殊管路與裝置為 Assessment"},{text:"Schedule echocardiography tomorrow morning to assess cardiac recovery and readiness for VA‑ECMO weaning.",category:"R",explanation:"後續計畫為 Recommendation"},{text:"姓名：陳阿珠，床號：CCU-10",category:"I",explanation:"介紹病人基本資料為 Introduction"}].map(c=>{var i;return{...c,id:((i=crypto.randomUUID)==null?void 0:i.call(crypto))||Math.random().toString()}})}],ee={class:"game-container"},te={class:"title"},oe={class:"selection-zone"},ae={class:"item-list"},ne=["onClick"],se={class:"drop-zones"},le={class:"zone-label"},ie={class:"drop-content"},re=["onClick"],ce=["onClick"],ue={key:0,class:"button-group"},de={key:1,class:"button-group next-only"},me={key:2,class:"finish-message"},pe={class:"submit-score"},ve=["disabled"],xe={key:3,class:"result-box"},ge={key:0},ye={key:1},fe={key:4,class:"error-message"},he=L({__name:"ClassifyGame",setup(c){const i=t=>["I","S","B","A","R"].includes(t),B=D[0],O=D.slice(1).filter(t=>t.question!==B.question).map(t=>({question:t.question,items:t.items.filter(e=>i(e.category)).map(e=>({...e,category:e.category}))})).sort(()=>Math.random()-.5).slice(0,4),d=r([B,...O]),m=r(0),y=r(d.value[m.value]),f=r([...y.value.items]),p=r(null),x=r({I:[],S:[],B:[],A:[],R:[]}),b=r([]),R=r(!1),A=r(!1),_=r(0),g=r("");function q(t){var e;p.value=((e=p.value)==null?void 0:e.id)===t.id?null:t,g.value=""}function H(t){if(!p.value){g.value="請先選擇一個項目再點擊分類加號！";return}x.value[t].push(p.value),f.value=f.value.filter(e=>{var o;return e.id!==((o=p.value)==null?void 0:o.id)}),p.value=null}function F(t,e){const o=x.value[t].findIndex(n=>n.id===e);if(o!==-1){const[n]=x.value[t].splice(o,1);f.value.push(n)}}function N(){if(f.value.length>0){g.value="請完成所有項目的分類後再送出答案！";return}g.value="",b.value=[];let t=!0;for(const[e,o]of Object.entries(x.value))for(const n of o){const v=n.category===e;b.value.push({item:n,correct:v,correctCategory:n.category,explanation:n.explanation}),v||(t=!1)}t&&(_.value+=20),m.value<d.value.length-1?R.value=!0:A.value=!0}function P(){b.value=[],R.value=!1,g.value="",p.value=null,y.value=d.value[m.value],f.value=[...y.value.items],Object.keys(x.value).forEach(t=>x.value[t]=[])}function z(){m.value++,m.value<d.value.length?(y.value=d.value[m.value],P()):A.value=!0}function G(){const t=O.sort(()=>Math.random()-.5).slice(0,4);d.value=[B,...t],m.value=0,y.value=d.value[0],A.value=!1,_.value=0,P()}async function Q(t,e){try{await W(J(K,"classify_scores"),{name:t,score:e,timestamp:X()}),console.log("✅ 分數已儲存")}catch(o){console.error("❌ 錯誤:",o)}}const k=r(""),w=r(!1);async function j(){if(!k.value.trim()){alert("請輸入名稱以送出成績");return}await Q(k.value.trim(),_.value),w.value=!0}return(t,e)=>(l(),s("div",ee,[a("h2",te,u(y.value.question),1),a("div",oe,[e[1]||(e[1]=a("h3",{class:"subtitle"},"點選交班項目後，在下方分類欄位中點選加入以進行分類，欲更改欄位，再點選一次該項目即可重新加入",-1)),a("div",ae,[(l(!0),s(I,null,S(f.value,(o,n)=>(l(),s("button",{key:o.id,class:"selectable-item",onClick:v=>q(o)},u(o.text),9,ne))),128))])]),a("div",se,[(l(!0),s(I,null,S(x.value,(o,n)=>(l(),s("div",{key:n,class:T(["drop-zone",{fullRow:n==="I"}])},[a("h4",le,u(n),1),a("div",ie,[(l(!0),s(I,null,S(o,(v,Ce)=>(l(),s("div",{key:v.id,class:"drop-item",onClick:be=>F(n,v.id)},u(v.text),9,re))),128))]),p.value?(l(),s("button",{key:0,class:"add-button",onClick:v=>H(n)},"➕ 加入",8,ce)):h("",!0)],2))),128))]),!R.value&&!A.value?(l(),s("div",ue,[a("button",{onClick:N,class:"submit-button"},"送出答案"),a("button",{onClick:P,class:"reset-button"},"重試")])):h("",!0),R.value&&m.value<d.value.length-1?(l(),s("div",de,[a("button",{onClick:z,class:"submit-button"},"下一題")])):h("",!0),A.value?(l(),s("div",me,[e[6]||(e[6]=a("p",null,"🎉 全部題目完成！",-1)),a("p",null,[e[2]||(e[2]=C("你本次得分為 ")),a("strong",null,u(_.value),1),e[3]||(e[3]=C(" / 100"))]),a("div",pe,[$(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>k.value=o),placeholder:"請輸入你的名稱",class:"name-input"},null,512),[[Z,k.value]]),a("button",{onClick:j,disabled:w.value,class:"submit-button"},u(w.value?"✅ 已送出":"📤 送出成績"),9,ve)]),E(V(U),{to:"/isbar-game/",class:"home-button"},{default:M(()=>e[4]||(e[4]=[C("🏠 回首頁")])),_:1,__:[4]}),E(V(U),{to:"/leaderboard",class:"leaderboard-button"},{default:M(()=>e[5]||(e[5]=[C("📊 查看排行榜")])),_:1,__:[5]}),a("button",{onClick:G,class:"reset-button"},"重新開始")])):h("",!0),b.value.length?(l(),s("div",xe,[e[8]||(e[8]=a("h3",null,"結果：",-1)),a("ul",null,[(l(!0),s(I,null,S(b.value,(o,n)=>(l(),s("li",{key:n,class:T({correct:o.correct,incorrect:!o.correct})},[a("strong",null,u(o.item.text),1),o.correct?(l(),s("span",ge,"✅ 正確")):(l(),s("span",ye,[e[7]||(e[7]=C(" ❌ 錯誤，正確為 ")),a("strong",null,u(o.correctCategory),1),C("："+u(o.explanation),1)]))],2))),128))])])):h("",!0),g.value?(l(),s("div",fe,u(g.value),1)):h("",!0)]))}}),Re=Y(he,[["__scopeId","data-v-7b196aca"]]);export{Re as default};
